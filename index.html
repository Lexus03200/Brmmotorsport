<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRMOTORSPORT - Performance Automobile</title>
    <!-- Int√©gration de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Int√©gration de React et ReactDOM CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Int√©gration de Babel pour transpiler le JSX directement dans le navigateur -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Expose Firebase modules globally for React to use them in 'text/babel' script
        window.firebase = {
            initializeApp,
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            getFirestore,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            collection,
            onSnapshot
        };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            /* Remove specific background-color from style tag to let Tailwind class control */
            overflow-x: hidden; /* Emp√™che le d√©filement horizontal */
        }
        /* Keyframes pour les animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% { opacity: 0; transform: scale3d(.3, .3, .3); }
            20% { transform: scale3d(1.1, 1.1, 1.1); }
            40% { transform: scale3d(.9, .9, .9); }
            60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
            80% { transform: scale3d(.97, .97, .97); }
            100% { opacity: 1; transform: scale3d(1, 1, 1); }
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        /* Nouvelle animation pour le d√©filement de la banni√®re */
        @keyframes scrollText {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-100%); }
        }
        .animate-fade-in-down { animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-bounce-in { animation: bounceIn 1s; }
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        /* Style pour l'animation de d√©filement */
        .scrolling-banner-text {
            display: inline-block;
            white-space: nowrap;
            animation: scrollText 30s linear infinite; /* 30s pour la dur√©e, linear pour un mouvement fluide, infinite pour la r√©p√©tition */
        }
        /* Pour assurer que le texte d√©borde et puisse d√©filer */
        .scrolling-banner-container {
            overflow: hidden;
        }

        /* Styles sp√©cifiques pour la Lightbox (modale) */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            animation: fadeIn 0.3s ease-out forwards;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 0.75rem;
        }

        .lightbox-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 9999px; /* fully rounded */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
            position: absolute;
            z-index: 101;
        }

        .lightbox-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .lightbox-close-button {
            top: 1rem;
            right: 1rem;
        }

        .lightbox-prev-button {
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .lightbox-next-button {
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }
    </style>
</head>
<body class="min-h-screen bg-red-900 font-inter"> {/* CHANGEMENT: Set body background to red-900 for debugging */}
    {/* Section Audio de fond */}
    {/* 'autoplay' tente de lancer la lecture automatique, mais peut √™tre bloqu√© par les navigateurs mobiles. */}
    {/* 'loop' assure que la musique se r√©p√®te. */}
    {/* 'style="display:none;"' masque les contr√¥les de lecture par d√©faut. */}
    <audio id="background-music" autoplay loop style={{display:'none'}}>
        {/* L'URL est construite en utilisant votre domaine GitHub Pages et le nom de votre fichier MP3. */}
        <source src="https://lexus03200.github.io/Brmotorsport/musique.mp3" type="audio/mpeg"/>
        Votre navigateur ne supporte pas l'√©l√©ment audio.
    </audio>

    <div id="root" className="min-h-screen flex items-center justify-center text-white text-xl bg-blue-900">
        {/* This content will be replaced by React, but acts as a fallback */}
        Chargement de l'application BRMOTORSPORT... Si ce message persiste, une erreur est survenue.
    </div>

    {/* Le type du script a √©t√© chang√© en "text/babel" pour que Babel puisse le transpiler */}
    <script type="text/babel">
        {/* R√©cup√®re les hooks React depuis l'objet global React */}
        const { useState, useEffect, useRef } = React;

        {/* R√©cup√®re les modules Firebase depuis l'objet global window */}
        const {
            initializeApp,
            getAuth,
            signInAnonymously,
            signInWithCustomToken,
            getFirestore,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            collection,
            onSnapshot
        } = window.firebase;

        {/* --- Ic√¥nes Lucide React --- */}
        const CarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-car">
            <path d="M19 17H5c-1.1 0-2 .9-2 2v2h18v-2c0-1.1-.9-2-2-2Z"/><path d="M7 17V5h12v12"/><path d="M18 10h-8"/><path d="M10 10v7"/>
          </svg>
        );

        const HandshakeIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucude-handshake">
            <path d="M12.23 20.73a4.7 4.7 0 0 0 6.64-6.64L12.23 7.07l-2.06 2.06"/><path d="M16 16l-3.23 3.23a4.7 4.7 0 0 1-6.64-6.64L9.07 7.07l2.06 2.06"/><path d="M14 10l-2.06 2.06"/><path d="m10 14 2.06-2.06"/>
          </svg>
        );

        const WrenchIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-wrench">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 [Circular Object]"/>
            <path d="M5.5 12.5l-3-3L12.5 2.5l3 3z"/>
          </svg>
        );

        const CalendarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-calendar-days">
            <path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/>
          </svg>
        );

        const UsersIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-users">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87L16 16"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        );

        const RssIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rss">
            <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
          </svg>
        );

        const PhoneIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-phone">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2H7c.43 0 .79.27.94.66.14.39.07.82-.2 1.1L5.05 6.05c-.35.35-.5.85-.34 1.34A19.79 19.79 0 0 0 16.92 19c.49.16.99.01 1.34-.34l2.29-2.29c.28-.27.71-.34 1.1-.2.39.14.66.5.66.94Z"/>
          </svg>
        );

        const MailIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-mail">
              <rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
        );

        const InstagramIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-instagram">
              <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.5" y1="6.5" y2="6.5"/>
            </svg>
        );

        {/* Nouvelle ic√¥ne Play */}
        const PlayIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-play">
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        {/* Nouvelle ic√¥ne Pause */}
        const PauseIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-pause">
                <rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/>
            </svg>
        );

        const StarIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-star">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        const ArrowLeftIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-left">
                <path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>
            </svg>
        );

        const ArrowRightIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-right">
                <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
            </svg>
        );

        const XIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-x">
                <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
        );

        {/* Composant de la banni√®re d√©filante */}
        const ScrollingBanner = () => {
            const bannerText = "BRMOTORSPORT ‚Ä¢ VOTRE SATISFACTION EST NOTRE PRIORIT√â ‚Ä¢ "; {/* Texte √† r√©p√©ter */}
            const repeatedText = Array(10).fill(bannerText).join(''); {/* R√©p√©ter le texte plusieurs fois pour l'effet de d√©filement continu */}

            return (
                <div className="w-full bg-red-700 text-white text-lg font-bold py-2 overflow-hidden whitespace-nowrap fixed top-0 left-0 z-50 shadow-md h-[40px]"> {/* CHANGEMENT : Ajout de h-[40px] */}
                    <div className="scrolling-banner-container">
                        <span className="scrolling-banner-text">
                            {repeatedText}
                        </span>
                        <span className="scrolling-banner-text" aria-hidden="true">
                            {repeatedText} {/* Une copie pour assurer la continuit√© du d√©filement */}
                        </span>
                    </div>
                </div>
            );
        };

        {/* Composant de la barre de navigation */}
        const Navbar = ({ setCurrentPage, isLoggedIn }) => {
          const [isOpen, setIsOpen] = useState(false); {/* √âtat pour la visibilit√© du menu mobile */}

          const toggleMenu = () => {
            setIsOpen(!isOpen);
          };

          return (
            <nav className="bg-gray-900 bg-opacity-90 backdrop-blur-sm p-4 fixed w-full z-50 shadow-lg rounded-b-lg top-[40px] h-[60px]"> {/* CHANGEMENT : top-11 remplac√© par top-[40px] et ajout de h-[60px] */}
              <div className="container mx-auto flex justify-between items-center px-4">
                {/* Titre BRMOTORSPORT avec un style am√©lior√© et des couleurs */}
                <div className="text-3xl md:text-4xl font-extrabold tracking-widest animate-pulse drop-shadow-lg">
                  <span className="text-red-500">BR</span>
                  <span className="text-white">MOTOR</span>
                  {/* Titre classique sans ic√¥ne pour SPORT */}
                  <span className="text-blue-500">SPORT</span>
                </div>

                {/* Ic√¥ne du menu hamburger pour mobile */}
                <div className="md:hidden">
                  <button onClick={toggleMenu} className="text-gray-300 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-lg p-2">
                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16M4 18h16"}></path>
                    </svg>
                  </button>
                </div>

                {/* Menu de bureau */}
                <div className="hidden md:flex space-x-8">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} /> {/* Ajout du lien "Voiture Vitrine" */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} />
                  {isLoggedIn && ( {/* Show Admin Panel link only if logged in */}
                    <NavItem icon={<WrenchIcon />} text="Admin Panel" page="admin" setCurrentPage={setCurrentPage} />
                  )}
                </div>
              </div>

              {/* Menu coulissant mobile */}
              <div className={`md:hidden absolute top-full left-0 w-full bg-gray-900 bg-opacity-95 backdrop-blur-sm shadow-lg
                             transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} z-40`}>
                <div className="flex flex-col items-center py-4 space-y-4">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} /> {/* Ajout du lien "Voiture Vitrine" pour mobile */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  {isLoggedIn && ( {/* Show Admin Panel link only if logged in */}
                    <NavItem icon={<WrenchIcon />} text="Admin Panel" page="admin" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  )}
                </div>
              </div>
            </nav>
          );
        };

        {/* Composant d'√©l√©ment de navigation */}
        const NavItem = ({ icon, text, page, setCurrentPage, onClick }) => (
          <button
            onClick={() => {
              setCurrentPage(page);
              if (onClick) onClick(); {/* Appelle onClick pour fermer le menu si fourni */}
            }}
            className="flex items-center text-gray-300 hover:text-red-500 transition duration-300 ease-in-out transform hover:scale-105
                       px-3 py-2 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"
          >
            <span className="mr-2 text-xl">{icon}</span>
            {text}
          </button>
        );

        {/* Composant Page d'Accueil */}
        const HomePage = ({ setCurrentPage, siteContent }) => (
          <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
            {/* Effet de fond avec des formes abstraites pour un look dynamique */}
            <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
              <div className="absolute w-64 h-64 bg-red-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob top-10 left-1/4"></div>
              <div className="absolute w-72 h-72 bg-blue-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000 top-1/2 right-1/4"></div>
              <div className="absolute w-80 h-80 bg-green-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000 bottom-10 left-1/2"></div>
            </div>

            <div className="container mx-auto px-6 relative z-10">
              {/* Section Hero */}
              <section className="text-center mb-20">
                <h1 className="text-6xl md:text-7xl font-extrabold mb-6 leading-tight drop-shadow-lg animate-fade-in-down">
                  {siteContent.heroSection?.title || "Lib√©rez la Puissance. Red√©finissez la Performance."}
                </h1>
                <p className="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                  {siteContent.heroSection?.subtitle || "Chez BRMOTORSPORT, nous transformons votre passion pour l'automobile en une exp√©rience de conduite in√©gal√©e."}
                </p>
                {/* Bouton "D√©couvrez notre blog" qui redirige vers la page blog */}
                <button
                  onClick={() => setCurrentPage('blog')}
                  className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 animate-bounce-in"
                >
                  D√©couvrez notre blog
                </button>
              </section>

              {/* Message pour la prise de rendez-vous */}
              <section className="text-center bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 mb-20 animate-fade-in-up">
                <p className="text-xl text-gray-200 leading-relaxed max-w-3xl mx-auto">
                  Pour toute prise de rendez-vous ou demande de devis, nous vous invitons √† nous contacter directement via les informations disponibles dans la <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('contact'); }} className="font-semibold text-red-400 hover:underline cursor-pointer">section 'Contact'</a>.
                </p>
              </section>

              {/* Section "Ce que nous vous proposons" */}
              <section className="mb-20">
                <h2 className="text-5xl font-bold text-center mb-12 text-red-400 animate-fade-in">
                  Ce que nous vous proposons
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                  {siteContent.serviceCards?.map((service, index) => (
                    <ServiceCard
                      key={service.id || index}
                      icon={
                        service.id === 1 ? <CarIcon /> :
                        service.id === 2 ? <span className="text-3xl">üöÄ</span> :
                        service.id === 3 ? <span className="text-3xl">üìà</span> :
                        service.id === 4 ? <span className="text-3xl">üí°</span> :
                        <CarIcon /> {/* Default icon */}
                      }
                      title={service.title}
                      description={service.description}
                    />
                  ))}
                </div>
              </section>

              {/* Section "Pourquoi nous faire confiance ?" */}
              <section className="mb-20">
                <h2 className="text-5xl font-bold text-center mb-12 text-blue-400 animate-fade-in">
                  Pourquoi nous faire confiance ?
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                  {siteContent.trustCards?.map((trust, index) => (
                    <TrustCard
                      key={trust.id || index}
                      icon={
                        trust.id === 1 ? <span className="text-3xl">‚è±Ô∏è</span> :
                        trust.id === 2 ? <HandshakeIcon /> :
                        trust.id === 3 ? <span className="text-3xl">üèÜ</span> :
                        trust.id === 4 ? <span className="text-3xl">‚≠ê</span> :
                        <HandshakeIcon /> {/* Default icon */}
                      }
                      title={trust.title}
                      description={trust.description}
                    />
                  ))}
                </div>
              </section>

              {/* Section "Faites confiance √† une √©quipe de passionn√©s" */}
              <section className="text-center mb-20 bg-gray-800 p-12 rounded-2xl shadow-xl transform transition duration-500 hover:scale-[1.02] hover:shadow-2xl">
                <h2 className="text-4xl font-bold mb-6 text-orange-400 animate-fade-in">
                  {siteContent.teamSection?.title || "Faites confiance √† une √©quipe de passionn√©s qui ma√Ætrisent leur art"}
                </h2>
                <p className="text-xl text-gray-200 leading-relaxed max-w-4xl mx-auto">
                  {siteContent.teamSection?.description || (
                    <>
                      <span className="font-semibold text-white">R√©my Bruyant</span>, notre expert automobile d√©di√© √† la performance et √† la qualit√©.
                      Chez BRMOTORSPORT, la passion du moteur est notre moteur, assurant des r√©sultats qui d√©passent vos attentes.
                    </>
                  )}
                </p>
                <div className="mt-8">
                   {/* Vous pouvez ajouter une image de R√©my ici si disponible */}
                   <img
                      src={siteContent.teamSection?.imageUrl || "https://placehold.co/150x150/000/FFF?text=Remy"} {/* Placeholder pour l'image de R√©my Bruyant */}
                      alt={siteContent.teamSection?.imageAlt || "Portrait de R√©my Bruyant"}
                      className="mx-auto rounded-full border-4 border-red-500 shadow-lg w-32 h-32 object-cover"
                      onError={(e) => { e.target.onerror = null; e.target.src="https://placehold.co/150x150/000/FFF?text=R√©my+Bruyant"; }}
                   />
                </div>
              </section>
            </div>
          </div>
        );

        {/* Composant Carte de Service */}
        const ServiceCard = ({ icon, title, description }) => (
          <div className="group bg-gray-800 p-8 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-red-500">
            <div className="text-red-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-red-400">{icon}</div>
            <h3 className="text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-red-200">{title}</h3>
            <p className="text-gray-300">{description}</p>
          </div>
        );

        {/* Composant Carte de Confiance */}
        const TrustCard = ({ icon, title, description }) => (
          <div className="group bg-gray-800 p-8 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-blue-500">
            <div className="text-blue-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-blue-400">{icon}</div>
            <h3 className="text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-blue-200">{title}</h3>
            <p className="text-gray-300">{description}</p>
          </div>
        );

        {/* Composant Carte de Blog - D√âPLAC√â AVANT BlogPage */}
        const BlogPostCard = ({ post }) => (
          <div className="bg-gray-800 rounded-xl shadow-lg overflow-hidden transform transition duration-300 ease-in-out hover:scale-105 hover:shadow-2xl hover:shadow-green-500/50 border border-gray-700 hover:border-green-400">
            <img
              src={post.image}
              alt={post.title}
              className="w-full h-64 object-cover object-center transform transition duration-500 hover:scale-110"
              onError={(e) => { e.target.onerror = null; console.error(`ERREUR DE CHARGEMENT D'IMAGE pour l'article "${post.title}": V√©rifiez le nom du fichier (${post.image}) et son emplacement.`); e.target.src=`https://placehold.co/600x400/000/FFF?text=Image+non+trouv√©e`; }} {/* Fallback image with more specific error message */}
            />
            <div className="p-6">
              <h3 className="text-2xl font-bold mb-3 text-white leading-tight">{post.title}</h3>
              <p className="text-gray-300 mb-4">{post.description}</p>
              <button className="bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold py-2 px-6 rounded-full hover:from-green-600 hover:to-teal-600 transition duration-300 ease-in-out shadow-md">
                Lire la suite
              </button>
            </div>
          </div>
        );

        {/* Composant Page Blog */}
        const BlogPage = ({ siteContent }) => {
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
              <div className="container mx-auto px-6">
                <h1 className="text-5xl font-extrabold text-center mb-12 text-green-400 animate-fade-in-down">
                  Nos R√©alisations et Actus
                </h1>
                <p className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                  D√©couvrez nos derni√®res interventions, nos projets d'optimisation et les coulisses de BRMOTORSPORT.
                </p>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                  {siteContent.blogPosts?.map(post => (
                    <BlogPostCard key={post.id} post={post} />
                  ))}
                </div>
              </div>
            </div>
          );
        };

        {/* Composant Input Field (r√©utilisable) */}
        const InputField = ({ label, type, placeholder, required = false, value, onChange, name }) => (
          <div>
            <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
              {label} {required && <span className="text-red-500">*</span>}
            </label>
            <input
              id={name || label} {/* Utilise name comme id si fourni */}
              type={type}
              name={name} {/* Ajout de l'attribut name */}
              placeholder={placeholder}
              required={required}
              value={value}
              onChange={onChange}
              className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
            />
          </div>
        );

        {/* Composant TextArea Field (r√©utilisable) */}
        const TextAreaField = ({ label, placeholder, required = false, value, onChange, name }) => (
          <div>
            <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
              {label} {required && <span className="text-red-500">*</span>}
            </label>
            <textarea
              id={name || label} {/* Utilise name comme id si fourni */}
              name={name} {/* Ajout de l'attribut name */}
              placeholder={placeholder}
              required={required}
              rows="5"
              value={value}
              onChange={onChange}
              className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200 resize-y"
            ></textarea>
          </div>
        );


        {/* Composant Page Qui Sommes-nous */}
        const AboutUsPage = ({ siteContent }) => (
          <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
            <div className="container mx-auto px-6 max-w-4xl">
              <h1 className="text-5xl font-extrabold text-center mb-12 text-yellow-400 animate-fade-in-down">
                Qui Sommes-nous
              </h1>
              <p className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                D√©couvrez la passion, l'histoire et les valeurs qui animent BRMOTORSPORT.
              </p>

              <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 mb-12 animate-fade-in-up">
                <h2 className="text-4xl font-bold mb-6 text-yellow-300 text-center">Notre Histoire</h2>
                <p className="text-lg text-gray-300 leading-relaxed mb-6">
                  {siteContent.aboutUsSection?.historyPart1 || "BRMOTORSPORT est n√© de la passion in√©branlable de R√©my Bruyant pour l'automobile et la performance. Fort de plus de 10 ans d'exp√©rience sur le terrain, R√©my a concr√©tis√© notre vision en cr√©ant un atelier d√©di√© √† l'optimisation des v√©hicules et √† l'excellence m√©canique. Ce qui a commenc√© comme une fascination pour les moteurs et leur potentiel est devenu une entreprise florissante, r√©put√©e pour notre expertise et notre approche personnalis√©e."}
                </p>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.aboutUsSection?.historyPart2 || "Notre parcours est jalonn√© de d√©fis relev√©s et de succ√®s partag√©s avec nos clients, qui nous font confiance pour lib√©rer la pleine puissance de leur v√©hicule, qu'il s'agisse d'une voiture de sport, d'un utilitaire ou d'un v√©hicule de tous les jours. Chaque projet est trait√© avec le m√™me engagement: la qualit√©, la fiabilit√© et la performance."}
                </p>
              </section>

              <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up">
                <h2 className="text-4xl font-bold mb-6 text-yellow-300 text-center">Nos Valeurs</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                  {siteContent.aboutUsSection?.values?.map((value, index) => (
                    <ValueCard
                      key={value.id || index}
                      title={value.title}
                      description={value.description}
                      icon={
                        value.id === 1 ? <WrenchIcon /> :
                        value.id === 2 ? <span className="text-3xl">‚ú®</span> :
                        value.id === 3 ? <span className="text-3xl">‚úÖ</span> :
                        value.id === 4 ? <span className="text-3xl">‚ù§Ô∏è</span> :
                        <WrenchIcon /> {/* Default icon */}
                      }
                    />
                  ))}
                </div>
              </section>
            </div>
          </div>
        );

        {/* Composant Carte de Valeur */}
        const ValueCard = ({ icon, title, description }) => (
          <div className="group bg-gray-700 p-6 rounded-lg shadow-md flex items-start space-x-4 transition duration-300 ease-in-out transform hover:scale-105 border border-gray-600 hover:border-yellow-400">
            <div className="text-yellow-400 mb-4 text-4xl transition-colors duration-300 group-hover:text-yellow-300">{icon}</div>
            <div>
              <h3 className="text-2xl font-semibold mb-2 text-white transition-colors duration-300 group-hover:text-yellow-100">{title}</h3>
              <p className="text-gray-300">{description}</p>
            </div>
          </div>
        );

        {/* Composant Page Contact */}
        const ContactPage = ({ siteContent }) => (
            <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
                <div className="container mx-auto px-6 max-w-2xl">
                    <h1 className="text-5xl font-extrabold text-center mb-12 text-pink-400 animate-fade-in-down">
                        Contactez-nous
                    </h1>
                    <p className="text-xl text-center text-gray-300 max-w-xl mx-auto mb-10 animate-fade-in-up">
                        N'h√©sitez pas √† nous contacter pour toute question, demande de devis ou prise de rendez-vous.
                    </p>

                    <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-8">
                        <div className="flex flex-col items-center text-center">
                            <MailIcon className="text-pink-500 w-12 h-12 mb-4" />
                            <h3 className="text-2xl font-semibold mb-2 text-white">Adresse E-mail</h3>
                            <a href={`mailto:${siteContent.contactInfo?.email || "brmotosport003@gmail.com"}`} className="text-blue-400 hover:underline text-lg transition duration-300">
                                {siteContent.contactInfo?.email || "brmotosport003@gmail.com"}
                            </a>
                        </div>

                        <div className="flex flex-col items-center text-center">
                            <PhoneIcon className="text-pink-500 w-12 h-12 mb-4" />
                            <h3 className="text-2xl font-semibold mb-2 text-white">Num√©ro de T√©l√©phone</h3>
                            <a href={`tel:${siteContent.contactInfo?.phone || "+33668278801"}`} className="text-blue-400 hover:underline text-lg transition duration-300">
                                {siteContent.contactInfo?.phone || "06.68.27.88.01"}
                            </a>
                        </div>

                        <div className="flex flex-col items-center text-center">
                            <InstagramIcon className="text-pink-500 w-12 h-12 mb-4" />
                            <h3 className="text-2xl font-semibold mb-2 text-white">Suivez-nous sur Instagram</h3>
                            <a href={siteContent.contactInfo?.instagramUrl || "https://www.instagram.com/brmotorsport003?igsh=bnB0ZmdjMzF1dnd3"} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:underline text-lg transition duration-300">
                                @brmotorsport003
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        );

        {/* Composant pour la page des mentions l√©gales */}
        const LegalMentionsPage = ({ siteContent }) => (
          <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
            <div className="container mx-auto px-6 max-w-4xl">
              <h1 className="text-5xl font-extrabold text-center mb-12 text-teal-400 animate-fade-in-down">
                Mentions L√©gales & Clause de Non-responsabilit√©
              </h1>
              <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-6">
                <h2 className="text-3xl font-bold mb-4 text-white">Mention l√©gale ‚Äì Clause de non-responsabilit√© sur la reprogrammation moteur</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  **Responsabilit√© sur l‚Äôusage des v√©hicules reprogramm√©s**
                </p>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.legalMentions?.reprogrammingDisclaimer || `La soci√©t√© Brmotorsport, dirig√©e par R√©my Bruyant, sp√©cialis√©e dans la reprogrammation moteur et l‚Äôoptimisation de performances automobiles, informe notre client√®le que toutes les interventions r√©alis√©es sur les calculateurs √©lectroniques (ECU) sont exclusivement destin√©es √† un usage sur circuit ferm√© ou terrain priv√©, sauf mention contraire sp√©cifiant une conformit√© avec la r√©glementation en vigueur.`}
                </p>
                <p className="text-lg text-gray-300 leading-relaxed">
                  Brmotorsport d√©cline toute responsabilit√© en cas d‚Äôutilisation d‚Äôun v√©hicule reprogramm√© sur la voie publique lorsque cette modification entra√Æne une non-conformit√© :
                </p>
                <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                  <li>au Code de la route,</li>
                  <li>aux normes environnementales (notamment les normes EURO antipollution),</li>
                  <li>aux exigences des assureurs ou du contr√¥le technique.</li>
                </ul>
                <p className="text-lg text-gray-300 leading-relaxed">
                  Il appartient au propri√©taire du v√©hicule de s‚Äôassurer de :
                </p>
                <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                  <li>La conformit√© l√©gale du v√©hicule apr√®s reprogrammation,</li>
                  <li>La d√©claration des modifications √† son assureur,</li>
                  <li>La connaissance des risques juridiques et m√©caniques encourus en cas d‚Äôusage inadapt√© du v√©hicule.</li>
                </ul>
                <p className="text-lg text-gray-300 leading-relaxed">
                  Brmotorsport ne saurait √™tre tenue responsable des cons√©quences l√©gales, techniques ou financi√®res r√©sultant d‚Äôun usage non autoris√© d‚Äôun v√©hicule reprogramm√© sur la voie publique.
                </p>
              </div>
            </div>
          </div>
        );

        {/* Composant pour la page de politique de confidentialit√© */}
        const PrivacyPolicyPage = ({ siteContent }) => (
          <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
            <div className="container mx-auto px-6 max-w-4xl">
              <h1 className="text-5xl font-extrabold text-center mb-12 text-purple-400 animate-fade-in-down">
                Politique de Confidentialit√©
              </h1>
              <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-6">
                <h2 className="text-3xl font-bold mb-4 text-white">Introduction</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.privacyPolicy?.introduction || `Bienvenue sur le site de BRMOTORSPORT. Nous nous engageons √† prot√©ger vos donn√©es personnelles. Cette politique de confidentialit√© vous informe sur la mani√®re dont nous collectons, utilisons et prot√©geons vos informations.`}
                </p>

                <h2 className="text-3xl font-bold mb-4 text-white">Collecte des Informations</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.privacyPolicy?.dataCollection || `Nous collectons des informations lorsque vous utilisez notre formulaire de contact, notamment votre nom, adresse e-mail et num√©ro de t√©l√©phone. Nous pouvons √©galement collecter des donn√©es techniques telles que votre adresse IP et le type de navigateur.`}
                </p>

                <h2 className="text-3xl font-bold mb-4 text-white">Utilisation des Informations</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.privacyPolicy?.dataUsage || `Les informations que nous collectons sont utilis√©es pour :`}
                </p>
                <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                  <li>Traiter vos demandes de contact et de devis.</li>
                  <li>Am√©liorer l'exp√©rience utilisateur de notre site.</li>
                  <li>R√©pondre √† vos questions et vous fournir un support client.</li>
                </ul>

                <h2 className="text-3xl font-bold mb-4 text-white">Protection des Donn√©es</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.privacyPolicy?.dataProtection || `Nous mettons en ≈ìuvre diverses mesures de s√©curit√© pour maintenir la s√ªret√© de vos informations personnelles. Vos donn√©es sont stock√©es sur des serveurs s√©curis√©s et accessibles uniquement par un personnel autoris√©.`}
                </p>

                <h2 className="text-3xl font-bold mb-4 text-white">Vos Droits</h2>
                <p className="text-lg text-gray-300 leading-relaxed">
                  {siteContent.privacyPolicy?.yourRights || (
                    <>
                      Conform√©ment √† la r√©glementation sur la protection des donn√©es (RGPD), vous disposez d'un droit d'acc√®s, de rectification, de suppression, de limitation et d'opposition concernant vos donn√©es personnelles. Pour exercer ces droits, veuillez nous contacter √† <a href="mailto:brmotosport003@gmail.com" className="text-blue-400 hover:underline">brmotosport003@gmail.com</a>.
                    </>
                  )}
                </p>

                <p className="text-lg text-gray-300 leading-relaxed">
                  **Ce texte est un exemple. Veuillez le remplacer par votre propre politique de confidentialit√©, compl√®te et conforme √† la l√©gislation en vigueur.**
                </p>
              </div>
            </div>
          </div>
        );

        {/* Composant pour la page Voiture Vitrine */}
        const ShowcaseCarPage = ({ siteContent }) => {
            const [selectedImageIndex, setSelectedImageIndex] = useState(null); {/* Index de l'image s√©lectionn√©e pour la modale */}

            const images = siteContent.showcaseImages || [];

            const openLightbox = (index) => {
                setSelectedImageIndex(index);
            };

            const closeLightbox = () => {
                setSelectedImageIndex(null);
            };

            const goToPrevious = () => {
                setSelectedImageIndex((prevIndex) =>
                    prevIndex === 0 ? images.length - 1 : prevIndex - 1
                );
            };

            const goToNext = () => {
                setSelectedImageIndex((prevIndex) =>
                    prevIndex === images.length - 1 ? 0 : prevIndex + 1
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
                    <div className="container mx-auto px-6 max-w-5xl">
                        <h1 className="text-5xl font-extrabold text-center mb-12 text-yellow-400 animate-fade-in-down">
                            {siteContent.showcaseSection?.title || "Notre Voiture Vitrine : Le Projet Scirocco R"}
                        </h1>
                        <p className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                            {siteContent.showcaseSection?.subtitle || "D√©couvrez en d√©tail la pr√©paration ultime de notre Volkswagen Scirocco R, un chef-d'≈ìuvre de performance et d'ing√©nierie. Cliquez sur les images pour les voir en grand !"}
                        </p>

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-8">
                            {/* Grille des images */}
                            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                                {images.map((imageSrc, index) => (
                                    <div
                                        key={index}
                                        className="relative w-full h-48 rounded-lg overflow-hidden cursor-pointer group transform transition duration-300 ease-in-out hover:scale-105 hover:shadow-xl"
                                        onClick={() => openLightbox(index)}
                                    >
                                        <img
                                            src={imageSrc}
                                            alt={`Volkswagen Scirocco R - Image ${index + 1}`}
                                            className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                                            onError={(e) => {
                                                console.error(
                                                    `ERREUR DE CHARGEMENT D'IMAGE dans la galerie:
                                                    V√©rifiez l'URL exacte affich√©e ci-dessous dans votre navigateur.
                                                    V√©rifiez la CASSE (majuscules/minuscules) et l'EXTENSION du nom de fichier sur votre d√©p√¥t GitHub.
                                                    URL √©chou√©e: ${e.target.src}`,
                                                    e
                                                );
                                                e.target.onerror = null;
                                                e.target.src="https://placehold.co/400x300/FF0000/FFFFFF?text=Erreur+chargement+image";
                                            }}
                                        />
                                        <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                            <span className="text-white text-lg font-semibold">Voir en grand</span>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Modale Lightbox */}
                            {selectedImageIndex !== null && (
                                <div className="lightbox-overlay" onClick={closeLightbox}>
                                    <div className="lightbox-content" onClick={(e) => e.stopPropagation()}>
                                        <img
                                            src={images[selectedImageIndex]}
                                            alt={`Volkswagen Scirocco R - Grande image ${selectedImageIndex + 1}`}
                                            className="lightbox-image"
                                            onError={(e) => {
                                                console.error(
                                                    `ERREUR DE CHARGEMENT D'IMAGE dans la modale:
                                                    URL √©chou√©e: ${e.target.src}`,
                                                    e
                                                );
                                                e.target.onerror = null;
                                                e.target.src="https://placehold.co/800x600/FF0000/FFFFFF?text=Erreur+chargement+image";
                                            }}
                                        />
                                        <button onClick={closeLightbox} className="lightbox-button lightbox-close-button" aria-label="Fermer">
                                            <XIcon />
                                        </button>
                                        <button onClick={goToPrevious} className="lightbox-button lightbox-prev-button" aria-label="Image pr√©c√©dente">
                                            <ArrowLeftIcon />
                                        </button>
                                        <button onClick={goToNext} className="lightbox-button lightbox-next-button" aria-label="Image suivante">
                                            <ArrowRightIcon />
                                        </button>
                                    </div>
                                </div>
                            )}

                            <h2 className="text-3xl font-bold mb-4 text-white">Pr√©paration Moteur et Optimisations</h2>
                            <p className="text-lg text-gray-300 leading-relaxed">
                                {siteContent.showcaseSection?.preparationText || `Ce projet sur le Volkswagen Scirocco R a √©t√© une d√©monstration de notre expertise en performance automobile. Chaque composant a √©t√© soigneusement s√©lectionn√© et optimis√© pour atteindre un niveau de puissance et de fiabilit√© exceptionnel. Voici les d√©tails de la pr√©paration :`}
                            </p>

                            <ul className="list-disc list-inside text-lg text-gray-300 pl-6 space-y-2">
                                {siteContent.showcaseSection?.preparationList?.map((item, index) => (
                                    <li key={index}><strong>{item.key} :</strong> {item.value}</li>
                                ))}
                            </ul>

                            <p className="text-lg text-gray-300 leading-relaxed">
                                {siteContent.showcaseSection?.conclusionText || `Cette pr√©paration compl√®te garantit non seulement une performance √©poustouflante sur piste, mais aussi une fiabilit√© √† toute √©preuve pour un usage sportif.`}
                            </p>
                        </div>
                    </div>
                </div>
            );
        };


        {/* Nouveau composant pour le contr√¥le de la musique */}
        const MusicControl = () => {
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [showAutoplayMessage, setShowAutoplayMessage] = useState(false); {/* Nouvel √©tat pour le message d'autoplay */}

            useEffect(() => {
                const audio = document.getElementById('background-music');
                if (audio) {
                    audioRef.current = audio;
                    setIsPlaying(!audio.paused);

                    const playPromise = audio.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log("Lecture automatique de la musique lanc√©e avec succ√®s.");
                            setIsPlaying(true);
                        }).catch(error => {
                            console.log("La lecture automatique de la musique a √©t√© bloqu√©e. L'utilisateur peut la d√©marrer manuellement.", error);
                            setIsPlaying(false);
                            setShowAutoplayMessage(true); {/* Afficher le message */}
                            setTimeout(() => {
                                setShowAutoplayMessage(false); {/* Masquer le message apr√®s 5 secondes */}
                            }, 5000);
                        });
                    }
                }
            }, []); {/* S'ex√©cute une seule fois au montage du composant */}

            const togglePlayPause = () => {
                const audio = audioRef.current;
                if (audio) {
                    console.log("Bouton Play/Pause cliqu√©. √âtat actuel isPlaying:", isPlaying);
                    if (isPlaying) {
                        audio.pause();
                        console.log("Musique mise en pause.");
                    } else {
                        audio.load(); {/* Force le rechargement de l'audio si n√©cessaire */}
                        audio.play()
                            .then(() => {
                                console.log("Musique lanc√©e manuellement.");
                                setIsPlaying(true);
                            })
                            .catch(error => {
                                console.error("Erreur lors de la tentative de lecture manuelle de la musique:", error);
                                {/* G√©rer le cas o√π la lecture manuelle √©choue (ex: fichier non trouv√©) */}
                                alert("Impossible de lire la musique. Le fichier pourrait √™tre manquant ou inaccessible.");
                            });
                    }
                    setIsPlaying(!isPlaying);
                    setShowAutoplayMessage(false); {/* Masquer le message si l'utilisateur interagit */}
                } else {
                    console.error("√âl√©ment audio non trouv√©.");
                }
            };

            return (
                <>
                    <button
                        onClick={togglePlayPause}
                        className="fixed bottom-8 right-8 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 active:scale-90 z-50 flex items-center justify-center w-14 h-14"
                        aria-label={isPlaying ? "Mettre la musique en pause" : "Jouer la musique"}
                    >
                        {isPlaying ? <PauseIcon /> : <PlayIcon />}
                    </button>
                    {showAutoplayMessage && (
                        <div className="fixed bottom-24 right-8 bg-yellow-500 text-gray-900 px-4 py-2 rounded-lg shadow-lg text-sm animate-fade-in z-50">
                            Cliquez sur le bouton de lecture pour lancer la musique !
                        </div>
                    )}
                </>
            );
        };

        {/* Composant de la modale de connexion administrateur */}
        const AdminLoginModal = ({ isOpen, onClose, onLogin, adminId }) => {
            const [inputPassword, setInputPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (inputPassword === adminId) {
                    onLogin();
                    onClose();
                } else {
                    setError('Identifiant incorrect.');
                }
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[1000] animate-fade-in">
                    <div className="bg-gray-900 p-8 rounded-lg shadow-xl border border-gray-700 w-full max-w-md mx-4 transform animate-fade-in-up">
                        <h2 className="text-3xl font-bold text-white mb-6 text-center">Connexion Administrateur</h2>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <InputField
                                label="Identifiant Unique"
                                type="password" {/* Use password type for sensitivity */}
                                placeholder="Entrez l'identifiant administrateur"
                                value={inputPassword}
                                onChange={(e) => { setInputPassword(e.target.value); setError(''); }}
                                name="adminIdentifier"
                                required
                            />
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            <div className="flex justify-end space-x-4 mt-6">
                                <button
                                    type="button"
                                    onClick={onClose}
                                    className="px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition duration-300"
                                >
                                    Annuler
                                </button>
                                <button
                                    type="submit"
                                    className="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300"
                                >
                                    Se connecter
                                </button>
                            </div>
                        </form>
                        <p className="text-sm text-gray-400 mt-6 text-center">
                            Votre identifiant administrateur est : <span className="font-mono text-blue-400 select-all">{adminId}</span>. Conservez-le pr√©cieusement !
                        </p>
                        <p className="text-xs text-gray-500 mt-2 text-center">
                            Note : Pour une application r√©elle, un syst√®me d'authentification plus robuste serait n√©cessaire.
                        </p>
                    </div>
                </div>
            );
        };

        {/* Composant du panneau d'administration */}
        const AdminPanel = ({ siteContent, onSaveContent, onLogout }) => {
            const [editableContent, setEditableContent] = useState(siteContent);
            const [message, setMessage] = useState('');

            useEffect(() => {
                setEditableContent(siteContent); {/* Sync local state with fetched siteContent */}
            }, [siteContent]);

            const handleChange = (e) => {
                const { name, value } = e.target;
                const [section, field] = name.split('.'); {/* Handle nested fields like heroSection.title */}

                if (section && field) {
                    setEditableContent(prev => ({
                        ...prev,
                        [section]: {
                            ...prev[section],
                            [field]: value
                        }
                    }));
                } else if (Array.isArray(editableContent[name])) {
                    {/* This handles direct array manipulation, which is complex for simple inputs */}
                    {/* For now, we'll assume direct string inputs for simpler content */}
                } else {
                    setEditableContent(prev => ({
                        ...prev,
                        [name]: value
                    }));
                }
            };

            const handleBlogChange = (index, field, value) => {
                const updatedBlogPosts = [...editableContent.blogPosts];
                updatedBlogPosts[index] = { ...updatedBlogPosts[index], [field]: value };
                setEditableContent(prev => ({ ...prev, blogPosts: updatedBlogPosts }));
            };

            const handleShowcaseImageChange = (index, value) => {
                const updatedShowcaseImages = [...editableContent.showcaseImages];
                updatedShowcaseImages[index] = value;
                setEditableContent(prev => ({ ...prev, showcaseImages: updatedShowcaseImages }));
            };

            const handleAddBlogPost = () => {
                const newId = (editableContent.blogPosts.length > 0 ? Math.max(...editableContent.blogPosts.map(p => p.id)) : 0) + 1;
                setEditableContent(prev => ({
                    ...prev,
                    blogPosts: [...prev.blogPosts, { id: newId, image: "https://placehold.co/600x400/000/FFF?text=Nouvel+Article", title: "Nouvel Article", description: "Description du nouvel article." }]
                }));
            };

            const handleRemoveBlogPost = (idToRemove) => {
                setEditableContent(prev => ({
                    ...prev,
                    blogPosts: prev.blogPosts.filter(post => post.id !== idToRemove)
                }));
            };

            const handleAddShowcaseImage = () => {
                setEditableContent(prev => ({
                    ...prev,
                    showcaseImages: [...prev.showcaseImages, "https://placehold.co/400x300/000/FFF?text=Nouvelle+Image"]
                }));
            };

            const handleRemoveShowcaseImage = (indexToRemove) => {
                setEditableContent(prev => ({
                    ...prev,
                    showcaseImages: prev.showcaseImages.filter((_, index) => index !== indexToRemove)
                }));
            };

            const handleSave = async () => {
                setMessage('Sauvegarde en cours...');
                try {
                    await onSaveContent(editableContent);
                    setMessage('Contenu sauvegard√© avec succ√®s !');
                    setTimeout(() => setMessage(''), 3000);
                } catch (error) {
                    console.error("Erreur lors de la sauvegarde:", error);
                    setMessage('Erreur lors de la sauvegarde du contenu.');
                    setTimeout(() => setMessage(''), 3000);
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white pb-12 font-inter"> {/* CHANGEMENT : Suppression de pt-40 */}
                    <div className="container mx-auto px-6 max-w-5xl">
                        <h1 className="text-5xl font-extrabold text-center mb-12 text-teal-400 animate-fade-in-down">
                            Panneau d'Administration
                        </h1>
                        <p className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                            Modifiez le contenu de votre site ici. Les changements seront visibles en temps r√©el.
                        </p>

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 space-y-10">
                            {message && (
                                <div className={`p-4 rounded-lg text-center ${message.includes('succ√®s') ? 'bg-green-500' : 'bg-red-500'} text-white`}>
                                    {message}
                                </div>
                            )}

                            {/* Section Hero */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-purple-400">Section H√©ro</h2>
                                <div className="space-y-4">
                                    <InputField
                                        label="Titre Principal"
                                        name="heroSection.title"
                                        value={editableContent.heroSection?.title || ''}
                                        onChange={handleChange}
                                    />
                                    <TextAreaField
                                        label="Sous-titre"
                                        name="heroSection.subtitle"
                                        value={editableContent.heroSection?.subtitle || ''}
                                        onChange={handleChange}
                                    />
                                </div>
                            </section>

                            {/* Section Services */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-red-400">Section Services</h2>
                                <p className="text-gray-400 mb-4">Seul le titre et la description sont modifiables ici.</p>
                                <div className="space-y-6">
                                    {editableContent.serviceCards?.map((service, index) => (
                                        <div key={service.id || index} className="bg-gray-700 p-4 rounded-lg border border-gray-600">
                                            <h3 className="text-xl font-semibold mb-2 text-white">Service {index + 1}</h3>
                                            <InputField
                                                label="Titre du Service"
                                                name={`serviceCards.${index}.title`} {/* Example for array field, needs custom handling */}
                                                value={service.title || ''}
                                                onChange={(e) => {
                                                    const updatedServices = [...editableContent.serviceCards];
                                                    updatedServices[index].title = e.target.value;
                                                    setEditableContent(prev => ({ ...prev, serviceCards: updatedServices }));
                                                }}
                                            />
                                            <TextAreaField
                                                label="Description du Service"
                                                name={`serviceCards.${index}.description`}
                                                value={service.description || ''}
                                                onChange={(e) => {
                                                    const updatedServices = [...editableContent.serviceCards];
                                                    updatedServices[index].description = e.target.value;
                                                    setEditableContent(prev => ({ ...prev, serviceCards: updatedServices }));
                                                }}
                                            />
                                        </div>
                                    ))}
                                </div>
                            </section>

                            {/* Section About Us */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-yellow-400">Section Qui Sommes-nous</h2>
                                <div className="space-y-4">
                                    <TextAreaField
                                        label="Notre Histoire (Partie 1)"
                                        name="aboutUsSection.historyPart1"
                                        value={editableContent.aboutUsSection?.historyPart1 || ''}
                                        onChange={handleChange}
                                    />
                                    <TextAreaField
                                        label="Notre Histoire (Partie 2)"
                                        name="aboutUsSection.historyPart2"
                                        value={editableContent.aboutUsSection?.historyPart2 || ''}
                                        onChange={handleChange}
                                    />
                                </div>
                                <h3 className="text-2xl font-bold mb-4 mt-6 text-yellow-300">Nos Valeurs</h3>
                                <p className="text-gray-400 mb-4">Seul le titre et la description sont modifiables ici.</p>
                                <div className="space-y-6">
                                {editableContent.aboutUsSection?.values?.map((value, index) => (
                                    <div key={value.id || index} className="bg-gray-700 p-4 rounded-lg border border-gray-600">
                                        <h4 className="text-xl font-semibold mb-2 text-white">Valeur {index + 1}</h4>
                                        <InputField
                                            label="Titre de la Valeur"
                                            value={value.title || ''}
                                            onChange={(e) => {
                                                const updatedValues = [...editableContent.aboutUsSection.values];
                                                updatedValues[index].title = e.target.value;
                                                setEditableContent(prev => ({
                                                    ...prev,
                                                    aboutUsSection: {
                                                        ...prev.aboutUsSection,
                                                        values: updatedValues
                                                    }
                                                }));
                                            }}
                                        />
                                        <TextAreaField
                                            label="Description de la Valeur"
                                            value={value.description || ''}
                                            onChange={(e) => {
                                                const updatedValues = [...editableContent.aboutUsSection.values];
                                                updatedValues[index].description = e.target.value;
                                                setEditableContent(prev => ({
                                                    ...prev,
                                                    aboutUsSection: {
                                                        ...prev.aboutUsSection,
                                                        values: updatedValues
                                                    }
                                                }));
                                            }}
                                        />
                                    </div>
                                ))}
                                </div>
                            </section>

                            {/* Section Contact Info */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-pink-400">Informations de Contact</h2>
                                <div className="space-y-4">
                                    <InputField
                                        label="E-mail"
                                        name="contactInfo.email"
                                        value={editableContent.contactInfo?.email || ''}
                                        onChange={handleChange}
                                    />
                                    <InputField
                                        label="T√©l√©phone"
                                        name="contactInfo.phone"
                                        value={editableContent.contactInfo?.phone || ''}
                                        onChange={handleChange}
                                    />
                                    <InputField
                                        label="URL Instagram"
                                        name="contactInfo.instagramUrl"
                                        value={editableContent.contactInfo?.instagramUrl || ''}
                                        onChange={handleChange}
                                    />
                                </div>
                            </section>

                            {/* Section Blog Posts */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-green-400">Articles de Blog</h2>
                                <p className="text-gray-400 mb-4">Pour les images, vous pouvez modifier l'URL. L'upload direct de fichiers n'est pas support√© dans cet environnement.</p>
                                <button
                                    onClick={handleAddBlogPost}
                                    className="mb-6 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-300"
                                >
                                    Ajouter un nouvel article
                                </button>
                                <div className="space-y-8">
                                    {editableContent.blogPosts?.map((post, index) => (
                                        <div key={post.id} className="bg-gray-700 p-6 rounded-lg border border-gray-600">
                                            <h3 className="text-xl font-semibold mb-3 text-white">Article ID: {post.id}</h3>
                                            <InputField
                                                label="Titre"
                                                value={post.title || ''}
                                                onChange={(e) => handleBlogChange(index, 'title', e.target.value)}
                                            />
                                            <InputField
                                                label="URL de l'image"
                                                value={post.image || ''}
                                                onChange={(e) => handleBlogChange(index, 'image', e.target.value)}
                                            />
                                            <TextAreaField
                                                label="Description"
                                                value={post.description || ''}
                                                onChange={(e) => handleBlogChange(index, 'description', e.target.value)}
                                            />
                                            <button
                                                onClick={() => handleRemoveBlogPost(post.id)}
                                                className="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300"
                                            >
                                                Supprimer cet article
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            {/* Section Showcase Images */}
                            <section>
                                <h2 className="text-3xl font-bold mb-4 text-yellow-400">Images Vitrine</h2>
                                <p className="text-gray-400 mb-4">Pour les images, vous pouvez modifier l'URL. L'upload direct de fichiers n'est pas support√© dans cet environnement.</p>
                                <button
                                    onClick={handleAddShowcaseImage}
                                    className="mb-6 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-300"
                                >
                                    Ajouter une nouvelle image
                                </button>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {editableContent.showcaseImages?.map((imageUrl, index) => (
                                        <div key={index} className="bg-gray-700 p-4 rounded-lg border border-gray-600">
                                            <h3 className="text-xl font-semibold mb-2 text-white">Image {index + 1}</h3>
                                            <InputField
                                                label="URL de l'image"
                                                value={imageUrl || ''}
                                                onChange={(e) => handleShowcaseImageChange(index, e.target.value)}
                                            />
                                            <img src={imageUrl} alt={`Image vitrine ${index + 1}`} className="w-full h-32 object-cover rounded-md mt-2" onError={(e) => {e.target.onerror = null; e.target.src="https://placehold.co/120x80/FF0000/FFFFFF?text=Erreur";}} />
                                            <button
                                                onClick={() => handleRemoveShowcaseImage(index)}
                                                className="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300"
                                            >
                                                Supprimer cette image
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            <div className="flex justify-center mt-10 space-x-4">
                                <button
                                    onClick={handleSave}
                                    className="px-8 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition duration-300"
                                >
                                    Sauvegarder les modifications
                                </button>
                                <button
                                    onClick={onLogout}
                                    className="px-8 py-3 bg-gray-600 text-white font-bold rounded-lg hover:bg-gray-700 transition duration-300"
                                >
                                    D√©connexion
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        {/* Composant principal de l'application */}
        const App = () => {
            const [currentPage, setCurrentPage] = useState('accueil');
            const [db, setDb] = useState(null);
            const [auth, setAuth] = useState(null);
            const [userId, setUserId] = useState(null);
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [adminId, setAdminId] = useState('');
            const [siteContent, setSiteContent] = useState({
                heroSection: {
                    title: "Lib√©rez la Puissance. Red√©finissez la Performance.",
                    subtitle: "Chez BRMOTORSPORT, nous transformons votre passion pour l'automobile en une exp√©rience de conduite in√©gal√©e."
                },
                serviceCards: [
                    { id: 1, title: "Diagnostic et entretien m√©canique complet", description: "Pr√©cision et fiabilit√© pour la long√©vit√© de votre v√©hicule." },
                    { id: 2, title: "Reprogrammation moteur (Stage 1, 2, 3, etc.)", description: "Lib√©rez le plein potentiel de votre moteur en toute s√©curit√©." },
                    { id: 3, title: "Optimisation des performances moteur", description: "Une puissance sur mesure, adapt√©e √† nos exigences et votre style." },
                    { id: 4, title: "Solutions personnalis√©es", description: "Chaque voiture est unique, chaque solution l'est aussi. Sur mesure pour vous." },
                ],
                trustCards: [
                    { id: 1, title: "Plus de 10 ans d‚Äôexp√©rience terrain", description: "Un savoir-faire √©prouv√©, b√¢ti sur des ann√©es de pratique et de passion." },
                    { id: 2, title: "Une approche personnalis√©e et professionnelle", description: "Votre satisfaction est notre priorit√©, avec un service √† votre √©coute." },
                    { id: 3, title: "Une expertise reconnue en performance moteur", description: "Le moteur n'a plus de secret pour nous. Ma√Ætrise et innovation au service de votre v√©hicule." },
                    { id: 4, title: "Un service de proximit√©, fiable et √† l‚Äô√©coute", description: "Votre partenaire automobile de confiance, toujours disponible pour vos besoins." },
                ],
                teamSection: {
                    title: "Faites confiance √† une √©quipe de passionn√©s qui ma√Ætrisent leur art",
                    description: "R√©my Bruyant, notre expert automobile d√©di√© √† la performance et √† la qualit√©. Chez BRMOTORSPORT, la passion du moteur est notre moteur, assurant des r√©sultats qui d√©passent vos attentes.",
                    imageUrl: "https://placehold.co/150x150/000/FFF?text=Remy",
                    imageAlt: "Portrait de R√©my Bruyant"
                },
                blogPosts: [
                  { id: 1, image: "IMG_9611.png", title: "Porsche Cayenne V8 Bi-Turbo : Optimisation Moteur", description: "D√©couvrez notre travail sur cette b√™te de course, avec des am√©liorations de performances significatives pour une exp√©rience de conduite ultime." },
                  { id: 2, image: "IMG_9609.png", title: "BMW S√©rie 2 : Reprogrammation et FAP OFF", description: "Optimisation de la BMW S√©rie 2 avec suppression du FAP et reprogrammation moteur pour une performance accrue et une meilleure r√©activit√©." },
                  { id: 3, image: "IMG_9607.png", title: "VW Golf GTI : Boost de Performance Ultime", description: "La Golf GTI a retrouv√© sa jeunesse avec une augmentation de puissance notable. Un v√©ritable plaisir de conduite red√©couvert !" },
                  { id: 4, image: "IMG_9608.png", title: "Seat Ibiza : Am√©lioration de la R√©activit√© Moteur", description: "Transformation de cette Seat Ibiza pour une meilleure r√©ponse √† l'acc√©l√©ration et √† une conduite plus dynamique. Un plaisir garanti." },
                  { id: 5, image: "IMG_9610.png", title: "VW Golf 5 GTI : Mise √† Jour Cartographie", description: "Une mise √† Jour compl√®te de la cartographie pour cette Golf 5 GTI, optimisant la puissance et la consommation. Plus performante que jamais !" },
                  { id: 6, image: "Photopeugeot.png", title: "Peugeot 206 1.4 HDi : Pr√©paration Compl√®te et Optimisation", description: "Rien n'a √©t√© laiss√© au hasard sur cette magnifique 206 1.4 hdi : m√©canique (embrayage renforc√©, turbo 1.6hdi v2, graissage renforc√©, EGR off, filtre √† carburant modifi√©, collecteur d'√©chappement modifi√©, reprogrammation sur mesure, admission sur mesure, d√©gazage haut moteur r√©aspir√©, ligne tube 51mm, boost contr√¥leur avec r√©glage optimum), ch√¢ssis (d√©crantage train arri√®re, combin√©s KW, jantes alu 16, r√©flexion train roulant √† neuf), esth√©tique (passage de coque en blanc, peinture banquette couleur carrosserie, b√©quet 206 Rc, peinture blanche jantes, int√©rieur complet 206 Rc, clignotant lat√©ral led)." },
                  { id: 7, image: "Seat1.png", title: "Seat Leon : Optimisation Moteur Stage 2 (2.0 TDI 170 @230)", description: "D√©couvrez l'optimisation de cette Seat Leon : FAP off, EGR off, et Reprogrammation Stage 2 pour des performances accrues, passant de 170 √† 230 chevaux et un couple de 370 √† 450 Nm." },
                  { id: 8, image: "anciennevoiture.png", title: "Ancienne Voiture : D√©pannage Express et Remplacement Bobine", description: "Tomb√©e en panne un dimanche, nous avons diagnostiqu√© et r√©solu le probl√®me en 1h. Notre client a pu repartir avec sa voiture, gr√¢ce √† une recherche de panne efficace et le remplacement de la bobine. Votre tranquillit√©, notre priorit√©." },
                  { id: 9, image: "audi1.png", title: "Audi 1.5 TFSI 150 : Optimisation Stage 1 et TCU", description: "Optimisation de cette Audi 1.5 TFSI, avec un passage de 150 √† 180 chevaux (Stage 1) et une modification de l'unit√© de contr√¥le de la transmission (TCU mod 1) pour une meilleure r√©activit√©." },
                  { id: 10, image: "gx.png", title: "Triumph TR3 : Check-up Complet et Optimisation", description: "R√©alisation d'un check-up complet sur cette Triumph TR3, assurant son bon fonctionnement et sa fiabilit√©. Votre s√©curit√© et performance sont notre priorit√©." },
                  { id: 11, image: "mercedes2021.png", title: "Mercedes (2021) : Solution ADBLUE", description: "Mise en place d'une solution AdBlue pour ce mod√®le Mercedes 2021, garantissant la conformit√© environnementale et le bon fonctionnement du syst√®me." }
                ],
                showcaseImages: [
                    `Photo1.png`, `photo2.png`, `photo3.png`, `photo4.png`, `photo5.png`,
                    `photo6.png`, `photo7.png`, `photo8.png`, `photo9.png`, `photo10.png`
                ],
                showcaseSection: {
                    title: "Notre Voiture Vitrine : Le Projet Scirocco R",
                    subtitle: "D√©couvrez en d√©tail la pr√©paration ultime de notre Volkswagen Scirocco R, un chef-d'≈ìuvre de performance et d'ing√©nierie. Cliquez sur les images pour les voir en grand !",
                    preparationText: "Ce projet sur le Volkswagen Scirocco R a √©t√© une d√©monstration de notre expertise en performance automobile. Chaque composant a √©t√© soigneusement s√©lectionn√© et optimis√© pour atteindre un niveau de puissance et de fiabilit√© exceptionnel. Voici les d√©tails de la pr√©paration :",
                    preparationList: [
                        { key: "Piston ITG", value: "Installation de pistons forg√©s pour une r√©sistance accrue et une meilleure gestion des contraintes." },
                        { key: "Bielles Carillo", value: "Remplacement par des bielles Carillo, offrant l√©g√®ret√© et robustesse pour les hautes performances." },
                        { key: "Soupapes inconel", value: "Utilisation de soupapes en Inconel, un alliage r√©sistant aux temp√©ratures extr√™mes et √† la corrosion." },
                        { key: "ADM (Admission Directe Moteur)", value: "Optimisation de l'admission d'air pour un flux plus direct et un gain de puissance." },
                        { key: "Ressort bar teck", value: "Mise en place de ressorts de soupapes renforc√©s pour √©viter le flottement √† haut r√©gime." },
                        { key: "Viserie ARP 2000", value: "Boulonnerie de haute r√©sistance pour une fixation s√©curis√©e des √©l√©ments critiques du moteur." },
                        { key: "Pompe √† huile", value: "Am√©lioration du syst√®me d'huile avec une pompe √† huile plus performante." },
                        { key: "Turbo GTX", value: "Installation d'un turbocompresseur Garrett GTX pour une augmentation significative de la puissance." },
                        { key: "Wastegate Tial 44 mm", value: "Contr√¥le pr√©cis de la pression du turbo avec une wastegate externe de haute qualit√©." },
                        { key: "Injecteurs Porsche", value: "Mise √† niveau des injecteurs pour fournir le carburant n√©cessaire √† la puissance accrue." },
                        { key: "Pip admission", value: "Optimisation du conduit d'admission pour un flux d'air maximal." },
                        { key: "WMI (Water Methanol Injection)", value: "Syst√®me d'injection eau-m√©thanol pour refroidir l'admission et augmenter la puissance." },
                        { key: "Embrayage 880 nm", value: "Installation d'un embrayage renforc√© capable de supporter un couple moteur de 880 Nm." }
                    ],
                    conclusionText: "Cette pr√©paration compl√®te garantit non seulement une performance √©poustouflante sur piste, mais aussi une fiabilit√© √† toute √©preuve pour un usage sportif."
                },
                contactInfo: {
                    email: "brmotosport003@gmail.com",
                    phone: "06.68.27.88.01",
                    instagramUrl: "https://www.instagram.com/brmotorsport003?igsh=bnB0ZmdjMzF1dnd3"
                },
                legalMentions: {
                    reprogrammingDisclaimer: `La soci√©t√© Brmotorsport, dirig√©e par R√©my Bruyant, sp√©cialis√©e dans la reprogrammation moteur et l‚Äôoptimisation de performances automobiles, informe notre client√®le que toutes les interventions r√©alis√©es sur les calculateurs √©lectroniques (ECU) sont exclusivement destin√©es √† un usage sur circuit ferm√© ou terrain priv√©, sauf mention contraire sp√©cifiant une conformit√© avec la r√©glementation en vigueur.`
                },
                privacyPolicy: {
                    introduction: `Bienvenue sur le site de BRMOTORSPORT. Nous nous engageons √† prot√©ger vos donn√©es personnelles. Cette politique de confidentialit√© vous informe sur la mani√®re dont nous collectons, utilisons et prot√©geons vos informations.`,
                    dataCollection: `Nous collectons des informations lorsque vous utilisez notre formulaire de contact, notamment votre nom, adresse e-mail et num√©ro de t√©l√©phone. Nous pouvons √©galement collecter des donn√©es techniques telles que votre adresse IP et le type de navigateur.`,
                    dataUsage: `Les informations que nous collectons sont utilis√©es pour :`,
                    dataProtection: `Nous mettons en ≈ìuvre diverses mesures de s√©curit√© pour maintenir la s√ªret√© de vos informations personnelles. Vos donn√©es sont stock√©es sur des serveurs s√©curis√©s et accessibles uniquement par un personnel autoris√©.`,
                    yourRights: `Conform√©ment √† la r√©glementation sur la protection des donn√©es (RGPD), vous disposez d'un droit d'acc√®s, de rectification, de suppression, de limitation et d'opposition concernant vos donn√©es personnelles. Pour exercer ces droits, veuillez nous contacter √† brmotosport003@gmail.com.`
                }
            });

            {/* Initialize Firebase and set up auth listener */}
            useEffect(() => {
                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};

                const app = initializeApp(firebaseConfig);
                const firestore = getFirestore(app);
                const firebaseAuth = getAuth(app);

                setDb(firestore);
                setAuth(firebaseAuth);

                {/* Try to sign in with custom token if available, otherwise anonymously */}
                const signInUser = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined') {
                            await signInWithCustomToken(firebaseAuth, __initial_auth_token);
                            console.log("Signed in with custom token.");
                        } else {
                            await signInAnonymously(firebaseAuth);
                            console.log("Signed in anonymously.");
                        }
                    } catch (error) {
                        console.error("Firebase Auth Error:", error);
                    }
                };

                {/* Listen for auth state changes */}
                const unsubscribe = firebaseAuth.onAuthStateChanged(user => {
                    if (user) {
                        setUserId(user.uid);
                    } else {
                        setUserId(null);
                        setIsLoggedIn(false); {/* Log out if auth state changes to no user */}
                    }
                });

                signInUser(); {/* Initiate sign-in */}

                {/* Cleanup subscription on unmount */}
                return () => unsubscribe();
            }, []);

            {/* Generate and store admin ID */}
            useEffect(() => {
                let storedAdminId = localStorage.getItem('brmotorsport_admin_id');
                if (!storedAdminId) {
                    storedAdminId = crypto.randomUUID();
                    localStorage.setItem('brmotorsport_admin_id', storedAdminId);
                }
                setAdminId(storedAdminId);
            }, []);

            {/* Fetch initial site content from Firestore and set up listener */}
            useEffect(() => {
                if (!db || !userId) return; {/* Wait for Firebase to be initialized and user authenticated */}

                {/* CORRECTED: Changed document path to include 'site_configs' collection */}
                const docRef = doc(db, `artifacts/${__app_id}/public/data/site_configs/site_content`);

                const unsubscribe = onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        console.log("Current data:", docSnap.data());
                        setSiteContent(docSnap.data());
                    } else {
                        console.log("No such document! Setting initial content.");
                        {/* If document doesn't exist, create it with initial content */}
                        setDoc(docRef, siteContent)
                            .then(() => console.log("Initial content set in Firestore."))
                            .catch(error => console.error("Error setting initial content:", error));
                    }
                }, (error) => {
                    console.error("Error listening to site_content:", error);
                });

                return () => unsubscribe(); {/* Cleanup listener on unmount */}
            }, [db, userId]); {/* Re-run when db or userId changes */}

            {/* Function to save content to Firestore */}
            const handleSaveContent = async (contentToSave) => {
                if (!db || !userId) {
                    console.error("Firebase not initialized or user not authenticated.");
                    return;
                }
                try {
                    {/* Uses the same corrected docRef as above */}
                    const docRef = doc(db, `artifacts/${__app_id}/public/data/site_configs/site_content`);
                    await setDoc(docRef, contentToSave, { merge: true }); {/* Use merge to avoid overwriting entire document */}
                    console.log("Document successfully written!");
                } catch (error) {
                    console.error("Error writing document:", error);
                    throw error; {/* Re-throw to be caught by AdminPanel component */}
                }
            };

            const handleLogin = () => {
                setIsLoggedIn(true);
                setCurrentPage('admin'); {/* Redirect to admin page after login */}
            };

            const handleLogout = () => {
                setIsLoggedIn(false);
                setCurrentPage('accueil'); {/* Redirect to home page after logout */}
                auth?.signOut().then(() => console.log("User signed out."));
            };

            {/* Ajout d'un effet pour faire d√©filer la page vers le haut √† chaque changement de page */}
            useEffect(() => {
                window.scrollTo(0, 0); {/* Fait d√©filer la fen√™tre √† la position 0, 0 (en haut √† gauche) */}
            }, [currentPage]); {/* Se d√©clenche √† chaque fois que `currentPage` change */}


            {/* Fonction de rendu du contenu de la page en fonction de l'√©tat */}
            const renderPage = () => {
              if (!siteContent) return <div className="min-h-screen flex items-center justify-center bg-black text-white text-2xl">Chargement du contenu du site...</div>;

              switch (currentPage) {
                case 'accueil':
                  return <HomePage setCurrentPage={setCurrentPage} siteContent={siteContent} />;
                case 'blog':
                  return <BlogPage siteContent={siteContent} />;
                case 'qui-sommes-nous':
                  return <AboutUsPage siteContent={siteContent} />;
                case 'contact':
                  return <ContactPage siteContent={siteContent} />;
                case 'mentions-legales':
                  return <LegalMentionsPage siteContent={siteContent} />;
                case 'confidentialite':
                  return <PrivacyPolicyPage siteContent={siteContent} />;
                case 'voiture-vitrine':
                  return <ShowcaseCarPage siteContent={siteContent} />;
                case 'admin':
                  return isLoggedIn ? <AdminPanel siteContent={siteContent} onSaveContent={handleSaveContent} onLogout={handleLogout} /> : <HomePage setCurrentPage={setCurrentPage} siteContent={siteContent} />;
                default:
                  return <HomePage setCurrentPage={setCurrentPage} siteContent={siteContent} />;
              }
            };

            return (
                <div className="min-h-screen font-inter"> {/* CHANGEMENT: Removed bg-black */}
                    <ScrollingBanner /> {/* Nouvelle banni√®re d√©filante */}
                    <Navbar setCurrentPage={setCurrentPage} isLoggedIn={isLoggedIn} />
                    <main className="flex-grow pt-[100px]"> {/* MAINTENU : Ajout de pt-[100px] pour d√©caler le contenu */}
                        {renderPage()}
                    </main>
                    <MusicControl /> {/* Ajout du contr√¥le de musique */}
                    <footer className="bg-gray-900 bg-opacity-90 backdrop-blur-sm text-gray-400 py-6 text-center shadow-inner rounded-t-lg">
                        <div className="container mx-auto px-4">
                            <p>&copy; {new Date().getFullYear()} BRMOTORSPORT. Tous droits r√©serv√©s.</p>
                            <div className="flex justify-center space-x-4 mt-3">
                                <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('confidentialite'); }} className="hover:text-red-500 transition duration-300">Confidentialit√©</a>
                                <span className="text-gray-600">|</span>
                                <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('mentions-legales'); }} className="hover:text-red-500 transition duration-300">Mentions L√©gales</a>
                                {!isLoggedIn && (
                                    <>
                                        <span className="text-gray-600">|</span>
                                        <button
                                            onClick={() => setShowLoginModal(true)}
                                            className="hover:text-red-500 transition duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-md px-2 py-1"
                                        >
                                            Connexion Admin
                                        </button>
                                    </>
                                )}
                            </div>
                            <p className="text-sm mt-2">R√©alis√© avec passion par Viremot Giovanni</p>
                        </div>
                    </footer>
                    <AdminLoginModal
                        isOpen={showLoginModal}
                        onClose={() => setShowLoginModal(false)}
                        onLogin={handleLogin}
                        adminId={adminId}
                    />
                </div>
            );
        };

        {/* Rendu de l'application React dans l'√©l√©ment HTML avec l'ID 'root' */}
        {/* Assurez-vous que le rendu se fait apr√®s le chargement complet de la page */}
        window.onload = function() {
            console.log("window.onload triggered.");
            const container = document.getElementById('root');
            if (container) {
                console.log("Root container found.");
                const root = ReactDOM.createRoot(container);
                root.render(<App />);
                console.log("React App rendered.");
            } else {
                console.error("Root container #root not found!");
            }
        };
    </script>
</body>
</html>
