<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRMOTORSPORT - Performance Automobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Importation des polices Inter et Montserrat */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            /* overflow-x: hidden; /* Déplacé vers #root pour une meilleure portée avec React */
        }
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif; /* Nouvelle police pour les titres */
        }
        /* Keyframes pour les animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% { opacity: 0; transform: scale3d(.3, .3, .3); }
            20% { transform: scale3d(1.1, 1.1, 1.1); }
            40% { transform: scale3d(.9, .9, .9); }
            60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
            80% { transform: scale3d(.97, .97, .97); }
            100% { opacity: 1; transform: scale3d(1, 1, 1); }
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        /* Nouvelle animation pour le défilement de la bannière */
        @keyframes scrollText {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-100%); }
        }
        /* Nouvelle animation pour le titre - Coulissement depuis la gauche */
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        /* Nouvelle animation pour l'effet de vibration (plus douce) */
        @keyframes vibrate {
            0% { transform: translate(0px, 0px); }
            25% { transform: translate(-0.5px, 0.5px); } /* Mouvement réduit */
            50% { transform: translate(0.5px, -0.5px); }
            75% { transform: translate(-0.5px, -0.5px); }
            100% { transform: translate(0px, 0px); }
        }

        .animate-fade-in-down { animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-bounce-in { animation: bounceIn 1s; }
        .animate-blob { animation: blob 7s infinite; }
        .animate-vibrate { animation: vibrate 0.15s ease-in-out infinite; } /* Vitesse ajustée à 0.15s */
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        /* Style pour l'animation de défilement */
        .scrolling-banner-text {
            display: inline-block;
            white-space: nowrap;
            animation: scrollText 30s linear infinite; /* 30s pour la durée, linear pour un mouvement fluide, infinite pour la répétition */
        }
        /* Pour assurer que le texte déborde et puisse défiler */
        .scrolling-banner-container {
            overflow: hidden;
        }
        /* Application de l'animation de coulissement pour le titre */
        .animate-slide-in-left {
            animation: slideInFromLeft 1s ease-out forwards; /* Durée et type d'animation */
        }

        /* Styles supplémentaires pour des effets visuels */
        h1, h2 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Ombre subtile pour la profondeur */
        }
        /* Utilitaire pour décalage d'animation */
        .delay-animation {
            animation-delay: var(--delay-factor);
        }

        /* Styles spécifiques pour la Lightbox (modale) */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            animation: fadeIn 0.3s ease-out forwards;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 0.75rem;
        }

        .lightbox-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 9999px; /* fully rounded */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
            position: absolute;
            z-index: 101;
        }

        .lightbox-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .lightbox-close-button {
            top: 1rem;
            right: 1rem;
        }

        .lightbox-prev-button {
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .lightbox-next-button {
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Styles pour le bouton de retour en haut */
        .scroll-to-top {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .scroll-to-top.hidden {
            animation: fadeOut 0.5s ease-out forwards;
            opacity: 0;
            pointer-events: none;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Styles pour la navbar dynamique */
        .navbar-hidden {
            transform: translateY(-100%);
        }
        .navbar-visible {
            transform: translateY(0);
        }
        .navbar-transition {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen bg-black font-inter">
    <audio id="background-music" autoplay loop volume="0.01" style="display:none;">
        <source src="musique.mp3" type="audio/mpeg"> Votre navigateur ne supporte pas l'élément audio.
    </audio>

    <div id="root" class="overflow-x-hidden"></div>

    <script type="text/babel">
        // Récupère les hooks React depuis l'objet global React
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // --- Icônes Lucide React ---
        // Composant d'icône de voiture
        const CarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-car">
            <path d="M19 17H5c-1.1 0-2 .9-2 2v2h18v-2c0-1.1-.9-2-2-2Z"/><path d="M7 17V5h12v12"/><path d="M18 10h-8"/><path d="M10 10v7"/>
          </svg>
        );

        // Composant d'icône de poignée de main
        const HandshakeIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucude-handshake">
            <path d="M12.23 20.73a4.7 4.7 0 0 0 6.64-6.64L12.23 7.07l-2.06 2.06"/><path d="M16 16l-3.23 3.23a4.7 4.7 0 0 1-6.64-6.64L9.07 7.07l2.06 2.06"/><path d="M14 10l-2.06 2.06"/><path d="m10 14 2.06-2.06"/>
          </svg>
        );

        // Composant d'icône de clé à molette
        const WrenchIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-wrench">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 [Circular Object]"/>
            <path d="M5.5 12.5l-3-3L12.5 2.5l3 3z"/>
          </svg>
        );

        // Composant d'icône de calendrier
        const CalendarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-calendar-days">
            <path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/>
          </svg>
        );

        // Composant d'icône d'utilisateurs
        const UsersIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-users">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87L16 16"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        );

        // Composant d'icône RSS
        const RssIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rss">
            <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
          </svg>
        );

        // Composant d'icône de téléphone
        const PhoneIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-phone">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-3.07-8.63A2 2 2 0 0 1 4.11 2H7c.43 0 .79.27.94.66.14.39.07.82-.2 1.1L5.05 6.05c-.35.35-.5.85-.34 1.34A19.79 19.79 0 0 0 16.92 19c.49.16.99.01 1.34-.34l2.29-2.29c.28-.27.71-.34 1.1-.2.39.14.66.5.66.94Z"/>
          </svg>
        );

        // Composant d'icône de mail
        const MailIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-mail">
              <rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
        );

        // Composant d'icône Instagram
        const InstagramIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-instagram">
              <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.5" y1="6.5" y2="6.5"/>
            </svg>
        );

        // Composant d'icône Play
        const PlayIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-play">
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        // Composant d'icône Pause
        const PauseIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-pause">
                <rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/>
            </svg>
        );

        // Composant d'icône Étoile
        const StarIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-star">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        // Composant d'icône Flèche Gauche
        const ArrowLeftIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-left">
                <path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>
            </svg>
        );

        // Composant d'icône Flèche Droite
        const ArrowRightIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-right">
                <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
            </svg>
        );

        // Composant d'icône X (fermer)
        const XIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-x">
                <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
        );

        // Composant d'icône de localisation
        const MapPinIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-map-pin">
                <path d="M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"/><path d="M21 10c0 7-9 12-9 12s-9-5-9-12a9 9 0 0 1 18 0z"/>
            </svg>
        );

        // Composant d'icône de flèche vers le haut
        const ArrowUpIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-up">
                <path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>
            </svg>
        );


        // --- Contexte pour le contenu modifiable ---
        const ContentContext = createContext();

        // Fonction utilitaire pour définir une propriété imbriquée par un chemin (similaire à lodash.set)
        const setNestedProperty = (obj, path, value) => {
            const pathParts = path.split('.');
            let current = obj;
            for (let i = 0; i < pathParts.length; i++) {
                const part = pathParts[i];
                const isLastPart = (i === pathParts.length - 1);
                // Vérifie si la partie est un index numérique (pour les tableaux)
                const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;

                if (isLastPart) {
                    // C'est la dernière partie du chemin, définissez la valeur
                    current[isArrayIndex ? parseInt(part) : part] = value;
                } else {
                    // Si ce n'est pas la dernière partie, naviguez plus profondément
                    if (!current[part]) {
                        // Crée un nouvel objet ou tableau si nécessaire pour continuer le chemin
                        current[part] = (
                            pathParts[i + 1] &&
                            !isNaN(parseInt(pathParts[i + 1])) &&
                            String(parseInt(pathParts[i + 1])) === pathParts[i + 1]
                        ) ? [] : {};
                    }
                    current = current[part];
                }
            }
        };

        // Fonction utilitaire pour obtenir une propriété imbriquée par un chemin (similaire à lodash.get)
        const getNestedProperty = (obj, pathParts) => {
            let current = obj;
            for (const part of pathParts) {
                // Vérifie si la partie est un index numérique (pour les tableaux)
                const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;
                const key = isArrayIndex ? parseInt(part) : part;

                if (current && typeof current === 'object' && current.hasOwnProperty(key)) {
                    current = current[key];
                } else {
                    // Gérer l'absence de la clé/index
                    return null;
                }
            }
            return current;
        };


        // Composant pour le contenu éditable (EditableText)
        const EditableText = ({ tag: Tag, contentKey, className, isAdminAuthenticated, children }) => {
            const { content, updateContent } = useContext(ContentContext);

            // Fonction utilitaire pour récupérer la valeur du contenu
            const getValue = (obj, pathParts) => {
                let current = obj;
                for (const part of pathParts) {
                    if (current && typeof current === 'object' && current.hasOwnProperty(part)) {
                        current = current[part];
                    } else {
                        return `[Contenu manquant: ${contentKey}]`;
                    }
                }
                return current;
            };

            const textValue = content ? getValue(content, contentKey.split('.')) : `Chargement...`;

            // Gérer le changement du texte (seulement si isAdminAuthenticated)
            const handleChange = (e) => {
                const newValue = e.target.value;
                updateContent(contentKey, newValue); // Appelle la fonction de mise à jour du contexte
            };

            if (isAdminAuthenticated) {
                // Si c'est un h1 ou h2, utiliser un input, sinon un textarea
                if (Tag === 'h1' || Tag === 'h2') {
                    return (
                        <input
                            type="text"
                            value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                            onChange={handleChange}
                            className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full`}
                        />
                    );
                }
                return (
                    <textarea
                        value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                        onChange={handleChange}
                        rows={(Tag === 'p' && typeof textValue === 'string') ? Math.max(3, textValue.split('\n').length) : 5}
                        className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full resize-none`}
                    />
                );
            }

            // Rendu normal en mode non-admin ou si le contenu n'est pas chargé
            return <Tag className={className}>{children || textValue}</Tag>;
        };

        // Composant pour les images éditables (EditableImage)
        const EditableImage = ({ contentKey, className, isAdminAuthenticated, alt, defaultSrc }) => {
            const { content, updateContent } = useContext(ContentContext);

            // Fonction utilitaire pour récupérer la valeur de l'URL
            const imageUrl = getNestedProperty(content, contentKey.split('.')) || defaultSrc;

            // Gérer le changement de l'URL de l'image (simulé par un champ texte pour l'URL)
            const handleChange = (e) => {
                updateContent(contentKey, e.target.value);
            };

            if (isAdminAuthenticated) {
                return (
                    <div className="relative group">
                        <img src={imageUrl || defaultSrc} alt={alt} className={`${className} object-cover w-full h-full rounded-xl`} />
                        <div className="absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 p-4">
                            <label className="text-white text-sm mb-2">URL de l'image :</label>
                            <input
                                type="text"
                                value={imageUrl || ''}
                                onChange={handleChange}
                                className="w-full text-black p-1 rounded text-sm"
                                placeholder="Coller l'URL de l'image ici"
                            />
                        </div>
                    </div>
                );
            }

            // Rendu normal en mode non-admin
            return (
                <img src={imageUrl || defaultSrc} alt={alt} className={className} />
            );
        };


        // Composant pour l'icône de lecture/pause de la musique
        const MusicToggle = ({ musicVolume, setMusicVolume }) => {
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);

            useEffect(() => {
                audioRef.current = document.getElementById('background-music');

                // Tenter de démarrer la lecture si le volume est > 0 et que l'audio n'est pas déjà en cours
                const tryPlay = () => {
                    if (audioRef.current && musicVolume > 0 && audioRef.current.paused) {
                        // Mettre le volume à jour avant de jouer
                        audioRef.current.volume = musicVolume;
                        audioRef.current.play().then(() => {
                            setIsPlaying(true);
                        }).catch(error => {
                            console.log("Lecture automatique bloquée. L'utilisateur doit interagir.", error);
                            // Laisser isPlaying à false si la lecture est bloquée
                        });
                    } else if (audioRef.current) {
                        audioRef.current.volume = musicVolume;
                        if (musicVolume === 0) {
                            audioRef.current.pause();
                            setIsPlaying(false);
                        }
                    }
                };

                // Si l'utilisateur a déjà interagi, le navigateur pourrait autoriser un nouveau play()
                // On met en place un écouteur pour reprendre la lecture si le volume est augmenté
                // et si la musique a été mise en pause automatiquement (ex: après la lecture auto bloquée).
                document.addEventListener('click', tryPlay, { once: true }); // Tente de jouer après le premier clic

                tryPlay(); // Tente de jouer au montage

                return () => {
                    document.removeEventListener('click', tryPlay);
                };
            }, [musicVolume]); // Dépendance à musicVolume pour ajuster le volume

            const toggleMusic = () => {
                if (!audioRef.current) return;

                if (isPlaying) {
                    audioRef.current.pause();
                    setIsPlaying(false);
                } else {
                    // Tente de reprendre la lecture avec le volume actuel
                    audioRef.current.volume = musicVolume > 0 ? musicVolume : 0.05; // Utiliser 0.05 par défaut si le volume est à 0 pour indiquer que la lecture est active
                    audioRef.current.play().then(() => {
                        setIsPlaying(true);
                    }).catch(error => {
                        console.error("Erreur de lecture : ", error);
                        // Afficher un message ou une icône d'erreur si la lecture est toujours bloquée
                    });
                }
            };

            const displayVolume = Math.round(musicVolume * 100);

            return (
                <div className="flex items-center space-x-2">
                    <button
                        onClick={toggleMusic}
                        className={`p-2 rounded-full transition duration-300 ease-in-out ${isPlaying ? 'bg-red-600 hover:bg-red-700' : 'bg-gray-700 hover:bg-gray-600'} text-white shadow-lg`}
                        aria-label={isPlaying ? "Mettre la musique en pause" : "Jouer la musique"}
                    >
                        {isPlaying ? <PauseIcon /> : <PlayIcon />}
                    </button>
                    <span className="text-gray-300 text-sm hidden sm:inline">{displayVolume}%</span>
                </div>
            );
        };


        // Composant NavBar
        const NavBar = ({ setCurrentPage, currentPage, isAdminAuthenticated, toggleAdminAuth, musicVolume, setMusicVolume }) => {
            const [isOpen, setIsOpen] = useState(false);
            const [isSticky, setIsSticky] = useState(false);
            const { isNavbarVisible } = useContext(ContentContext); // Utilisation du contexte

            const toggleMenu = () => {
                setIsOpen(!isOpen);
            };

            const handleNavigate = (page) => {
                setCurrentPage(page);
                setIsOpen(false); // Fermer le menu sur mobile après la navigation
            };

            // Fonction pour générer les liens de navigation
            const navLinks = [
                { name: 'Accueil', page: 'home' },
                { name: 'Qui sommes-nous', page: 'about-us' },
                { name: 'Services', page: 'services' },
                { name: 'Réalisations', page: 'showcase' }, // Renommé 'Galerie'
                { name: 'Blog', page: 'blog' },
                // NOUVEAU LIEN AJOUTÉ
                { name: 'Où sommes-nous', page: 'location' }, 
                { name: 'Contact', page: 'contact' },
            ];

            // Effet pour rendre la navbar collante et gérer la visibilité (le CSS gère la transition)
            useEffect(() => {
                const handleScroll = () => {
                    if (window.scrollY > 50) {
                        setIsSticky(true);
                    } else {
                        setIsSticky(false);
                    }
                };

                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return (
                <nav className={`fixed top-0 left-0 w-full z-50 bg-black/90 shadow-2xl backdrop-blur-md navbar-transition ${isNavbarVisible ? 'navbar-visible' : 'navbar-hidden'}`}>
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex items-center justify-between h-20">
                            {/* Logo ou Nom de la marque avec animation */}
                            <a href="#" onClick={(e) => { e.preventDefault(); handleNavigate('home'); }} className="flex items-center space-x-3">
                                <div className="text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-widest drop-shadow-lg opacity-0 animate-slide-in-left">
                                    {/* Ajusté pour mobile */}
                                    <span className="text-red-500">BR</span>
                                    <span className="text-white">MOTOR</span>
                                    {/* Titre classique sans icône pour SPORT */}
                                    <span className="text-blue-500">SPORT</span>
                                </div>
                            </a>
                            
                            {/* Liens de navigation pour desktop */}
                            <div className="hidden md:block">
                                <div className="ml-10 flex items-center space-x-4">
                                    {navLinks.map((link) => (
                                        <a key={link.name}
                                           href={`#${link.page}`}
                                           onClick={(e) => { e.preventDefault(); handleNavigate(link.page); }}
                                           className={`px-3 py-2 rounded-md text-sm font-medium transition duration-300 ease-in-out uppercase tracking-wider ${currentPage === link.page ? 'bg-red-500 text-white shadow-lg' : 'text-gray-300 hover:bg-gray-700 hover:text-red-500'}`}
                                        >
                                            {link.name}
                                        </a>
                                    ))}
                                    {/* Icône de volume et lien Admin/Déconnexion pour desktop */}
                                    <MusicToggle musicVolume={musicVolume} setMusicVolume={setMusicVolume} />
                                    <a href="#" onClick={(e) => { e.preventDefault(); toggleAdminAuth(); }} className={`px-3 py-2 rounded-md text-sm font-medium transition duration-300 ease-in-out uppercase tracking-wider ${isAdminAuthenticated ? 'text-green-400 hover:bg-gray-700' : 'text-gray-400 hover:text-white'}`}>
                                        {isAdminAuthenticated ? 'Admin Déconnexion' : 'Admin'}
                                    </a>
                                </div>
                            </div>

                            {/* Icône du menu hamburger pour mobile */}
                            <div className="flex items-center md:hidden space-x-3">
                                <MusicToggle musicVolume={musicVolume} setMusicVolume={setMusicVolume} />
                                <button onClick={toggleMenu} className="text-gray-300 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-lg p-2">
                                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16M4 18h16"}></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Menu mobile */}
                    <div className={`${isOpen ? 'block' : 'hidden'} md:hidden bg-black/95 transition-all duration-300 ease-in-out`}>
                        <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col items-start">
                            {navLinks.map((link) => (
                                <a key={link.name}
                                   href={`#${link.page}`}
                                   onClick={(e) => { e.preventDefault(); handleNavigate(link.page); }}
                                   className={`w-full text-left px-3 py-2 rounded-md text-base font-medium transition duration-300 ease-in-out uppercase tracking-wider ${currentPage === link.page ? 'bg-red-500 text-white shadow-lg' : 'text-gray-300 hover:bg-gray-700 hover:text-red-500'}`}
                                >
                                    {link.name}
                                </a>
                            ))}
                            {/* Lien Admin/Déconnexion pour mobile */}
                            <a href="#" onClick={(e) => { e.preventDefault(); toggleAdminAuth(); setIsOpen(false); }} className={`w-full text-left px-3 py-2 rounded-md text-base font-medium transition duration-300 ease-in-out uppercase tracking-wider ${isAdminAuthenticated ? 'text-green-400 hover:bg-gray-700' : 'text-gray-400 hover:text-white'}`}>
                                {isAdminAuthenticated ? 'Admin Déconnexion' : 'Admin'}
                            </a>
                        </div>
                    </div>
                </nav>
            );
        };

        // --- Composants de Page (Simplifiés pour le contexte) ---

        const HomePage = ({ setCurrentPage, isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            const heroText = getNestedProperty(content, ['home', 'heroTitle']) || "BRMOTORSPORT\nVotre partenaire performance.";
            const heroSubtitle = getNestedProperty(content, ['home', 'heroSubtitle']) || "Reprogrammation moteur, optimisation et maintenance.";

            // Fonction pour découper le texte en lignes pour l'animation
            const renderHeroText = (text) => {
                return text.split('\n').map((line, index) => (
                    <span key={index} style={{ '--delay-factor': `${index * 0.2}s` }} className="block opacity-0 animate-fade-in-up delay-animation">
                        {line}
                    </span>
                ));
            };

            const scrollToElement = (id) => {
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            };
            
            return (
                <main>
                    {/* Section Hero - Bannière principale */}
                    <section className="relative h-screen flex items-center justify-center bg-cover bg-center" style={{ backgroundImage: `url(${getNestedProperty(content, ['home', 'heroImage']) || 'https://via.placeholder.com/1920x1080?text=Image+Hero+BRMOTORSPORT'})` }}>
                        {/* Overlay sombre */}
                        <div className="absolute inset-0 bg-black opacity-60"></div>

                        {/* Contenu principal */}
                        <div className="relative z-10 text-center px-4">
                            <h1 className="text-6xl sm:text-7xl md:text-8xl font-black text-white leading-tight mb-4 drop-shadow-2xl opacity-0 animate-slide-in-left">
                                {renderHeroText(heroText)}
                            </h1>
                            <p className="text-xl sm:text-2xl md:text-3xl text-red-500 font-semibold mb-8 opacity-0 animate-fade-in" style={{ animationDelay: '1s' }}>
                                {renderHeroText(heroSubtitle)}
                            </p>
                            <div className="space-x-4 flex justify-center opacity-0 animate-fade-in" style={{ animationDelay: '1.5s' }}>
                                <button
                                    onClick={() => scrollToElement('contact-section')}
                                    className="px-6 py-3 bg-red-500 text-white text-lg font-bold rounded-lg shadow-xl hover:bg-red-600 transition duration-300 transform hover:scale-105 uppercase tracking-wider"
                                >
                                    Contactez-nous
                                </button>
                                <button
                                    onClick={() => setCurrentPage('services')}
                                    className="px-6 py-3 bg-blue-500 text-white text-lg font-bold rounded-lg shadow-xl hover:bg-blue-600 transition duration-300 transform hover:scale-105 uppercase tracking-wider"
                                >
                                    Nos Services
                                </button>
                            </div>
                        </div>

                        {/* Animation en bas de page (Scroll down) */}
                        <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10 opacity-0 animate-fade-in-up" style={{ animationDelay: '2s' }}>
                            <svg className="w-8 h-8 text-white animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                            </svg>
                        </div>
                    </section>

                    {/* Section Bannière de défilement (Marquee) */}
                    <div className="scrolling-banner-container bg-red-600 py-3 sm:py-4">
                        <div className="scrolling-banner-text text-white text-xl sm:text-2xl font-bold uppercase tracking-widest px-4">
                            {/* Le texte est répété pour assurer la continuité du défilement */}
                            <span className="px-12">Performance Moteur <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Optimisation E85 <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Diagnostic Avancé <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Réparation Électronique <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Service Professionnel <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Performance Moteur <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Optimisation E85 <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Diagnostic Avancé <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Réparation Électronique <StarIcon className="inline w-5 h-5 mb-1" /></span>
                            <span className="px-12">Service Professionnel <StarIcon className="inline w-5 h-5 mb-1" /></span>
                        </div>
                    </div>

                    {/* Section Services - Affichage des 3 principales cartes */}
                    <section id="services-section" className="py-20 bg-gray-900 px-4">
                        <div className="max-w-7xl mx-auto text-center">
                            <h2 className="text-5xl font-extrabold text-white mb-10 animate-fade-in-down">
                                Nos Piliers de Performance
                            </h2>
                            <p className="text-xl text-gray-400 mb-16 animate-fade-in" style={{ animationDelay: '0.3s' }}>
                                Découvrez les services qui propulsent votre véhicule au niveau supérieur.
                            </p>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-10">
                                {/* Carte 1 : Reprogrammation */}
                                <div className="bg-gray-800 p-8 rounded-xl shadow-2xl border-t-4 border-red-500 hover:shadow-red-500/30 transition duration-500 transform hover:scale-[1.02] animate-fade-in-up" style={{ animationDelay: '0.6s' }}>
                                    <WrenchIcon className="w-12 h-12 text-red-500 mb-4 mx-auto animate-vibrate" />
                                    <h3 className="text-2xl font-bold text-white mb-3">Reprogrammation Moteur</h3>
                                    <p className="text-gray-400">
                                        Libérez la puissance cachée de votre moteur. Optimisation sur mesure pour plus de couple, de chevaux et une consommation réduite (stage 1, 2, éthanol E85).
                                    </p>
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('services'); }} className="mt-5 inline-flex items-center text-red-500 font-semibold hover:text-red-400 transition">
                                        En savoir plus <ArrowRightIcon className="ml-2 w-4 h-4" />
                                    </a>
                                </div>
                                {/* Carte 2 : Diagnostic */}
                                <div className="bg-gray-800 p-8 rounded-xl shadow-2xl border-t-4 border-blue-500 hover:shadow-blue-500/30 transition duration-500 transform hover:scale-[1.02] animate-fade-in-up" style={{ animationDelay: '0.8s' }}>
                                    <CarIcon className="w-12 h-12 text-blue-500 mb-4 mx-auto animate-vibrate" />
                                    <h3 className="text-2xl font-bold text-white mb-3">Diagnostic et Réparation</h3>
                                    <p className="text-gray-400">
                                        Diagnostic électronique de précision pour identifier et corriger les pannes. Maîtrise des systèmes complexes pour la longévité de votre véhicule.
                                    </p>
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('services'); }} className="mt-5 inline-flex items-center text-blue-500 font-semibold hover:text-blue-400 transition">
                                        En savoir plus <ArrowRightIcon className="ml-2 w-4 h-4" />
                                    </a>
                                </div>
                                {/* Carte 3 : Conseils/Expertise */}
                                <div className="bg-gray-800 p-8 rounded-xl shadow-2xl border-t-4 border-yellow-500 hover:shadow-yellow-500/30 transition duration-500 transform hover:scale-[1.02] animate-fade-in-up" style={{ animationDelay: '1.0s' }}>
                                    <HandshakeIcon className="w-12 h-12 text-yellow-500 mb-4 mx-auto animate-vibrate" />
                                    <h3 className="text-2xl font-bold text-white mb-3">Conseil et Expertise</h3>
                                    <p className="text-gray-400">
                                        Un accompagnement sur mesure par des experts passionnés. Nous vous guidons dans l'optimisation de votre voiture, du simple entretien au projet complet.
                                    </p>
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('about-us'); }} className="mt-5 inline-flex items-center text-yellow-500 font-semibold hover:text-yellow-400 transition">
                                        En savoir plus <ArrowRightIcon className="ml-2 w-4 h-4" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Section Réalisations (mise en avant) */}
                    <section className="py-20 bg-black px-4">
                        <div className="max-w-7xl mx-auto text-center">
                            <h2 className="text-5xl font-extrabold text-white mb-10 animate-fade-in-down">
                                Nos Réalisations Récentes
                            </h2>
                            <p className="text-xl text-gray-400 mb-16 animate-fade-in" style={{ animationDelay: '0.3s' }}>
                                La preuve de notre expertise. Des véhicules optimisés, des clients satisfaits.
                            </p>
                            
                            {/* Grille des réalisations (utiliser 4 images ici) */}
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 animate-fade-in-up" style={{ animationDelay: '0.6s' }}>
                                {/* Image 1 */}
                                <div className="relative group overflow-hidden rounded-xl shadow-2xl">
                                    <img src={getNestedProperty(content, ['showcase', 'featuredImages', 0]) || 'https://via.placeholder.com/600x400?text=Auto+1'} alt="Réalisation automobile 1" className="w-full h-48 object-cover transition duration-500 group-hover:scale-110"/>
                                    <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-500">
                                        <span className="text-white text-lg font-bold">Voir la galerie</span>
                                    </div>
                                </div>
                                {/* Image 2 */}
                                <div className="relative group overflow-hidden rounded-xl shadow-2xl">
                                    <img src={getNestedProperty(content, ['showcase', 'featuredImages', 1]) || 'https://via.placeholder.com/600x400?text=Auto+2'} alt="Réalisation automobile 2" className="w-full h-48 object-cover transition duration-500 group-hover:scale-110"/>
                                    <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-500">
                                        <span className="text-white text-lg font-bold">Voir la galerie</span>
                                    </div>
                                </div>
                                {/* Image 3 */}
                                <div className="relative group overflow-hidden rounded-xl shadow-2xl">
                                    <img src={getNestedProperty(content, ['showcase', 'featuredImages', 2]) || 'https://via.placeholder.com/600x400?text=Auto+3'} alt="Réalisation automobile 3" className="w-full h-48 object-cover transition duration-500 group-hover:scale-110"/>
                                    <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-500">
                                        <span className="text-white text-lg font-bold">Voir la galerie</span>
                                    </div>
                                </div>
                                {/* Image 4 */}
                                <div className="relative group overflow-hidden rounded-xl shadow-2xl">
                                    <img src={getNestedProperty(content, ['showcase', 'featuredImages', 3]) || 'https://via.placeholder.com/600x400?text=Auto+4'} alt="Réalisation automobile 4" className="w-full h-48 object-cover transition duration-500 group-hover:scale-110"/>
                                    <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-500">
                                        <span className="text-white text-lg font-bold">Voir la galerie</span>
                                    </div>
                                </div>
                            </div>

                            <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('showcase'); }} className="mt-12 inline-block px-8 py-4 bg-red-500 text-white text-xl font-bold rounded-lg shadow-xl hover:bg-red-600 transition duration-300 transform hover:scale-105 uppercase tracking-wider animate-bounce-in">
                                Voir toutes nos réalisations
                            </a>
                        </div>
                    </section>

                    {/* Section Témoignages (simplifiée) */}
                    <section className="py-20 bg-gray-900 px-4">
                        <div className="max-w-7xl mx-auto">
                            <h2 className="text-5xl font-extrabold text-white text-center mb-10 animate-fade-in-down">
                                Ce que disent nos clients
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                {/* Témoignage 1 */}
                                <div className="bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-yellow-500 animate-fade-in-up" style={{ animationDelay: '0.4s' }}>
                                    <p className="italic text-gray-300 mb-4">"Professionnalisme exemplaire ! Mon véhicule a été transformé après l'optimisation E85. Puissance augmentée et économies à la pompe. Je recommande BRMOTORSPORT sans hésiter."</p>
                                    <div className="flex items-center text-yellow-500">
                                        <StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" />
                                        <span className="ml-3 text-white font-semibold">- Julien D.</span>
                                    </div>
                                </div>
                                {/* Témoignage 2 */}
                                <div className="bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-yellow-500 animate-fade-in-up" style={{ animationDelay: '0.6s' }}>
                                    <p className="italic text-gray-300 mb-4">"Service client au top. Ils ont trouvé la panne électronique que les autres garages n'arrivaient pas à détecter. Un vrai savoir-faire technique. Merci à l'équipe !"</p>
                                    <div className="flex items-center text-yellow-500">
                                        <StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" />
                                        <span className="ml-3 text-white font-semibold">- Marie L.</span>
                                    </div>
                                </div>
                                {/* Témoignage 3 */}
                                <div className="bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-yellow-500 animate-fade-in-up" style={{ animationDelay: '0.8s' }}>
                                    <p className="italic text-gray-300 mb-4">"Équipe passionnée et très compétente. J'ai eu de précieux conseils pour l'entretien de ma voiture sport. On sent une vraie expertise et une transparence totale."</p>
                                    <div className="flex items-center text-yellow-500">
                                        <StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" /><StarIcon className="w-5 h-5" />
                                        <span className="ml-3 text-white font-semibold">- Antoine R.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            );
        };

        const AboutUsPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-red-500 mb-4 animate-fade-in-down">
                                <EditableText tag="h1" contentKey="aboutUs.title" isAdminAuthenticated={isAdminAuthenticated}>
                                    {getNestedProperty(content, ['aboutUs', 'title']) || "Notre Passion, Votre Performance"}
                                </EditableText>
                            </h1>
                            <p className="text-xl text-gray-300">
                                <EditableText tag="p" contentKey="aboutUs.subtitle" isAdminAuthenticated={isAdminAuthenticated}>
                                    {getNestedProperty(content, ['aboutUs', 'subtitle']) || "L'expertise au service de votre moteur."}
                                </EditableText>
                            </p>
                        </header>
                        
                        {/* Section Introduction */}
                        <section className="bg-gray-800 p-8 rounded-2xl shadow-2xl mb-12 animate-fade-in" style={{ animationDelay: '0.4s' }}>
                            <h2 className="text-3xl font-bold text-blue-500 mb-4">Notre Histoire</h2>
                            <EditableText tag="p" contentKey="aboutUs.history" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed">
                                {getNestedProperty(content, ['aboutUs', 'history']) || "Depuis sa création, BRMOTORSPORT s'est imposé comme une référence dans l'optimisation et la réparation automobile. Fondée par des passionnés, notre entreprise est née d'une volonté simple : apporter un savoir-faire technique de pointe, une transparence totale et un service client irréprochable. Nous ne faisons pas que modifier des cartographies, nous optimisons des expériences de conduite."}
                            </EditableText>
                        </section>

                        {/* Section Valeurs */}
                        <section className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                            {/* Valeur 1 */}
                            <div className="bg-gray-800 p-6 rounded-xl shadow-lg border-t-4 border-yellow-500 animate-fade-in-up" style={{ animationDelay: '0.6s' }}>
                                <WrenchIcon className="w-10 h-10 text-yellow-500 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">Expertise Technique</h3>
                                <EditableText tag="p" contentKey="aboutUs.values.0" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-400">
                                    {getNestedProperty(content, ['aboutUs', 'values', 0]) || "Nous investissons continuellement dans les dernières technologies de diagnostic et de reprogrammation pour garantir un travail d'une précision maximale."}
                                </EditableText>
                            </div>
                            {/* Valeur 2 */}
                            <div className="bg-gray-800 p-6 rounded-xl shadow-lg border-t-4 border-red-500 animate-fade-in-up" style={{ animationDelay: '0.8s' }}>
                                <HandshakeIcon className="w-10 h-10 text-red-500 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">Transparence et Confiance</h3>
                                <EditableText tag="p" contentKey="aboutUs.values.1" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-400">
                                    {getNestedProperty(content, ['aboutUs', 'values', 1]) || "Chaque intervention est expliquée. Nous travaillons main dans la main avec nos clients pour des résultats qui dépassent leurs attentes, en toute sécurité."}
                                </EditableText>
                            </div>
                            {/* Valeur 3 */}
                            <div className="bg-gray-800 p-6 rounded-xl shadow-lg border-t-4 border-blue-500 animate-fade-in-up" style={{ animationDelay: '1.0s' }}>
                                <CarIcon className="w-10 h-10 text-blue-500 mb-4" />
                                <h3 className="text-xl font-bold text-white mb-2">Passion Automobile</h3>
                                <EditableText tag="p" contentKey="aboutUs.values.2" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-400">
                                    {getNestedProperty(content, ['aboutUs', 'values', 2]) || "Nous partageons la même passion que vous. Chaque voiture traitée est considérée comme un projet unique méritant le plus grand soin."}
                                </EditableText>
                            </div>
                        </section>

                        {/* Section Équipe (à développer si vous avez plusieurs membres) */}
                        <section className="text-center bg-gray-700 p-8 rounded-xl shadow-inner animate-fade-in" style={{ animationDelay: '1.2s' }}>
                            <h2 className="text-3xl font-bold text-red-400 mb-6">Notre Équipe d'Experts</h2>
                            <p className="text-gray-300 italic">
                                Notre équipe est composée de techniciens certifiés et spécialisés en gestion moteur et diagnostic électronique, prêts à relever tous les défis.
                            </p>
                            {/* Vous pouvez ajouter des photos et descriptions individuelles ici si vous le souhaitez. */}
                        </section>
                    </div>
                </div>
            );
        };

        const ServicesPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);

            const servicesList = getNestedProperty(content, ['services', 'list']) || [
                { title: "Reprogrammation Stage 1", icon: WrenchIcon, description: "Optimisation de la cartographie pour augmenter puissance et couple sans modification mécanique. Gain de performance et d'agrément de conduite garanti.", color: "red" },
                { title: "Conversion Éthanol E85", icon: CarIcon, description: "Convertissez votre véhicule au bioéthanol E85 pour réaliser des économies substantielles sur le carburant, tout en préservant la fiabilité du moteur.", color: "blue" },
                { title: "Diagnostic Électronique", icon: WrenchIcon, description: "Recherche de panne avancée et diagnostic précis grâce à des outils professionnels de dernière génération. Identification et résolution des problèmes complexes.", color: "yellow" },
                { title: "Suppression Électronique (FAP/EGR/AdBlue)", icon: CarIcon, description: "Désactivation électronique des systèmes anti-pollution défectueux ou obstrués, dans le respect des réglementations en vigueur (pour un usage sur circuit uniquement).", color: "red" },
                { title: "Reprogrammation Boîte Auto", icon: WrenchIcon, description: "Optimisation des temps de passage, augmentation du couple admissible et amélioration de la réactivité pour une conduite plus sportive et plus fluide.", color: "blue" },
                { title: "Réparation Calculateur Moteur", icon: CarIcon, description: "Service de réparation et clonage des calculateurs moteur (ECU). Solution économique et rapide en cas de défaillance électronique.", color: "yellow" },
            ];

            return (
                <div className="min-h-screen bg-black text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-red-500 mb-4 animate-fade-in-down">
                                <EditableText tag="h1" contentKey="services.title" isAdminAuthenticated={isAdminAuthenticated}>
                                    {getNestedProperty(content, ['services', 'title']) || "Nos Services d'Optimisation Moteur"}
                                </EditableText>
                            </h1>
                            <p className="text-xl text-gray-300">
                                <EditableText tag="p" contentKey="services.subtitle" isAdminAuthenticated={isAdminAuthenticated}>
                                    {getNestedProperty(content, ['services', 'subtitle']) || "L'excellence technique pour la performance et la fiabilité de votre voiture."}
                                </EditableText>
                            </p>
                        </header>

                        <section className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {servicesList.map((service, index) => {
                                const IconComponent = service.icon;
                                const delay = `${0.2 + index * 0.1}s`;
                                const borderColor = `border-${service.color}-500`;
                                const iconColor = `text-${service.color}-500`;

                                return (
                                    <div 
                                        key={index}
                                        className={`bg-gray-900 p-6 rounded-xl shadow-2xl border-t-4 ${borderColor} hover:shadow-xl transition duration-300 transform hover:scale-[1.02] animate-fade-in-up`}
                                        style={{ animationDelay: delay }}
                                    >
                                        <IconComponent className={`w-12 h-12 ${iconColor} mb-4`} />
                                        <h3 className="text-2xl font-bold text-white mb-3">
                                            {service.title}
                                        </h3>
                                        <p className="text-gray-400">
                                            {service.description}
                                        </p>
                                    </div>
                                );
                            })}
                        </section>

                        <section className="mt-16 text-center bg-gray-900 p-8 rounded-xl shadow-2xl border border-gray-700 animate-fade-in" style={{ animationDelay: '1.5s' }}>
                            <h2 className="text-3xl font-bold text-yellow-400 mb-4">Pourquoi choisir BRMOTORSPORT ?</h2>
                            <ul className="text-xl text-gray-300 list-disc list-inside space-y-2 max-w-2xl mx-auto">
                                <li>**Techniciens Certifiés :** Une expertise reconnue dans les dernières technologies moteur.</li>
                                <li>**Équipement de Pointe :** Utilisation d'outils de diagnostic et de programmation de référence.</li>
                                <li>**Garantie Fiabilité :** Nous optimisons sans compromettre la sécurité et la longévité de votre moteur.</li>
                            </ul>
                        </section>
                    </div>
                </div>
            );
        };

        const BlogPage = ({ isAdminAuthenticated, openLightbox }) => {
            const { content, setCurrentPage } = useContext(ContentContext);

            const blogPosts = getNestedProperty(content, ['blog', 'posts']) || [
                { id: 'post-1', title: "Le guide complet de l'éthanol E85", snippet: "Découvrez les avantages, le processus de conversion et les économies réalisées grâce à l'éthanol.", date: "15 Octobre 2025", image: "https://via.placeholder.com/400x250?text=E85+Guide", content: "Contenu détaillé du post 1..." },
                { id: 'post-2', title: "Stage 1 : Mythes et réalités de la reprogrammation", snippet: "Démêlez le vrai du faux sur l'optimisation moteur Stage 1. Augmentation de puissance et sécurité.", date: "01 Octobre 2025", image: "https://via.placeholder.com/400x250?text=Stage+1+Moteur", content: "Contenu détaillé du post 2..." },
                { id: 'post-3', title: "Comment diagnostiquer une panne électronique difficile", snippet: "Nos techniques d'experts pour les diagnostics complexes et les réparations précises.", date: "20 Septembre 2025", image: "https://via.placeholder.com/400x250?text=Diagnostic+Auto", content: "Contenu détaillé du post 3..." },
            ];

            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-blue-500 mb-4 animate-fade-in-down">
                                Le Blog BRMOTORSPORT
                            </h1>
                            <p className="text-xl text-gray-300">
                                Conseils d'experts, actualités techniques et coulisses de l'optimisation automobile.
                            </p>
                        </header>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {blogPosts.map((post, index) => (
                                <div key={post.id} className="bg-gray-800 rounded-xl shadow-2xl overflow-hidden hover:shadow-red-500/40 transition duration-300 transform hover:scale-[1.02] animate-fade-in-up" style={{ animationDelay: `${0.2 + index * 0.15}s` }}>
                                    <EditableImage 
                                        contentKey={`blog.posts.${index}.image`} 
                                        className="w-full h-48 object-cover cursor-pointer" 
                                        isAdminAuthenticated={isAdminAuthenticated} 
                                        alt={post.title} 
                                        defaultSrc={post.image}
                                    />
                                    <div className="p-6">
                                        <span className="text-sm text-gray-500 mb-2 block flex items-center">
                                            <CalendarIcon className="w-4 h-4 mr-2" /> {post.date}
                                        </span>
                                        <h2 className="text-2xl font-bold text-white mb-3 hover:text-red-400 transition cursor-pointer" onClick={() => setCurrentPage(post.id)}>
                                            {post.title}
                                        </h2>
                                        <p className="text-gray-400 mb-4">{post.snippet}</p>
                                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage(post.id); }} className="inline-flex items-center text-red-500 font-semibold hover:text-red-400 transition">
                                            Lire l'article <ArrowRightIcon className="ml-2 w-4 h-4" />
                                        </a>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const BlogPostDetail = ({ post, setCurrentPage, isAdminAuthenticated, openLightbox }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        {/* Bouton retour */}
                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('blog'); }} className="inline-flex items-center text-red-500 hover:text-red-400 transition mb-6 font-semibold">
                            <ArrowLeftIcon className="w-5 h-5 mr-2" /> Retour au Blog
                        </a>

                        <article className="bg-gray-800 p-8 rounded-2xl shadow-2xl animate-fade-in">
                            <h1 className="text-4xl sm:text-5xl font-extrabold text-white mb-4 leading-tight">
                                {post.title}
                            </h1>
                            <div className="flex items-center text-gray-400 mb-6 border-b border-gray-700 pb-4">
                                <CalendarIcon className="w-5 h-5 mr-2" />
                                <span>Publié le {post.date}</span>
                                <span className="ml-4 flex items-center"><UsersIcon className="w-5 h-5 mr-2"/> BRMOTORSPORT</span>
                            </div>

                            {/* Image de l'article */}
                            <img src={post.image} alt={post.title} className="w-full h-auto rounded-xl mb-8 shadow-xl" />

                            {/* Contenu de l'article */}
                            <div className="prose prose-invert max-w-none text-lg leading-relaxed text-gray-300 space-y-6">
                                {post.content.split('\n').map((paragraph, index) => (
                                    <p key={index}>{paragraph}</p>
                                ))}
                            </div>
                        </article>
                    </div>
                </div>
            );
        };

        const ShowcasePage = ({ isAdminAuthenticated, openLightbox }) => {
            const { content } = useContext(ContentContext);

            const allImages = [
                "https://via.placeholder.com/800x600?text=Optimisation+BMW",
                "https://via.placeholder.com/800x600?text=Conversion+E85+Audi",
                "https://via.placeholder.com/800x600?text=Diagnostic+Porsche",
                "https://via.placeholder.com/800x600?text=Stage+2+Golf+R",
                "https://via.placeholder.com/800x600?text=Reparation+ECU+Clio+RS",
                "https://via.placeholder.com/800x600?text=Detailing+Mercedes",
                "https://via.placeholder.com/800x600?text=Voiture+Sport+1",
                "https://via.placeholder.com/800x600?text=Voiture+Sport+2",
                "https://via.placeholder.com/800x600?text=Voiture+Sport+3",
            ];
            
            // Si le contenu a des images de vitrine personnalisées, utilisez-les
            const images = getNestedProperty(content, ['showcase', 'images']) || allImages;

            return (
                <div className="min-h-screen bg-black text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-red-500 mb-4 animate-fade-in-down">
                                Nos Réalisations en Images
                            </h1>
                            <p className="text-xl text-gray-300">
                                Découvrez la qualité et la diversité des projets réalisés par notre atelier.
                            </p>
                        </header>

                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                            {images.map((imageSrc, index) => (
                                <div key={index} className="group relative overflow-hidden rounded-xl shadow-xl animate-fade-in-up" style={{ animationDelay: `${0.2 + index * 0.05}s` }}>
                                    <EditableImage
                                        contentKey={`showcase.images.${index}`}
                                        className="w-full h-48 sm:h-64 object-cover cursor-pointer transition duration-300 group-hover:scale-105"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        alt={`Réalisation ${index + 1}`}
                                        defaultSrc={imageSrc}
                                    />
                                    <div 
                                        className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300 cursor-pointer"
                                        onClick={() => openLightbox(index)}
                                    >
                                        <span className="text-white text-lg font-bold p-2 bg-red-500/80 rounded-full hover:bg-red-500 transition">Aperçu</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const ContactPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            const contactInfo = getNestedProperty(content, ['contact']) || {
                phone: "06 12 34 56 78",
                email: "contact@brmotorsport.fr",
                instagram: "@brmotorsport",
                address: "Zone Industrielle du Coquet, 03260 Saint-Germain-des-Fossés",
            };
            
            return (
                <div id="contact-section" className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-yellow-500 mb-4 animate-fade-in-down">
                                Contactez-nous
                            </h1>
                            <p className="text-xl text-gray-300">
                                Un projet d'optimisation ? Une question technique ? Parlons-en.
                            </p>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            {/* Colonne 1 : Informations de contact */}
                            <div className="lg:col-span-1 bg-gray-800 p-8 rounded-2xl shadow-2xl border-l-4 border-yellow-500 animate-fade-in-up" style={{ animationDelay: '0.4s' }}>
                                <h2 className="text-3xl font-bold text-white mb-6">Informations</h2>
                                <div className="space-y-6 text-lg">
                                    <div className="flex items-center space-x-3">
                                        <PhoneIcon className="w-6 h-6 text-yellow-500 flex-shrink-0" />
                                        <div>
                                            <p className="font-semibold">Téléphone</p>
                                            <a href={`tel:${contactInfo.phone.replace(/\s/g, '')}`} className="text-gray-300 hover:text-red-500 transition">
                                                {contactInfo.phone}
                                            </a>
                                        </div>
                                    </div>
                                    <div className="flex items-center space-x-3">
                                        <MailIcon className="w-6 h-6 text-yellow-500 flex-shrink-0" />
                                        <div>
                                            <p className="font-semibold">Email</p>
                                            <a href={`mailto:${contactInfo.email}`} className="text-gray-300 hover:text-red-500 transition">
                                                {contactInfo.email}
                                            </a>
                                        </div>
                                    </div>
                                    <div className="flex items-center space-x-3">
                                        <InstagramIcon className="w-6 h-6 text-yellow-500 flex-shrink-0" />
                                        <div>
                                            <p className="font-semibold">Instagram</p>
                                            <a href={`https://instagram.com/${contactInfo.instagram.replace('@', '')}`} target="_blank" rel="noopener noreferrer" className="text-gray-300 hover:text-red-500 transition">
                                                {contactInfo.instagram}
                                            </a>
                                        </div>
                                    </div>
                                    <div className="flex items-start space-x-3">
                                        <MapPinIcon className="w-6 h-6 text-yellow-500 flex-shrink-0 mt-1" />
                                        <div>
                                            <p className="font-semibold">Adresse</p>
                                            <p className="text-gray-300">{contactInfo.address}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            {/* Colonne 2 : Formulaire de contact */}
                            <div className="lg:col-span-2 bg-gray-800 p-8 rounded-2xl shadow-2xl border-r-4 border-red-500 animate-fade-in-up" style={{ animationDelay: '0.6s' }}>
                                <h2 className="text-3xl font-bold text-white mb-6">Envoyez-nous un message</h2>
                                <form className="space-y-4">
                                    <div>
                                        <label htmlFor="name" className="block text-sm font-medium text-gray-300">Nom / Société</label>
                                        <input type="text" id="name" name="name" required className="mt-1 block w-full px-4 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-white focus:ring-red-500 focus:border-red-500" />
                                    </div>
                                    <div>
                                        <label htmlFor="email" className="block text-sm font-medium text-gray-300">Email</label>
                                        <input type="email" id="email" name="email" required className="mt-1 block w-full px-4 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-white focus:ring-red-500 focus:border-red-500" />
                                    </div>
                                    <div>
                                        <label htmlFor="subject" className="block text-sm font-medium text-gray-300">Sujet</label>
                                        <input type="text" id="subject" name="subject" required className="mt-1 block w-full px-4 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-white focus:ring-red-500 focus:border-red-500" />
                                    </div>
                                    <div>
                                        <label htmlFor="message" className="block text-sm font-medium text-gray-300">Message</label>
                                        <textarea id="message" name="message" rows="4" required className="mt-1 block w-full px-4 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-white focus:ring-red-500 focus:border-red-500 resize-none"></textarea>
                                    </div>
                                    <button type="submit" className="w-full px-6 py-3 bg-red-500 text-white text-lg font-bold rounded-lg shadow-xl hover:bg-red-600 transition duration-300 transform hover:scale-[1.01] uppercase tracking-wider">
                                        Envoyer le message
                                    </button>
                                </form>
                            </div>
                        </div>

                        {/* Carte (Placeholder) */}
                        <div className="mt-12 bg-gray-700 h-96 w-full rounded-2xl shadow-xl flex items-center justify-center text-gray-400 text-2xl border border-gray-600 animate-fade-in" style={{ animationDelay: '0.8s' }}>
                            Emplacement futur de la carte interactive (Google Maps ou iframe)
                        </div>
                    </div>
                </div>
            );
        };

        // --- NOUVEAU COMPOSANT : Page de Localisation ---
        const LocationPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12">
                    <div className="container mx-auto px-4 max-w-7xl">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-blue-500 mb-4 animate-fade-in-down">
                                Où sommes-nous situé ?
                            </h1>
                            <p className="text-xl text-gray-300">
                                Notre positionnement stratégique au cœur du tissu économique local.
                            </p>
                        </header>

                        <section className="bg-gray-800 p-8 rounded-2xl shadow-2xl border-t-4 border-blue-500 animate-fade-in">
                            <h2 className="text-4xl font-bold mb-6 text-red-500 border-b-2 border-red-500 pb-2 flex items-center">
                                <MapPinIcon className="mr-3"/> Zone Industrielle du Coquet, St Germain des Fossés
                            </h2>
                            
                            {/* Description professionnelle et détaillée */}
                            <div className="space-y-6 text-lg text-gray-300">
                                <p className="leading-relaxed">
                                    BRMOTORSPORT est fier d'être implanté au cœur de la **Zone Industrielle (Z.I.) du Coquet** à Saint-Germain-des-Fossés, un pôle d'activité dynamique et stratégique, idéalement situé dans le bassin de Vichy Communauté.
                                </p>
                                
                                <h3 className="text-2xl font-semibold text-yellow-400 mt-6">Un Emplacement Stratégique pour l'Excellence Automobile :</h3>
                                <ul className="list-disc list-inside space-y-4 ml-4">
                                    <li className="leading-relaxed">
                                        **Accessibilité Optimale :** Notre positionnement est conçu pour servir une clientèle régionale et nationale avec une grande facilité. La Z.I. du Coquet est directement bordée par la **RN 209** (axe Moulins-Paris). Nous nous trouvons à seulement **11 km** de l'échangeur autoroutier **A719** à Bellerive/Allier, assurant une liaison rapide vers les réseaux autoroutiers majeurs (Clermont-Ferrand, Paris).
                                    </li>
                                    <li className="leading-relaxed">
                                        **Proximité Urbaine :** Située à environ **10 km au nord de Vichy**, la zone bénéficie de la vitalité économique de l'agglomération tout en offrant un accès direct et pratique pour le dépôt ou la récupération de votre véhicule.
                                    </li>
                                    <li className="leading-relaxed">
                                        **Un Pôle Économique Reconnu :** La Z.I. du Coquet s'étend sur **45 hectares** et est un carrefour pour une forte représentation de TPE/PME, ce qui témoigne d'un environnement industriel et artisanal solide.
                                    </li>
                                </ul>
                            </div>

                            {/* Partie Adresse et Carte (Placeholder) */}
                            <div className="mt-10 pt-6 border-t border-gray-700">
                                <h3 className="text-2xl font-semibold text-yellow-400 mb-4">Notre Adresse</h3>
                                <p className="text-xl font-mono text-white mb-6">
                                    [**VOTRE ADRESSE PRÉCISE ICI**]<br />
                                    Zone Industrielle du Coquet<br />
                                    03260 Saint-Germain-des-Fossés
                                </p>
                                
                                <div className="bg-gray-700 h-96 w-full rounded-xl flex items-center justify-center text-gray-400 text-2xl border border-gray-600">
                                    Emplacement futur de la carte interactive (Google Maps ou iframe)
                                </div>
                            </div>
                        </section>
                        
                        <p className="text-center text-sm text-gray-500 mt-8">
                            * Notre installation dans ce secteur clé témoigne de notre engagement envers la proximité, l'efficacité logistique, et l'excellence professionnelle.
                        </p>
                    </div>
                </div>
            );
        };

        // --- Pages Mentions Légales et Confidentialité (Simulées) ---

        const LegalNoticesPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-red-500 mb-4">Mentions Légales</h1>
                        </header>
                        <div className="bg-gray-800 p-8 rounded-2xl shadow-2xl space-y-6 text-gray-300">
                            <h2 className="text-2xl font-bold text-white">1. Informations Légales</h2>
                            <p><strong>Nom de l'entreprise :</strong> BRMOTORSPORT</p>
                            <p><strong>Statut juridique :</strong> [À compléter]</p>
                            <p><strong>Adresse du siège social :</strong> Zone Industrielle du Coquet, 03260 Saint-Germain-des-Fossés</p>
                            <p><strong>E-mail :</strong> contact@brmotorsport.fr</p>
                            <p><strong>Téléphone :</strong> 06 12 34 56 78</p>

                            <h2 className="text-2xl font-bold text-white mt-8">2. Hébergement</h2>
                            <p>Nom de l'hébergeur : [À compléter, ex: GitHub Pages, OVH, etc.]</p>
                            <p>Adresse : [À compléter]</p>
                        </div>
                    </div>
                </div>
            );
        };

        const PrivacyPolicyPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-24 pb-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-red-500 mb-4">Politique de Confidentialité</h1>
                        </header>
                        <div className="bg-gray-800 p-8 rounded-2xl shadow-2xl space-y-6 text-gray-300">
                            <h2 className="text-2xl font-bold text-white">Collecte des Données Personnelles</h2>
                            <p>Les informations recueillies via les formulaires de contact sont enregistrées dans un fichier informatisé par BRMOTORSPORT pour la gestion de la relation client.</p>
                            
                            <h2 className="text-2xl font-bold text-white mt-8">Droits de l'Utilisateur</h2>
                            <p>Conformément à la loi « informatique et libertés » et au RGPD, vous pouvez exercer votre droit d'accès, de rectification et d'opposition aux données vous concernant en contactant : contact@brmotorsport.fr.</p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Composants d'Administration (Simulés) ---

        const AdminLoginPage = ({ handleLogin }) => {
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                // Simuler une vérification de mot de passe simple
                if (password === 'AdminBR') {
                    handleLogin();
                } else {
                    setError('Mot de passe incorrect.');
                }
            };

            return (
                <div className="min-h-screen bg-black text-white flex items-center justify-center pt-20">
                    <div className="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-down">
                        <h1 className="text-3xl font-bold text-red-500 mb-6 text-center">Connexion Admin</h1>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label htmlFor="password" className="block text-sm font-medium text-gray-300">Mot de passe</label>
                                <input
                                    type="password"
                                    id="password"
                                    value={password}
                                    onChange={(e) => { setPassword(e.target.value); setError(''); }}
                                    className="mt-1 block w-full px-4 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-white focus:ring-red-500 focus:border-red-500"
                                    required
                                />
                            </div>
                            {error && <p className="text-red-400 text-sm">{error}</p>}
                            <button type="submit" className="w-full px-4 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 transition">
                                Se connecter
                            </button>
                            <p className="text-xs text-gray-500 text-center mt-4">Astuce : Le mot de passe de démonstration est "AdminBR"</p>
                        </form>
                    </div>
                </div>
            );
        };

        const AdminPanelPage = ({ handleLogout }) => {
            const { content, updateContent, saveContent } = useContext(ContentContext);

            const [notification, setNotification] = useState('');

            const handleSave = () => {
                saveContent();
                setNotification('Contenu sauvegardé avec succès !');
                setTimeout(() => setNotification(''), 3000);
            };

            // Fonction pour générer la structure d'affichage du contenu pour l'édition
            const renderContentEditor = (data, path = []) => {
                if (typeof data === 'string') {
                    const contentKey = path.join('.');
                    // Rendu d'un textarea pour l'édition
                    return (
                        <div className="mb-4 p-3 bg-gray-700 rounded-lg">
                            <label className="block text-sm font-medium text-gray-300 mb-1">{path[path.length - 1]} ({contentKey})</label>
                            <textarea
                                value={data}
                                onChange={(e) => updateContent(contentKey, e.target.value)}
                                rows={Math.min(10, Math.max(3, data.split('\n').length))} // Ajuste les lignes
                                className="w-full p-2 border border-gray-600 rounded-md bg-gray-600 text-white focus:ring-red-500 focus:border-red-500 resize-none"
                            />
                        </div>
                    );
                }

                if (Array.isArray(data)) {
                    return (
                        <div className="p-4 border border-gray-600 rounded-lg mt-4 space-y-4 bg-gray-700">
                            <h3 className="text-lg font-semibold text-yellow-400">Section {path[path.length - 1]} (Liste)</h3>
                            {data.map((item, index) => (
                                <div key={index} className="p-3 border-b border-gray-600 last:border-b-0 bg-gray-800 rounded-lg">
                                    <h4 className="font-bold text-white mb-2">Élément {index + 1}</h4>
                                    {renderContentEditor(item, [...path, String(index)])}
                                </div>
                            ))}
                        </div>
                    );
                }

                if (typeof data === 'object' && data !== null) {
                    return (
                        <div className="p-4 border border-gray-600 rounded-lg mt-4 space-y-4 bg-gray-700">
                            <h3 className="text-xl font-bold text-red-400">{path.length > 0 ? `Section ${path[path.length - 1]}` : 'Contenu Global'}</h3>
                            {Object.entries(data).map(([key, value]) => (
                                <div key={key} className="p-2 border-b border-gray-600 last:border-b-0">
                                    {renderContentEditor(value, [...path, key])}
                                </div>
                            ))}
                        </div>
                    );
                }

                return null;
            };

            return (
                <div className="min-h-screen bg-black text-white pt-24 pb-12 px-4">
                    <div className="max-w-7xl mx-auto">
                        <header className="text-center mb-12">
                            <h1 className="text-5xl font-extrabold text-green-400 mb-4 animate-fade-in-down">
                                Panneau d'Administration
                            </h1>
                            <p className="text-xl text-gray-300">
                                Modification du contenu dynamique du site.
                            </p>
                            {notification && (
                                <div className="mt-4 bg-green-500 text-white p-3 rounded-md animate-bounce-in">
                                    {notification}
                                </div>
                            )}
                        </header>

                        <div className="flex justify-center space-x-4 mb-8">
                            <button onClick={handleSave} className="px-6 py-3 bg-green-500 text-white text-lg font-bold rounded-lg shadow-xl hover:bg-green-600 transition duration-300">
                                Sauvegarder les modifications
                            </button>
                            <button onClick={handleLogout} className="px-6 py-3 bg-red-600 text-white text-lg font-bold rounded-lg shadow-xl hover:bg-red-700 transition duration-300">
                                Déconnexion
                            </button>
                        </div>

                        {/* Affiche le contenu actuel pour l'édition */}
                        <div className="bg-gray-800 p-8 rounded-xl shadow-2xl">
                            <h2 className="text-3xl font-bold text-white mb-6 border-b border-gray-700 pb-2">Éditeur de Contenu</h2>
                            {content ? renderContentEditor(content) : <p>Chargement du contenu...</p>}
                        </div>
                    </div>
                </div>
            );
        };


        // --- Lightbox / Modale d'image ---
        const Lightbox = ({ images, currentIndex, closeLightbox, goToPrev, goToNext }) => {
            if (currentIndex === null || images.length === 0) return null;

            return (
                <div className="lightbox-overlay" onClick={closeLightbox}>
                    <div className="lightbox-content" onClick={(e) => e.stopPropagation()}>
                        
                        {/* Image affichée */}
                        <img 
                            src={images[currentIndex]} 
                            alt={`Image ${currentIndex + 1}`} 
                            className="lightbox-image max-h-[85vh] max-w-[85vw]" 
                        />
                        
                        {/* Bouton Fermer */}
                        <button 
                            onClick={closeLightbox} 
                            className="lightbox-button lightbox-close-button"
                            aria-label="Fermer la galerie"
                        >
                            <XIcon />
                        </button>
                        
                        {/* Bouton Précédent */}
                        {currentIndex > 0 && (
                            <button 
                                onClick={(e) => { e.stopPropagation(); goToPrev(); }} 
                                className="lightbox-button lightbox-prev-button hidden sm:flex"
                                aria-label="Image précédente"
                            >
                                <ArrowLeftIcon />
                            </button>
                        )}
                        
                        {/* Bouton Suivant */}
                        {currentIndex < images.length - 1 && (
                            <button 
                                onClick={(e) => { e.stopPropagation(); goToNext(); }} 
                                className="lightbox-button lightbox-next-button hidden sm:flex"
                                aria-label="Image suivante"
                            >
                                <ArrowRightIcon />
                            </button>
                        )}

                        {/* Indicateur de position */}
                        <div className="absolute bottom-4 text-white bg-black/60 px-4 py-2 rounded-full text-sm">
                            {currentIndex + 1} / {images.length}
                        </div>

                    </div>
                </div>
            );
        };


        // --- Composant ScrollToTop ---
        const ScrollToTop = () => {
            const [isVisible, setIsVisible] = useState(false);

            const toggleVisibility = () => {
                if (window.scrollY > 300) {
                    setIsVisible(true);
                } else {
                    setIsVisible(false);
                }
            };

            const scrollToTop = () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth',
                });
            };

            useEffect(() => {
                window.addEventListener('scroll', toggleVisibility);
                return () => window.removeEventListener('scroll', toggleVisibility);
            }, []);

            return (
                <button
                    onClick={scrollToTop}
                    className={`fixed bottom-6 right-6 p-3 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition duration-300 z-40 ${isVisible ? 'scroll-to-top' : 'scroll-to-top hidden'}`}
                    aria-label="Retour en haut"
                >
                    <ArrowUpIcon className="w-6 h-6" />
                </button>
            );
        };


        // --- Composant App (Le composant principal) ---
        const App = () => {
            // État pour la navigation et l'authentification
            const [currentPage, setCurrentPage] = useState('home');
            const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(false);
            const [lastScrollY, setLastScrollY] = useState(0);
            const [isNavbarVisible, setIsNavbarVisible] = useState(true);
            const [musicVolume, setMusicVolume] = useState(0.01); // Volume faible par défaut

            // État pour la Lightbox
            const [lightboxIndex, setLightboxIndex] = useState(null);

            // État et Logique pour le Contenu Dynamique (Simulé par localStorage)
            const defaultContent = {
                home: {
                    heroTitle: "BRMOTORSPORT\nVotre partenaire performance.",
                    heroSubtitle: "Reprogrammation moteur, optimisation et maintenance.",
                    heroImage: "https://via.placeholder.com/1920x1080?text=Image+Hero+BRMOTORSPORT",
                },
                aboutUs: {
                    title: "Notre Passion, Votre Performance",
                    subtitle: "L'expertise au service de votre moteur.",
                    history: "Depuis sa création, BRMOTORSPORT s'est imposé comme une référence dans l'optimisation et la réparation automobile. Fondée par des passionnés, notre entreprise est née d'une volonté simple : apporter un savoir-faire technique de pointe, une transparence totale et un service client irréprochable. Nous ne faisons pas que modifier des cartographies, nous optimisons des expériences de conduite.",
                    values: ["Nous investissons continuellement dans les dernières technologies de diagnostic et de reprogrammation pour garantir un travail d'une précision maximale.", "Chaque intervention est expliquée. Nous travaillons main dans la main avec nos clients pour des résultats qui dépassent leurs attentes, en toute sécurité.", "Nous partageons la même passion que vous. Chaque voiture traitée est considérée comme un projet unique méritant le plus grand soin."],
                },
                services: {
                    title: "Nos Services d'Optimisation Moteur",
                    subtitle: "L'excellence technique pour la performance et la fiabilité de votre voiture.",
                    list: [
                        { title: "Reprogrammation Stage 1", description: "Optimisation de la cartographie pour augmenter puissance et couple sans modification mécanique. Gain de performance et d'agrément de conduite garanti.", color: "red" },
                        { title: "Conversion Éthanol E85", description: "Convertissez votre véhicule au bioéthanol E85 pour réaliser des économies substantielles sur le carburant, tout en préservant la fiabilité du moteur.", color: "blue" },
                        { title: "Diagnostic Électronique", description: "Recherche de panne avancée et diagnostic précis grâce à des outils professionnels de dernière génération. Identification et résolution des problèmes complexes.", color: "yellow" },
                        { title: "Suppression Électronique (FAP/EGR/AdBlue)", description: "Désactivation électronique des systèmes anti-pollution défectueux ou obstrués, dans le respect des réglementations en vigueur (pour un usage sur circuit uniquement).", color: "red" },
                        { title: "Reprogrammation Boîte Auto", description: "Optimisation des temps de passage, augmentation du couple admissible et amélioration de la réactivité pour une conduite plus sportive et plus fluide.", color: "blue" },
                        { title: "Réparation Calculateur Moteur", description: "Service de réparation et clonage des calculateurs moteur (ECU). Solution économique et rapide en cas de défaillance électronique.", color: "yellow" },
                    ],
                },
                showcase: {
                    featuredImages: ["https://via.placeholder.com/600x400?text=Auto+1", "https://via.placeholder.com/600x400?text=Auto+2", "https://via.placeholder.com/600x400?text=Auto+3", "https://via.placeholder.com/600x400?text=Auto+4"],
                    images: [
                        "https://via.placeholder.com/800x600?text=Optimisation+BMW",
                        "https://via.placeholder.com/800x600?text=Conversion+E85+Audi",
                        "https://via.placeholder.com/800x600?text=Diagnostic+Porsche",
                        "https://via.placeholder.com/800x600?text=Stage+2+Golf+R",
                        "https://via.placeholder.com/800x600?text=Reparation+ECU+Clio+RS",
                        "https://via.placeholder.com/800x600?text=Detailing+Mercedes",
                        "https://via.placeholder.com/800x600?text=Voiture+Sport+1",
                        "https://via.placeholder.com/800x600?text=Voiture+Sport+2",
                        "https://via.placeholder.com/800x600?text=Voiture+Sport+3",
                    ],
                },
                blog: {
                    posts: [
                        { id: 'post-1', title: "Le guide complet de l'éthanol E85", snippet: "Découvrez les avantages, le processus de conversion et les économies réalisées grâce à l'éthanol.", date: "15 Octobre 2025", image: "https://via.placeholder.com/400x250?text=E85+Guide", content: "L'éthanol E85 représente une alternative de plus en plus populaire pour les conducteurs soucieux de leur budget et de l'environnement.\n\nLe processus de conversion est rapide et consiste en une reprogrammation du calculateur moteur pour accepter ce carburant. Les gains sont immédiats : économies substantielles et parfois même un léger gain de puissance. Nos experts s'assurent que votre moteur reste fiable après la modification." },
                        { id: 'post-2', title: "Stage 1 : Mythes et réalités de la reprogrammation", snippet: "Démêlez le vrai du faux sur l'optimisation moteur Stage 1. Augmentation de puissance et sécurité.", date: "01 Octobre 2025", image: "https://via.placeholder.com/400x250?text=Stage+1+Moteur", content: "La reprogrammation Stage 1 consiste à optimiser les paramètres du moteur (pression turbo, injection, avance) sans changer les pièces mécaniques.\n\nContrairement aux mythes, une reprogrammation bien réalisée, dans les tolérances constructeur, n'endommage pas le moteur. C'est le secret d'une performance accrue en toute sécurité." },
                        { id: 'post-3', title: "Comment diagnostiquer une panne électronique difficile", snippet: "Nos techniques d'experts pour les diagnostics complexes et les réparations précises.", date: "20 Septembre 2025", image: "https://via.placeholder.com/400x250?text=Diagnostic+Auto", content: "Les pannes électroniques peuvent être les plus frustrantes. Chez BRMOTORSPORT, nous utilisons un processus de diagnostic rigoureux, combinant outils de haute technologie et expertise humaine.\n\nNous ne nous contentons pas d'effacer les codes défauts, nous identifions la cause profonde du problème pour garantir une réparation durable." },
                    ],
                },
                contact: {
                    phone: "06 12 34 56 78",
                    email: "contact@brmotorsport.fr",
                    instagram: "@brmotorsport",
                    address: "Zone Industrielle du Coquet, 03260 Saint-Germain-des-Fossés",
                },
            };

            const [content, setContent] = useState(defaultContent);

            // Chargement initial depuis localStorage
            useEffect(() => {
                const savedContent = localStorage.getItem('brmotorsport_content');
                if (savedContent) {
                    try {
                        setContent(JSON.parse(savedContent));
                    } catch (e) {
                        console.error("Erreur lors du parsing du contenu sauvegardé, utilisation du contenu par défaut.", e);
                        setContent(defaultContent);
                    }
                }
            }, []);

            // Fonction pour mettre à jour une propriété imbriquée
            const updateContent = (path, value) => {
                const newContent = JSON.parse(JSON.stringify(content)); // Copie profonde
                setNestedProperty(newContent, path, value);
                setContent(newContent);
            };

            // Fonction de sauvegarde dans localStorage
            const saveContent = () => {
                localStorage.setItem('brmotorsport_content', JSON.stringify(content));
            };

            // Logique de navigation (masquer la navbar au scroll down)
            useEffect(() => {
                const handleScroll = () => {
                    const currentScrollY = window.scrollY;

                    if (currentScrollY > lastScrollY && currentScrollY > 100) {
                        // Scrolling vers le bas
                        setIsNavbarVisible(false);
                    } else if (currentScrollY < lastScrollY || currentScrollY < 100) {
                        // Scrolling vers le haut ou en haut de page
                        setIsNavbarVisible(true);
                    }
                    setLastScrollY(currentScrollY);
                };

                window.addEventListener('scroll', handleScroll, { passive: true });
                return () => window.removeEventListener('scroll', handleScroll);
            }, [lastScrollY]);


            // Lightbox Handlers
            const openLightbox = (index) => {
                setLightboxIndex(index);
            };

            const closeLightbox = () => {
                setLightboxIndex(null);
            };

            const goToPrev = () => {
                if (lightboxIndex > 0) {
                    setLightboxIndex(lightboxIndex - 1);
                }
            };

            const goToNext = () => {
                const images = getNestedProperty(content, ['showcase', 'images']) || defaultContent.showcase.images;
                if (lightboxIndex < images.length - 1) {
                    setLightboxIndex(lightboxIndex + 1);
                }
            };

            // Gère la navigation au clavier pour la Lightbox
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (lightboxIndex !== null) {
                        if (e.key === 'Escape') closeLightbox();
                        if (e.key === 'ArrowLeft') goToPrev();
                        if (e.key === 'ArrowRight') goToNext();
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [lightboxIndex]);

            // Handlers d'authentification
            const handleLogin = () => {
                setIsAdminAuthenticated(true);
                setCurrentPage('admin-panel');
            };

            const handleLogout = () => {
                setIsAdminAuthenticated(false);
                setCurrentPage('home');
            };

            // Fonction pour rendre le composant de page approprié
            const renderPage = () => {
                if (isAdminAuthenticated && currentPage !== 'admin-panel') {
                    // Si l'admin est connecté mais veut voir une page normale, rediriger vers l'accueil ou le panel.
                    // Pour l'édition, on passe l'état d'authentification aux pages.
                }

                switch (currentPage) {
                    case 'home':
                        return <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'about-us':
                        return <AboutUsPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'services':
                        return <ServicesPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'showcase':
                        return <ShowcasePage isAdminAuthenticated={isAdminAuthenticated} openLightbox={openLightbox} />;
                    case 'blog':
                        return <BlogPage isAdminAuthenticated={isAdminAuthenticated} openLightbox={openLightbox} />;
                    // NOUVEAU CAS POUR LA PAGE LOCALISATION
                    case 'location':
                        return <LocationPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'contact':
                        return <ContactPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'mentions-legales':
                        return <LegalNoticesPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'confidentialite':
                        return <PrivacyPolicyPage isAdminAuthenticated={isAdminAuthenticated} />;
                    case 'admin-login':
                        return <AdminLoginPage handleLogin={handleLogin} />;
                    case 'admin-panel':
                        return <AdminPanelPage handleLogout={handleLogout} />;
                    default:
                        // Si currentPage est un article de blog
                        const blogPost = content.blog.posts.find(p => p.id === currentPage);
                        if (blogPost) {
                            return <BlogPostDetail post={blogPost} setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} openLightbox={openLightbox} />;
                        }
                        // Page par défaut (404 ou accueil)
                        return <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
                }
            };

            const toggleAdminAuth = () => {
                if (isAdminAuthenticated) {
                    handleLogout();
                } else {
                    setCurrentPage('admin-login');
                }
            };

            // Obtient les images pour la Lightbox
            const lightboxImages = getNestedProperty(content, ['showcase', 'images']) || defaultContent.showcase.images;


            return (
                <ContentContext.Provider value={{ content, updateContent, saveContent, isNavbarVisible, setCurrentPage }}>
                    <div className="relative">
                        <NavBar
                            setCurrentPage={setCurrentPage}
                            currentPage={currentPage}
                            isAdminAuthenticated={isAdminAuthenticated}
                            toggleAdminAuth={toggleAdminAuth}
                            musicVolume={musicVolume}
                            setMusicVolume={setMusicVolume}
                        />

                        {/* Rendu de la page actuelle */}
                        {renderPage()}
                        
                        {/* Pied de page */}
                        <footer className="bg-gray-800 text-gray-400 py-8 border-t border-gray-700">
                            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                                <div className="flex justify-center space-x-6 mb-4">
                                    <a href={`tel:${getNestedProperty(content, ['contact', 'phone'])?.replace(/\s/g, '') || ''}`} className="hover:text-red-500 transition duration-300">
                                        <PhoneIcon className="w-6 h-6" />
                                    </a>
                                    <a href={`mailto:${getNestedProperty(content, ['contact', 'email']) || ''}`} className="hover:text-red-500 transition duration-300">
                                        <MailIcon className="w-6 h-6" />
                                    </a>
                                    <a href={`https://instagram.com/${getNestedProperty(content, ['contact', 'instagram'])?.replace('@', '') || ''}`} target="_blank" rel="noopener noreferrer" className="hover:text-red-500 transition duration-300">
                                        <InstagramIcon className="w-6 h-6" />
                                    </a>
                                </div>
                                <p className="text-sm mb-4">
                                    &copy; {new Date().getFullYear()} BRMOTORSPORT. Tous droits réservés.
                                </p>
                                <div className="text-sm space-x-4 flex justify-center flex-wrap">
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('confidentialite'); }} className="hover:text-red-500 transition duration-300">Politique de Confidentialité</a>
                                    <span className="text-gray-600">|</span>
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('mentions-legales'); }} className="hover:text-red-500 transition duration-300">Mentions Légales</a>
                                    <span className="text-gray-600">|</span>
                                    {/* Lien Admin/Déconnexion conditionnel dans le footer */}
                                    {isAdminAuthenticated ? (
                                        <a href="#" onClick={(e) => { e.preventDefault(); handleLogout(); }} className="hover:text-red-500 transition duration-300">Déconnexion</a>
                                    ) : (
                                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('admin-login'); }} className="hover:text-red-500 transition duration-300">Admin</a>
                                    )}
                                </div>
                                <p className="text-sm mt-2">Réalisé avec passion par Viremot Giovanni</p>
                            </div>
                        </footer>
                        
                        {/* Lightbox et ScrollToTop en dehors du footer */}
                        <Lightbox
                            images={lightboxImages}
                            currentIndex={lightboxIndex}
                            closeLightbox={closeLightbox}
                            goToPrev={goToPrev}
                            goToNext={goToNext}
                        />

                        <ScrollToTop />
                    </div>
                </ContentContext.Provider>
            );
        };

        // Rendu de l'application React dans l'élément HTML avec l'ID 'root'
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
