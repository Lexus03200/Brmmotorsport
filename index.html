<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRMOTORSPORT - Performance Automobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Importation des polices Inter et Montserrat */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            /* overflow-x: hidden; /* D√©plac√© vers #root pour une meilleure port√©e avec React */
        }
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif; /* Nouvelle police pour les titres */
        }
        /* Keyframes pour les animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% { opacity: 0; transform: scale3d(.3, .3, .3); }
            20% { transform: scale3d(1.1, 1.1, 1.1); }
            40% { transform: scale3d(.9, .9, .9); }
            60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
            80% { transform: scale3d(.97, .97, .97); }
            100% { opacity: 1; transform: scale3d(1, 1, 1); }
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        /* Nouvelle animation pour le d√©filement de la banni√®re */
        @keyframes scrollText {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-100%); }
        }
        /* Nouvelle animation pour le titre - Coulissement depuis la gauche */
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        /* Nouvelle animation pour l'effet de vibration (plus douce) */
        @keyframes vibrate {
            0% { transform: translate(0px, 0px); }
            25% { transform: translate(-0.5px, 0.5px); } /* Mouvement r√©duit */
            50% { transform: translate(0.5px, -0.5px); }
            75% { transform: translate(-0.5px, -0.5px); }
            100% { transform: translate(0px, 0px); }
        }

        .animate-fade-in-down { animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-bounce-in { animation: bounceIn 1s; }
        .animate-blob { animation: blob 7s infinite; }
        .animate-vibrate { animation: vibrate 0.15s ease-in-out infinite; } /* Vitesse ajust√©e √† 0.15s */
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        /* Style pour l'animation de d√©filement */
        .scrolling-banner-text {
            display: inline-block;
            white-space: nowrap;
            animation: scrollText 30s linear infinite; /* 30s pour la dur√©e, linear pour un mouvement fluide, infinite pour la r√©p√©tition */
        }
        /* Pour assurer que le texte d√©borde et puisse d√©filer */
        .scrolling-banner-container {
            overflow: hidden;
        }
        /* Application de l'animation de coulissement pour le titre */
        .animate-slide-in-left {
            animation: slideInFromLeft 1s ease-out forwards; /* Dur√©e et type d'animation */
        }

        /* Styles suppl√©mentaires pour des effets visuels */
        h1, h2 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Ombre subtile pour la profondeur */
        }
        /* Utilitaire pour d√©calage d'animation */
        .delay-animation {
            animation-delay: var(--delay-factor);
        }

        /* Styles sp√©cifiques pour la Lightbox (modale) */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            animation: fadeIn 0.3s ease-out forwards;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 0.75rem;
        }

        .lightbox-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 9999px; /* fully rounded */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
            position: absolute;
            z-index: 101;
        }

        .lightbox-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .lightbox-close-button {
            top: 1rem;
            right: 1rem;
        }

        .lightbox-prev-button {
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .lightbox-next-button {
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Styles pour le bouton de retour en haut */
        .scroll-to-top {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .scroll-to-top.hidden {
            animation: fadeOut 0.5s ease-out forwards;
            opacity: 0;
            pointer-events: none;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* Styles pour la navbar dynamique */
        .navbar-hidden {
            transform: translateY(-100%);
        }
        .navbar-visible {
            transform: translateY(0);
        }
        .navbar-transition {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen bg-black font-inter">
    <audio id="background-music" autoplay loop volume="0.01" style="display:none;">
        <source src="musique.mp3" type="audio/mpeg"> Votre navigateur ne supporte pas l'√©l√©ment audio.
    </audio>

    <div id="root" class="overflow-x-hidden"></div>

    <script type="text/babel">
        // R√©cup√®re les hooks React depuis l'objet global React
        const { useState, useEffect, useRef, useLayoutEffect, createContext, useContext } = React;

        // --- Ic√¥nes Lucide React ---
        // Composant d'ic√¥ne de voiture
        const CarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-car">
            <path d="M19 17H5c-1.1 0-2 .9-2 2v2h18v-2c0-1.1-.9-2-2-2Z"/><path d="M7 17V5h12v12"/><path d="M18 10h-8"/><path d="M10 10v7"/>
          </svg>
        );

        // Composant d'ic√¥ne de poign√©e de main
        const HandshakeIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucude-handshake">
            <path d="M12.23 20.73a4.7 4.7 0 0 0 6.64-6.64L12.23 7.07l-2.06 2.06"/><path d="M16 16l-3.23 3.23a4.7 4.7 0 0 1-6.64-6.64L9.07 7.07l2.06 2.06"/><path d="M14 10l-2.06 2.06"/><path d="m10 14 2.06-2.06"/>
          </svg>
        );

        // Composant d'ic√¥ne de cl√© √† molette
        const WrenchIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-wrench">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1 7.94-7.94l-3.77 3.77z"/>
            <path d="M5.5 12.5l-3-3L12.5 2.5l3 3z"/>
          </svg>
        );

        // Composant d'ic√¥ne de calendrier
        const CalendarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-calendar-days">
            <path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/>
          </svg>
        );

        // Composant d'ic√¥ne d'utilisateurs
        const UsersIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-users">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87L16 16"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        );

        // Composant d'ic√¥ne RSS
        const RssIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rss">
            <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
          </svg>
        );

        // Composant d'ic√¥ne de t√©l√©phone
        const PhoneIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-phone">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2H7c.43 0 .79.27.94.66.14.39.07.82-.2 1.1L5.05 6.05c-.35.35-.5.85-.34 1.34A19.79 19.79 0 0 0 16.92 19c.49.16.99.01 1.34-.34l2.29-2.29c.28-.27.71-.34 1.1-.2.39.14.66.5.66.94Z"/>
          </svg>
        );

        // Composant d'ic√¥ne de mail
        const MailIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-mail">
              <rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
        );

        // Composant d'ic√¥ne Instagram
        const InstagramIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-instagram">
              <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.5" y1="6.5" y2="6.5"/>
            </svg>
        );

        // Composant d'ic√¥ne Play
        const PlayIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-play">
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        // Composant d'ic√¥ne Pause
        const PauseIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-pause">
                <rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/>
            </svg>
        );

        // Composant d'ic√¥ne √âtoile
        const StarIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-star">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        // Composant d'ic√¥ne Fl√®che Gauche
        const ArrowLeftIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-left">
                <path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>
            </svg>
        );

        // Composant d'ic√¥ne Fl√®che Droite
        const ArrowRightIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-right">
                <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
            </svg>
        );

        // Composant d'ic√¥ne X (fermer)
        const XIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-x">
                <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
        );

        // Composant d'ic√¥ne Plus (Zoom In)
        const PlusIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-plus">
                <path d="M12 5v14"/><path d="M5 12h14"/>
            </svg>
        );

        // Composant d'ic√¥ne Moins (Zoom Out)
        const MinusIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-minus">
                <path d="M5 12h14"/>
            </svg>
        );

        // Composant d'ic√¥ne de cible (Centrer)
        const TargetIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-target">
                <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
            </svg>
        );

        // Composant d'ic√¥ne de rotation (R√©initialiser)
        const RotateCcwIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rotate-ccw">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.79 2.91L3 12H3z"/><path d="M3 3v.01"/>
            </svg>
        );

        // Composant d'ic√¥ne Fl√®che vers le haut
        const ArrowUpIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-up">
                <path d="M12 19V5"/><path d="m5 12 7-7 7 7"/>
            </svg>
        );


        // --- Contexte pour la gestion du contenu √©ditable ---
        const ContentContext = createContext();

        // Fonction utilitaire pour d√©finir une propri√©t√© imbriqu√©e par un chemin (similaire √† lodash.set)
        const setNestedProperty = (obj, path, value) => {
            const pathParts = path.split('.');
            let current = obj;
            for (let i = 0; i < pathParts.length; i++) {
                const part = pathParts[i];
                const isLastPart = (i === pathParts.length - 1);
                // V√©rifie si la partie est un index num√©rique (pour les tableaux)
                const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;

                if (isLastPart) {
                    // C'est la derni√®re partie du chemin, d√©finissez la valeur
                    current[isArrayIndex ? parseInt(part) : part] = value;
                    // console.log(`setNestedProperty: SETTING final value for path part "${part}" to:`, value);
                } else {
                    // Si ce n'est pas la derni√®re partie, naviguez plus profond√©ment
                    if (isArrayIndex) {
                        if (!Array.isArray(current)) {
                            console.warn(`setNestedProperty: Attempted to navigate array index ${part} on non-array:`, current);
                            return obj; // Retourne l'objet original pour √©viter de le corrompre
                        }
                        if (current[parseInt(part)] === undefined || current[parseInt(part)] === null) {
                            current[parseInt(part)] = {}; // Assurez-vous que l'objet √† cet index existe
                            // console.log(`setNestedProperty: Created new object at array index ${part}.`);
                        }
                        current = current[parseInt(part)];
                    } else {
                        if (typeof current[part] !== 'object' || current[part] === null) {
                            current[part] = {}; // Initialise comme objet si ce n'est pas d√©j√† le cas
                            // console.log(`setNestedProperty: Created new object for path part "${part}".`);
                        }
                        current = current[part];
                    }
                    // console.log(`setNestedProperty: Navigated to "${part}". Current nested object:`, current);
                }
            }
            return obj; // Retourne l'objet modifi√©
        };

        // Composant pour l'√©dition de texte in-situ (utilis√© hors du panneau admin pour l'affichage direct)
        const EditableText = ({ tag: Tag, contentKey, isAdminAuthenticated, className }) => {
            const { content, updateContent } = useContext(ContentContext);
            const path = contentKey.split('.'); // Ex: "home.mainTitle" -> ["home", "mainTitle"]

            // Fonction r√©cursive pour acc√©der √† la valeur imbriqu√©e
            const getValue = (obj, p) => {
                let current = obj;
                for (let i = 0; i < p.length; i++) {
                    const part = p[i];
                    const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;

                    if (isArrayIndex) {
                        if (Array.isArray(current) && current[parseInt(part)] !== undefined) {
                            current = current[parseInt(part)];
                        } else {
                            return `[Contenu manquant ou invalide: ${contentKey}]`;
                        }
                    } else {
                        if (current && typeof current === 'object' && current.hasOwnProperty(part)) {
                            current = current[part];
                        } else {
                            return `[Contenu manquant: ${contentKey}]`;
                        }
                    }
                }
                return current;
            };

            const textValue = content ? getValue(content, contentKey.split('.')) : `Chargement...`;


            // G√©rer le changement du texte (seulement si isAdminAuthenticated)
            const handleChange = (e) => {
                const newValue = e.target.value;
                updateContent(contentKey, newValue); // Appelle la fonction de mise √† jour du contexte
            };

            if (isAdminAuthenticated) {
                // Si c'est un h1 ou h2, utiliser un input, sinon un textarea
                if (Tag === 'h1' || Tag === 'h2') {
                    return (
                        <input
                            type="text"
                            value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                            onChange={handleChange}
                            className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full`}
                        />
                    );
                }
                return (
                    <textarea
                        value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                        onChange={handleChange}
                        className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full min-h-[50px]`}
                        rows={typeof textValue === 'string' ? Math.max(3, textValue.split('\n').length) : 3} // Ajuste le nombre de lignes
                    />
                );
            }

            // Rendu normal pour les clients
            // V√©rifie si textValue est une cha√Æne avant de le rendre
            // Utilisation de dangerouslySetInnerHTML pour le rendu HTML
            return <Tag className={className} dangerouslySetInnerHTML={{ __html: typeof textValue === 'string' ? textValue : '' }} />;
        };

        // Composant de la banni√®re d√©filante
        const ScrollingBanner = () => {
            const bannerText = "BRMOTORSPORT ‚Ä¢ VOTRE SATISFACTION EST NOTRE PRIORIT√â ‚Ä¢ "; // Texte √† r√©p√©ter
            const repeatedText = Array(10).fill(bannerText).join(''); // R√©p√©ter le texte plusieurs fois pour l'effet de d√©filement continu

            return (
                <div className="w-full bg-red-700 text-white text-lg font-bold py-2 overflow-hidden whitespace-nowrap fixed top-0 left-0 z-50 shadow-md">
                    <div className="scrolling-banner-container">
                        <span className="scrolling-banner-text">
                            {repeatedText}
                        </span>
                        <span className="scrolling-banner-text" aria-hidden="true">
                            {repeatedText} {/* Une copie pour assurer la continuit√© du d√©filement */}
                        </span>
                    </div>
                </div>
            );
        };

        // Composant de la barre de navigation
        const Navbar = ({ setCurrentPage, isAdminAuthenticated, handleLogout, isVisible }) => {
          const [isOpen, setIsOpen] = useState(false); // √âtat pour la visibilit√© du menu mobile

          const toggleMenu = () => {
            setIsOpen(!isOpen);
          };

          return (
            <nav className={`bg-gray-900 bg-opacity-90 backdrop-blur-sm p-4 fixed w-full z-50 shadow-lg rounded-b-lg top-[40px] navbar-transition ${isVisible ? 'navbar-visible' : 'navbar-hidden'}`}>
              <div className="container mx-auto flex justify-between items-center px-4">
                {/* Titre BRMOTORSPORT avec un style am√©lior√© et des couleurs et l'animation de coulissement */}
                <div className="text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-widest drop-shadow-lg opacity-0 animate-slide-in-left"> {/* Ajust√© pour mobile */}
                  <span className="text-red-500">BR</span>
                  <span className="text-white">MOTOR</span>
                  {/* Titre classique sans ic√¥ne pour SPORT */}
                  <span className="text-blue-500">SPORT</span>
                </div>

                {/* Ic√¥ne du menu hamburger pour mobile */}
                <div className="md:hidden">
                  <button onClick={toggleMenu} className="text-gray-300 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-lg p-2">
                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16M4 18h16"}></path>
                    </svg>
                  </button>
                </div>

                {/* Menu de bureau */}
                <div className="hidden md:flex space-x-8">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} /> {/* Ajout du lien "Voiture Vitrine" */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} />
                  {/* Lien Admin/D√©connexion conditionnel */}
                  {isAdminAuthenticated ? (
                      <NavItem text="D√©connexion" page="accueil" setCurrentPage={setCurrentPage} onClick={handleLogout} />
                  ) : (
                      <NavItem text="Admin" page="admin-login" setCurrentPage={setCurrentPage} />
                  )}
                </div>
              </div>

              {/* Menu coulissant mobile */}
              <div className={`md:hidden absolute top-full left-0 w-full bg-gray-900 bg-opacity-95 backdrop-blur-sm shadow-lg
                             transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} z-40`}>
                <div className="flex flex-col items-center py-4 space-y-4">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} /> {/* Ajout du lien "Voiture Vitrine" pour mobile */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  {/* Lien Admin/D√©connexion conditionnel pour mobile */}
                  {isAdminAuthenticated ? (
                      <NavItem text="D√©connexion" page="accueil" setCurrentPage={setCurrentPage} onClick={() => { handleLogout(); setIsOpen(false); }} />
                  ) : (
                      <NavItem text="Admin" page="admin-login" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  )}
                </div>
              </div>
            </nav>
          );
        };

        // Composant d'√©l√©ment de navigation
        const NavItem = ({ icon, text, page, setCurrentPage, onClick }) => (
          <button
            onClick={() => {
              setCurrentPage(page);
              if (onClick) onClick(); // Appelle onClick pour fermer le menu si fourni
            }}
            className="flex items-center text-gray-300 hover:text-red-500 transition duration-300 ease-in-out transform hover:scale-105
                       px-3 py-2 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"
          >
            {icon && <span className="mr-2 text-xl">{icon}</span>}
            {text}
          </button>
        );

        // Composant du Header (ou la section qui contient l'offre)
        const Header = ({ content, currentPage, setCurrentPage, adminContent }) => {
            const [isSidebarOpen, setIsSidebarOpen] = useState(false);
            const contentRef = useRef(null);

            // Ceci est le hook qui corrige le probl√®me de page blanche (v√©rification if (content))
            useLayoutEffect(() => {
                if (content) { // CORRECTION: Ajouter cette v√©rification pour √©viter l'erreur si 'content' est null
                    const computedStyles = window.getComputedStyle(content);
                    const contentHeight = content.offsetHeight + parseInt(computedStyles.marginBottom);

                    if (contentHeight > 550) {
                        content.style.maxHeight = '550px';
                    }
                }
            }, [content]);

            return (
                <section className="text-center mb-20 bg-gray-800 p-12 rounded-2xl shadow-xl transform transition duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-orange-500/50">
                    <EditableText tag="h2" contentKey="home.offerTitle" isAdminAuthenticated={adminContent} className="text-4xl sm:text-5xl font-extrabold mb-8 text-orange-500 animate-bounce-in" /* Ajust√© pour mobile */ />
                    <EditableText tag="p" contentKey="home.offerSubtitle" isAdminAuthenticated={adminContent} className="text-xl text-gray-300 mb-12 animate-fade-in animation-delay-2000" />
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <OfferCard
                            icon={<CarIcon />}
                            titleKey="home.offer1Title"
                            descriptionKey="home.offer1Description"
                            adminContent={adminContent}
                            style={{ '--delay-factor': '0ms' }}
                        />
                        <OfferCard
                            icon={<WrenchIcon />}
                            titleKey="home.offer2Title"
                            descriptionKey="home.offer2Description"
                            adminContent={adminContent}
                            style={{ '--delay-factor': '150ms' }}
                        />
                        <OfferCard
                            icon={<HandshakeIcon />}
                            titleKey="home.offer3Title"
                            descriptionKey="home.offer3Description"
                            adminContent={adminContent}
                            style={{ '--delay-factor': '300ms' }}
                        />
                        <OfferCard
                            icon={<CalendarIcon />}
                            titleKey="home.offer4Title"
                            descriptionKey="home.offer4Description"
                            adminContent={adminContent}
                            style={{ '--delay-factor': '450ms' }}
                        />
                    </div>
                    <div className="mt-12">
                        <button
                            onClick={() => setCurrentPage('contact')}
                            className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg
                                       transition duration-300 ease-in-out transform hover:scale-110 active:scale-95 animate-fade-in animation-delay-4000
                                       flex items-center justify-center mx-auto"
                        >
                            <PhoneIcon className="mr-2"/> Contactez-nous pour un devis
                        </button>
                    </div>
                </section>
            );
        };

        // Composant Carte d'Offre
        const OfferCard = ({ icon, titleKey, descriptionKey, adminContent, style }) => (
            <div className="group bg-gray-900 p-6 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-red-500 animate-fade-in-up delay-animation" style={style}>
                <div className="text-red-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-red-400">{icon}</div>
                <EditableText tag="h3" contentKey={titleKey} isAdminAuthenticated={adminContent} className="text-xl sm:text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-red-200" /* Ajust√© pour mobile */ />
                <EditableText tag="p" contentKey={descriptionKey} isAdminAuthenticated={adminContent} className="text-gray-300" />
            </div>
        );

        // Composant Pourquoi nous faire confiance
        const TrustSection = ({ isAdminAuthenticated }) => (
            <section className="text-center mb-20">
                <EditableText tag="h2" contentKey="home.trustTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold mb-12 text-blue-500 animate-fade-in-down" /* Ajust√© pour mobile */ />
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <TrustCard
                        titleKey="home.trust1Title"
                        descriptionKey="home.trust1Description"
                        icon="‚è±Ô∏è"
                        isAdminAuthenticated={isAdminAuthenticated}
                        style={{ '--delay-factor': '0ms' }}
                    />
                    <TrustCard
                        titleKey="home.trust2Title"
                        descriptionKey="home.trust2Description"
                        icon="üèÜ"
                        isAdminAuthenticated={isAdminAuthenticated}
                        style={{ '--delay-factor': '150ms' }}
                    />
                    <TrustCard
                        titleKey="home.trust3Title"
                        descriptionKey="home.trust3Description"
                        icon="‚≠ê"
                        isAdminAuthenticated={isAdminAuthenticated}
                        style={{ '--delay-factor': '300ms' }}
                    />
                    <TrustCard
                        titleKey="home.trust4Title"
                        descriptionKey="home.trust4Description"
                        icon="ü§ù"
                        isAdminAuthenticated={isAdminAuthenticated}
                        style={{ '--delay-factor': '450ms' }}
                    />
                </div>
            </section>
        );

        // Composant Carte de Confiance
        const TrustCard = ({ icon, titleKey, descriptionKey, isAdminAuthenticated, style }) => (
            <div className="group bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-blue-500 animate-fade-in-up delay-animation" style={style}>
                <div className="text-blue-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-blue-400">{icon}</div>
                <EditableText tag="h3" contentKey={titleKey} isAdminAuthenticated={isAdminAuthenticated} className="text-xl sm:text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-blue-200" /* Ajust√© pour mobile */ />
                <EditableText tag="p" contentKey={descriptionKey} isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" />
            </div>
        );

        // Nouveau composant Logo pour la page d'accueil
        const Logo = ({ className }) => {
            const imageUrl = "logo.png"; // Correction: Utilisez logo.png
            const fallbackImageUrl = "https://placehold.co/150x150/000/FFF?text=BRMS+Logo"; // Image de remplacement

            return (
                <img
                    src={imageUrl}
                    alt="Logo BRMOTORSPORT"
                    className={className}
                    // G√©rer les erreurs de chargement d'image pour afficher une image de remplacement
                    onError={(e) => { e.target.onerror = null; e.target.src = fallbackImageUrl; }}
                />
            );
        };

        // Composant Page d'Accueil
        const HomePage = ({ setCurrentPage, isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);

            // Ref pour le conteneur de contenu principal (utile si on veut mesurer sa taille)
            const contentRef = useRef(null);
            
            // J'ai v√©rifi√© le code pr√©c√©dent et d√©plac√© la correction ici (m√™me si la correction dans Header r√©sout le probl√®me principal, il vaut mieux le laisser dans la composante qui en a besoin, si n√©cessaire)
            // Laissez ce useLayoutEffect vide ou commentez-le si vous n'avez pas de ref 'content' ici
            // Correction: Si vous n'avez plus besoin de ce hook, supprimez-le, sinon assurez-vous qu'il utilise contentRef.current et non 'content'
            /*
            useLayoutEffect(() => {
                if (contentRef.current) { // Utiliser la Ref du composant pour la mesure
                    const computedStyles = window.getComputedStyle(contentRef.current);
                    const contentHeight = contentRef.current.offsetHeight + parseInt(computedStyles.marginBottom);

                    if (contentHeight > 550) {
                        contentRef.current.style.maxHeight = '550px';
                    }
                }
            }, [contentRef]);
            */

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter relative"> {/* Ajout de 'relative' ici */}
                    {/* Effets visuels de fond (blobs anim√©s) */}
                    <div className="absolute inset-0 opacity-10 pointer-events-none overflow-hidden"> {/* Utilise inset-0 et overflow-hidden */}
                        <div className="absolute w-64 h-64 bg-red-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 top-1/4 left-1/4 animate-blob"></div>
                        <div className="absolute w-96 h-96 bg-blue-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 bottom-1/4 right-1/4 animate-blob animation-delay-2000"></div>
                        <div className="absolute w-72 h-72 bg-orange-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 top-1/3 right-1/4 animate-blob animation-delay-4000"></div>
                    </div>

                    <div className="container mx-auto px-4 relative z-10"> {/* Contenu principal au-dessus des blobs */}
                        {/* Section Introduction / Hero */}
                        <section className="text-center mb-20 pt-10">
                            <Logo className="w-40 h-40 mx-auto mb-6 drop-shadow-lg transform transition duration-500 hover:scale-110" />
                            <EditableText tag="h1" contentKey="home.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-5xl sm:text-7xl font-extrabold mb-4 text-white animate-slide-in-left drop-shadow-lg" /* Ajust√© pour mobile */ />
                            <EditableText tag="p" contentKey="home.tagline" isAdminAuthenticated={isAdminAuthenticated} className="text-2xl sm:text-3xl text-red-400 mb-10 animate-fade-in animation-delay-2000" /* Ajust√© pour mobile */ />
                            <div className="space-x-4 animate-fade-in-up animation-delay-4000">
                                <button
                                    onClick={() => setCurrentPage('blog')}
                                    className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg
                                               transition duration-300 ease-in-out transform hover:scale-110 active:scale-95"
                                >
                                    D√©couvrez notre blog
                                </button>
                                <button
                                    onClick={() => setCurrentPage('voiture-vitrine')}
                                    className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg
                                               transition duration-300 ease-in-out transform hover:scale-110 active:scale-95 mt-4 sm:mt-0"
                                >
                                    D√©couvrez √©galement notre voiture vitrine
                                </button>
                            </div>
                        </section>

                        {/* Section Nos Offres (Header) */}
                        <Header setCurrentPage={setCurrentPage} content={contentRef.current} adminContent={isAdminAuthenticated} />

                        {/* Section Pourquoi nous faire confiance */}
                        <TrustSection isAdminAuthenticated={isAdminAuthenticated} />

                        {/* Section T√©moignages (Non impl√©ment√©e dans le JSON de base, √† ajouter si besoin) */}
                        <section className="text-center mb-12">
                            <EditableText tag="h2" contentKey="home.testimonialTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold mb-12 text-orange-500 animate-fade-in-down" /* Ajust√© pour mobile */ />
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                <TestimonialCard
                                    textKey="home.testimonial1Text"
                                    authorKey="home.testimonial1Author"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    style={{ '--delay-factor': '0ms' }}
                                />
                                <TestimonialCard
                                    textKey="home.testimonial2Text"
                                    authorKey="home.testimonial2Author"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    style={{ '--delay-factor': '150ms' }}
                                />
                                <TestimonialCard
                                    textKey="home.testimonial3Text"
                                    authorKey="home.testimonial3Author"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    style={{ '--delay-factor': '300ms' }}
                                />
                            </div>
                        </section>
                    </div>
                </div>
            );
        };

        // Composant Carte de T√©moignage
        const TestimonialCard = ({ textKey, authorKey, isAdminAuthenticated, style }) => (
            <div className="bg-gray-800 p-6 rounded-xl shadow-xl border-l-4 border-red-500 text-left transform transition duration-300 hover:scale-[1.03] animate-fade-in-up delay-animation" style={style}>
                <div className="text-red-500 text-3xl mb-4">"</div>
                <EditableText tag="p" contentKey={textKey} isAdminAuthenticated={isAdminAuthenticated} className="text-lg italic text-gray-300 mb-4" />
                <div className="text-right">
                    <EditableText tag="p" contentKey={authorKey} isAdminAuthenticated={isAdminAuthenticated} className="font-semibold text-white" />
                </div>
            </div>
        );

        // Composant d'article de blog
        const BlogPostCard = ({ post, style, openLightbox }) => {
            const [currentPreviewImageIndex, setCurrentPreviewImageIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(false); // Diaporama en pause par d√©faut
            const [zoom, setZoom] = useState(1);
            const [pan, setPan] = useState({ x: 0, y: 0 });
            const [isPanDragging, setIsPanDragging] = useState(false);
            const panStart = useRef({ x: 0, y: 0, panX: 0, panY: 0 });
            const imageRef = useRef(null);

            // Gestion du d√©filement automatique
            useEffect(() => {
                let interval;
                if (isPlaying && post.images && post.images.length > 1) {
                    interval = setInterval(() => {
                        setCurrentPreviewImageIndex(prevIndex => (prevIndex + 1) % post.images.length);
                    }, 3000); // Change toutes les 3 secondes
                }
                return () => clearInterval(interval);
            }, [isPlaying, post.images]);

            const togglePreviewPlayPause = (e) => {
                e.stopPropagation(); // Emp√™che l'ouverture du lightbox
                setIsPlaying(prev => !prev);
            };

            const goToPreviousImage = (e) => {
                e.stopPropagation();
                setCurrentPreviewImageIndex(prevIndex => (prevIndex - 1 + post.images.length) % post.images.length);
            };

            const goToNextImage = (e) => {
                e.stopPropagation();
                setCurrentPreviewImageIndex(prevIndex => (prevIndex + 1) % post.images.length);
            };

            // Gestion du zoom et du d√©placement (pan)
            const handleZoom = (amount) => {
                const newZoom = Math.max(1, Math.min(3, zoom + amount));
                setZoom(newZoom);
                // Si on d√©zoome compl√®tement, r√©initialiser le pan
                if (newZoom === 1) {
                    setPan({ x: 0, y: 0 });
                }
            };

            const handlePanStart = (e) => {
                if (zoom > 1) {
                    e.preventDefault();
                    setIsPanDragging(true);
                    panStart.current = {
                        x: e.clientX,
                        y: e.clientY,
                        panX: pan.x,
                        panY: pan.y,
                    };
                }
            };

            const handlePanMove = (e) => {
                if (!isPanDragging || zoom <= 1) return;
                e.preventDefault();

                const dx = e.clientX - panStart.current.x;
                const dy = e.clientY - panStart.current.y;

                const newX = panStart.current.panX + dx;
                const newY = panStart.current.panY + dy;

                // Limiter le d√©placement pour qu'il ne d√©borde pas de l'image (logique simplifi√©e)
                const maxPan = ((zoom - 1) / 2) * 100; // max translation based on zoom level
                const limitedX = Math.max(-maxPan, Math.min(maxPan, newX));
                const limitedY = Math.max(-maxPan, Math.min(maxPan, newY));

                setPan({ x: limitedX, y: limitedY });
            };

            const handlePanEnd = () => {
                setIsPanDragging(false);
            };

            const resetZoomAndPan = () => {
                setZoom(1);
                setPan({ x: 0, y: 0 });
            };

            const handleImageClick = () => {
                if (post.images && post.images.length > 0) {
                    openLightbox(post.images, currentPreviewImageIndex);
                }
            };


            return (
                <div
                    className="group bg-gray-800 p-4 rounded-xl shadow-xl transform transition duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-green-500/50 flex flex-col animate-fade-in-up delay-animation"
                    style={style}
                    onClick={handleImageClick}
                >
                    <div className="relative mb-4 overflow-hidden rounded-lg cursor-pointer aspect-w-4 aspect-h-3" style={{ paddingBottom: '75%' /* Ratio 4:3 */}}>
                        {post.images && post.images.length > 0 ? (
                            <>
                                <img
                                    ref={imageRef}
                                    src={post.images[currentPreviewImageIndex]}
                                    alt={`Image ${currentPreviewImageIndex + 1} de ${post.title}`}
                                    className={`absolute inset-0 w-full h-full object-cover transition-transform duration-500 ${zoom > 1 ? 'z-10' : ''}`}
                                    style={{
                                        transform: `scale(${zoom}) translate(${pan.x}px, ${pan.y}px)`,
                                        cursor: zoom > 1 ? (isPanDragging ? 'grabbing' : 'grab') : 'default',
                                    }}
                                    onMouseDown={handlePanStart} // Always allow pan start if zoom > 1
                                    onMouseMove={handlePanMove}
                                    onMouseUp={handlePanEnd}
                                    onMouseLeave={handlePanEnd}
                                    onError={(e) => { e.target.onerror = null; e.target.src=`https://placehold.co/600x400/000/FFF?text=Image+non+trouv√©e`; }}
                                />
                                {post.images.length > 1 && (
                                    <>
                                        <button onClick={goToPreviousImage} className="absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-80 transition duration-300 focus:outline-none" aria-label="Image pr√©c√©dente" ><ArrowLeftIcon className="w-5 h-5"/></button>
                                        <button onClick={goToNextImage} className="absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-80 transition duration-300 focus:outline-none" aria-label="Image suivante" ><ArrowRightIcon className="w-5 h-5"/></button>
                                        <button onClick={togglePreviewPlayPause} className="absolute bottom-2 left-1/2 -translate-x-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-80 transition duration-300 focus:outline-none" aria-label={isPlaying ? "Mettre en pause le diaporama" : "Lancer le diaporama"} >
                                            {isPlaying ? <PauseIcon className="w-5 h-5"/> : <PlayIcon className="w-5 h-5"/>}
                                        </button>
                                        <div className="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">
                                            {currentPreviewImageIndex + 1} / {post.images.length}
                                        </div>
                                    </>
                                )}
                                {zoom > 1 && (
                                    <div className="absolute top-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded flex space-x-2">
                                        <button onClick={(e) => { e.stopPropagation(); handleZoom(0.2); }} aria-label="Zoomer" className="hover:text-green-400"><PlusIcon className="w-4 h-4" /></button>
                                        <button onClick={(e) => { e.stopPropagation(); handleZoom(-0.2); }} aria-label="D√©zoomer" className="hover:text-red-400"><MinusIcon className="w-4 h-4" /></button>
                                        <button onClick={(e) => { e.stopPropagation(); resetZoomAndPan(); }} aria-label="R√©initialiser la vue" className="hover:text-blue-400"><TargetIcon className="w-4 h-4" /></button>
                                    </div>
                                )}
                            </>
                        ) : (
                            <p className="text-gray-400">Pas d'image √† pr√©visualiser.</p>
                        )}
                    </div>
                    <EditableText tag="h3" contentKey={`blog.posts.${post.id}.title`} isAdminAuthenticated={false} className="text-2xl font-bold text-green-400 mb-2 transition-colors duration-300 group-hover:text-green-200" />
                    <EditableText tag="p" contentKey={`blog.posts.${post.id}.description`} isAdminAuthenticated={false} className="text-gray-300 flex-grow" />
                    {/* Liens pour la navigation (√† masquer si la page est cliquable pour Lightbox ou si on est en admin) */}
                    <div className="mt-4 text-sm text-right">
                        <span className="text-gray-500">Post√© le : {new Date(post.id).toLocaleDateString()}</span>
                    </div>
                </div>
            );
        };


        // Composant Lightbox (visionneuse d'images)
        const Lightbox = ({ images, currentIndex, onClose, onNavigate }) => {
            const [zoom, setZoom] = useState(1);
            const [pan, setPan] = useState({ x: 0, y: 0 });
            const [isPanDragging, setIsPanDragging] = useState(false);
            const panStart = useRef({ x: 0, y: 0, panX: 0, panY: 0 });
            const imageRef = useRef(null);

            useEffect(() => {
                // R√©initialiser le zoom et le pan √† chaque changement d'image
                setZoom(1);
                setPan({ x: 0, y: 0 });
            }, [currentIndex]);

            // Gestion des √©v√©nements clavier pour la navigation et la fermeture
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'Escape') {
                        onClose();
                    } else if (e.key === 'ArrowLeft') {
                        onNavigate('prev');
                    } else if (e.key === 'ArrowRight') {
                        onNavigate('next');
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [onClose, onNavigate]);

            const handleZoom = (amount) => {
                const newZoom = Math.max(1, Math.min(4, zoom + amount)); // Max zoom 4x
                setZoom(newZoom);
                if (newZoom === 1) {
                    setPan({ x: 0, y: 0 });
                }
            };

            const resetZoomAndPan = () => {
                setZoom(1);
                setPan({ x: 0, y: 0 });
            };

            const handlePanStart = (e) => {
                if (zoom > 1) {
                    e.preventDefault();
                    setIsPanDragging(true);
                    panStart.current = {
                        x: e.clientX,
                        y: e.clientY,
                        panX: pan.x,
                        panY: pan.y,
                    };
                }
            };

            const handlePanMove = (e) => {
                if (!isPanDragging || zoom <= 1) return;
                e.preventDefault();

                const dx = e.clientX - panStart.current.x;
                const dy = e.clientY - panStart.current.y;

                // Calcul des limites de d√©placement
                const maxPan = ((zoom - 1) / 2) * 100; // max translation based on zoom level
                
                const newX = panStart.current.panX + dx * (1 / zoom);
                const newY = panStart.current.panY + dy * (1 / zoom);

                // Limiter le d√©placement
                const limitedX = Math.max(-maxPan, Math.min(maxPan, newX));
                const limitedY = Math.max(-maxPan, Math.min(maxPan, newY));

                setPan({ x: limitedX, y: limitedY });
            };

            const handlePanEnd = () => {
                setIsPanDragging(false);
            };

            // Emp√™che la propagation du clic sur l'image pour ne pas fermer la Lightbox
            const handleImageClick = (e) => {
                e.stopPropagation();
            };

            const currentImage = images[currentIndex];

            return (
                <div className="lightbox-overlay" onClick={onClose}>
                    {/* Bouton Fermer */}
                    <button
                        className="lightbox-button lightbox-close-button text-3xl p-3"
                        onClick={onClose}
                        aria-label="Fermer la visionneuse"
                    >
                        <XIcon className="w-8 h-8"/>
                    </button>

                    <div className="lightbox-content" onClick={handleImageClick}>
                        {/* Boutons de navigation (si plus d'une image) */}
                        {images.length > 1 && (
                            <>
                                <button
                                    className="lightbox-button lightbox-prev-button text-2xl p-4"
                                    onClick={(e) => { e.stopPropagation(); onNavigate('prev'); }}
                                    aria-label="Image pr√©c√©dente"
                                >
                                    <ArrowLeftIcon className="w-6 h-6"/>
                                </button>
                                <button
                                    className="lightbox-button lightbox-next-button text-2xl p-4"
                                    onClick={(e) => { e.stopPropagation(); onNavigate('next'); }}
                                    aria-label="Image suivante"
                                >
                                    <ArrowRightIcon className="w-6 h-6"/>
                                </button>
                            </>
                        )}

                        {/* Image affich√©e */}
                        <img
                            ref={imageRef}
                            src={currentImage}
                            alt={`Image ${currentIndex + 1} de la galerie`}
                            className="lightbox-image transition-transform duration-300"
                            style={{
                                transform: `scale(${zoom}) translate(${pan.x}px, ${pan.y}px)`,
                                cursor: zoom > 1 ? (isPanDragging ? 'grabbing' : 'grab') : 'zoom-in',
                                maxWidth: '100%',
                                maxHeight: '100%',
                            }}
                            onDoubleClick={() => handleZoom(zoom === 1 ? 1.5 : -0.5)} // Double-clic pour zoomer/d√©zoomer
                            onMouseDown={handlePanStart}
                            onMouseMove={handlePanMove}
                            onMouseUp={handlePanEnd}
                            onMouseLeave={handlePanEnd}
                            onError={(e) => { e.target.onerror = null; e.target.src=`https://placehold.co/800x600/000/FFF?text=Image+non+trouv√©e`; }}
                        />
                        
                        {/* Contr√¥les de Zoom et Pan */}
                        <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 p-3 rounded-full shadow-xl flex space-x-4 text-white z-101">
                            <button
                                onClick={(e) => { e.stopPropagation(); handleZoom(0.25); }}
                                aria-label="Zoomer"
                                className="hover:text-green-400 p-1"
                            >
                                <PlusIcon className="w-6 h-6" />
                            </button>
                            <button
                                onClick={(e) => { e.stopPropagation(); handleZoom(-0.25); }}
                                aria-label="D√©zoomer"
                                className="hover:text-red-400 p-1"
                            >
                                <MinusIcon className="w-6 h-6" />
                            </button>
                            {zoom > 1 && (
                                <button
                                    onClick={(e) => { e.stopPropagation(); resetZoomAndPan(); }}
                                    aria-label="R√©initialiser la vue"
                                    className="hover:text-blue-400 p-1"
                                >
                                    <TargetIcon className="w-6 h-6" />
                                </button>
                            )}
                        </div>

                        {/* Compteur d'image */}
                        <div className="absolute top-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 text-white text-lg px-4 py-2 rounded-full z-101">
                            {currentIndex + 1} / {images.length}
                        </div>
                    </div>
                </div>
            );
        };


        // Composant Page Blog
        const BlogPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            const [isLightboxOpen, setIsLightboxOpen] = useState(false);
            const [lightboxImages, setLightboxImages] = useState([]);
            const [currentLightboxImageIndex, setCurrentLightboxImageIndex] = useState(0);

            // Triez les articles par ID (le plus r√©cent en premier)
            const blogPosts = content.blog?.posts?.sort((a, b) => b.id - a.id) || [];

            const openLightbox = (images, index) => {
                setLightboxImages(images);
                setCurrentLightboxImageIndex(index);
                setIsLightboxOpen(true);
            };

            const closeLightbox = () => {
                setIsLightboxOpen(false);
                setLightboxImages([]);
                setCurrentLightboxImageIndex(0);
            };

            const navigateLightbox = (direction) => {
                const total = lightboxImages.length;
                if (total === 0) return;

                setCurrentLightboxImageIndex(prevIndex => {
                    if (direction === 'next') {
                        return (prevIndex + 1) % total;
                    } else if (direction === 'prev') {
                        return (prevIndex - 1 + total) % total;
                    }
                    return prevIndex;
                });
            };

            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="blog.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold text-center mb-12 text-green-400 animate-fade-in-down animate-vibrate" /* Ajust√© pour mobile */ />
                        <EditableText tag="p" contentKey="blog.description" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                            {blogPosts.length > 0 ? (
                                blogPosts.map((post, index) => (
                                    <BlogPostCard
                                        key={post.id || `blog-post-${index}`}
                                        post={post}
                                        style={{ '--delay-factor': `${index * 150}ms` }}
                                        openLightbox={openLightbox} // Pass openLightbox function
                                    />
                                ))
                            ) : (
                                <p className="col-span-full text-center text-gray-400 text-2xl mt-10">
                                    Aucun article de blog √† afficher pour le moment.
                                </p>
                            )}
                        </div>
                    </div>
                    {isLightboxOpen && (
                        <Lightbox
                            images={lightboxImages}
                            currentIndex={currentLightboxImageIndex}
                            onClose={closeLightbox}
                            onNavigate={navigateLightbox}
                        />
                    )}
                </div>
            );
        };


        // Composant Input Field (r√©utilisable)
        const InputField = ({ label, type, placeholder, required = false, value, onChange, name }) => (
            <div>
                <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
                    {label} {required && <span className="text-red-500">*</span>}
                </label>
                <input
                    id={name || label} // Utilise name comme id si fourni
                    type={type}
                    name={name} // Ajout de l'attribut name
                    placeholder={placeholder}
                    required={required}
                    value={value}
                    onChange={onChange}
                    className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                />
            </div>
        );

        // Composant TextArea Field (r√©utilisable)
        const TextAreaField = ({ label, placeholder, required = false, value, onChange, name }) => (
            <div>
                <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
                    {label} {required && <span className="text-red-500">*</span>}
                </label>
                <textarea
                    id={name || label} // Utilise name comme id si fourni
                    name={name} // Ajout de l'attribut name
                    placeholder={placeholder}
                    required={required}
                    value={value}
                    onChange={onChange}
                    rows="4"
                    className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200 resize-y"
                />
            </div>
        );

        // Composant Page Contact
        const ContactPage = () => {
            const { content } = useContext(ContentContext);
            const [formData, setFormData] = useState({ name: '', email: '', subject: '', message: '' });
            const [submissionStatus, setSubmissionStatus] = useState(null); // 'success', 'error', 'submitting', null

            const handleChange = (e) => {
                setFormData({ ...formData, [e.target.name]: e.target.value });
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setSubmissionStatus('submitting');

                // Envoi du formulaire (Simulation ou utilisation d'un service r√©el comme Formspree/Netlify Forms)
                // Dans le contexte de GitHub Pages sans backend, on peut simuler ou utiliser Formspree.
                // Ici, une simple simulation:
                try {
                    // Simuler une requ√™te r√©seau de 2 secondes
                    await new Promise(resolve => setTimeout(resolve, 2000));

                    console.log('Form data submitted:', formData);

                    // Supposons que l'envoi r√©ussisse
                    setSubmissionStatus('success');
                    setFormData({ name: '', email: '', subject: '', message: '' }); // R√©initialiser le formulaire

                } catch (error) {
                    console.error('Erreur de soumission du formulaire:', error);
                    setSubmissionStatus('error');
                }
            };

            const ContactInfoCard = ({ icon, label, valueKey, linkPrefix = '' }) => (
                <div className="bg-gray-800 p-6 rounded-xl shadow-xl flex items-center space-x-4 border border-gray-700 transform transition duration-300 hover:scale-[1.03] hover:border-pink-500 animate-fade-in-up">
                    <div className="text-pink-500 text-4xl">{icon}</div>
                    <div>
                        <h3 className="text-lg font-semibold text-white mb-1">{label}</h3>
                        <EditableText
                            tag="a"
                            contentKey={valueKey}
                            isAdminAuthenticated={false}
                            className="text-gray-300 hover:text-pink-300 transition duration-300"
                            href={linkPrefix + (content.contact[valueKey] || '')}
                            target={linkPrefix ? "_blank" : "_self"} // Ouvre dans un nouvel onglet si c'est un lien externe
                        />
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="contact.mainTitle" isAdminAuthenticated={false} className="text-4xl sm:text-5xl font-extrabold text-center mb-4 text-pink-400 animate-fade-in-down animate-vibrate" /* Ajust√© pour mobile */ />
                        <EditableText tag="p" contentKey="contact.subtitle" isAdminAuthenticated={false} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-10 mb-12">
                            {/* Colonne des informations de contact */}
                            <div className="lg:col-span-1 space-y-6">
                                <ContactInfoCard
                                    icon={<PhoneIcon />}
                                    label="T√©l√©phone"
                                    valueKey="phoneNumber"
                                    linkPrefix="tel:"
                                />
                                <ContactInfoCard
                                    icon={<MailIcon />}
                                    label="E-mail"
                                    valueKey="emailAddress"
                                    linkPrefix="mailto:"
                                />
                                <ContactInfoCard
                                    icon={<InstagramIcon />}
                                    label="Instagram"
                                    valueKey="instagramHandle"
                                    linkPrefix="https://instagram.com/"
                                />
                                <div className="bg-gray-800 p-6 rounded-xl shadow-xl flex items-start space-x-4 border border-gray-700 transform transition duration-300 hover:scale-[1.03] hover:border-pink-500 animate-fade-in-up">
                                    <RssIcon className="text-pink-500 text-4xl mt-1" />
                                    <div>
                                        <h3 className="text-lg font-semibold text-white mb-1">Adresse</h3>
                                        <EditableText tag="p" contentKey="contact.address" isAdminAuthenticated={false} className="text-gray-300 whitespace-pre-line" />
                                    </div>
                                </div>
                            </div>

                            {/* Colonne du formulaire de contact */}
                            <div className="lg:col-span-2 bg-gray-800 p-8 rounded-2xl shadow-2xl border border-gray-700 animate-fade-in">
                                <EditableText tag="h2" contentKey="contact.formTitle" isAdminAuthenticated={false} className="text-3xl font-bold mb-6 text-pink-400 border-b border-gray-700 pb-3" />

                                <form onSubmit={handleSubmit} className="space-y-6">
                                    <InputField
                                        label="Nom Complet"
                                        type="text"
                                        name="name"
                                        placeholder="Votre nom"
                                        required={true}
                                        value={formData.name}
                                        onChange={handleChange}
                                    />
                                    <InputField
                                        label="Adresse E-mail"
                                        type="email"
                                        name="email"
                                        placeholder="votre.email@exemple.com"
                                        required={true}
                                        value={formData.email}
                                        onChange={handleChange}
                                    />
                                    <InputField
                                        label="Sujet"
                                        type="text"
                                        name="subject"
                                        placeholder="Objet de votre message"
                                        required={true}
                                        value={formData.subject}
                                        onChange={handleChange}
                                    />
                                    <TextAreaField
                                        label="Message"
                                        name="message"
                                        placeholder="Votre message d√©taill√©..."
                                        required={true}
                                        value={formData.message}
                                        onChange={handleChange}
                                    />
                                    <button
                                        type="submit"
                                        className="bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed w-full"
                                        disabled={submissionStatus === 'submitting'}
                                    >
                                        {submissionStatus === 'submitting' ? 'Envoi en cours...' : 'Envoyer le Message'}
                                    </button>
                                </form>

                                {submissionStatus === 'success' && (
                                    <p className="mt-4 text-center text-green-400 font-semibold animate-fade-in">
                                        ‚úÖ Votre message a √©t√© envoy√© avec succ√®s ! Nous vous r√©pondrons rapidement.
                                    </p>
                                )}
                                {submissionStatus === 'error' && (
                                    <p className="mt-4 text-center text-red-400 font-semibold animate-fade-in">
                                        ‚ùå Une erreur s'est produite lors de l'envoi. Veuillez r√©essayer ou nous contacter par t√©l√©phone.
                                    </p>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Composant Page Qui Sommes-nous
        const AboutUsPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="aboutUs.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold text-center mb-4 text-yellow-400 animate-fade-in-down animate-vibrate" /* Ajust√© pour mobile */ />
                        <EditableText tag="p" contentKey="aboutUs.subtitle" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />

                        <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 mb-10 animate-fade-in-up">
                            <EditableText tag="h2" contentKey="aboutUs.historyTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl sm:text-4xl font-bold mb-6 text-red-400 text-center" /* Ajust√© pour mobile */ />
                            <EditableText tag="p" contentKey="aboutUs.historyParagraph1" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed mb-6" />
                            <EditableText tag="p" contentKey="aboutUs.historyParagraph2" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                        </section>

                        <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up">
                            <EditableText tag="h2" contentKey="aboutUs.valuesTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl sm:text-4xl font-bold mb-6 text-yellow-300 text-center" /* Ajust√© pour mobile */ />
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <ValueCard
                                    titleKey="aboutUs.value1Title"
                                    descriptionKey="aboutUs.value1Description"
                                    icon={<WrenchIcon />}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value2Title"
                                    descriptionKey="aboutUs.value2Description"
                                    icon={<span className="text-3xl">‚ú®</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value3Title"
                                    descriptionKey="aboutUs.value3Description"
                                    icon={<span className="text-3xl">‚úÖ</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value4Title"
                                    descriptionKey="aboutUs.value4Description"
                                    icon={<span className="text-3xl">‚ù§Ô∏è</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                            </div>
                        </section>
                    </div>
                </div>
            );
        };

        // Composant Carte de Valeur
        const ValueCard = ({ icon, titleKey, descriptionKey, isAdminAuthenticated }) => (
            <div className="bg-gray-700 p-6 rounded-xl shadow-lg border-l-4 border-yellow-500 flex flex-col items-center text-center transform transition duration-300 hover:scale-[1.03] hover:bg-gray-600">
                <div className="text-yellow-400 text-5xl mb-3">{icon}</div>
                <EditableText tag="h3" contentKey={titleKey} isAdminAuthenticated={isAdminAuthenticated} className="text-xl font-semibold mb-2 text-white" />
                <EditableText tag="p" contentKey={descriptionKey} isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" />
            </div>
        );

        // Composant Page Mentions L√©gales
        const LegalMentionsPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="legalMentions.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold text-center mb-4 text-teal-400 animate-fade-in-down animate-vibrate" /* Ajust√© pour mobile */ />
                        <EditableText tag="p" contentKey="legalMentions.subtitle" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-2xl border border-gray-700 space-y-8 animate-fade-in">
                            {/* Section √âditeur du site */}
                            <section>
                                <EditableText tag="h2" contentKey="legalMentions.editorTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-teal-300 border-b border-gray-700 pb-2" />
                                <ul className="text-lg text-gray-300 list-disc list-inside space-y-2 ml-4">
                                    <li><EditableText tag="span" contentKey="legalMentions.list1Item1" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                    <li><EditableText tag="span" contentKey="legalMentions.list1Item2" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                    <li><EditableText tag="span" contentKey="legalMentions.list1Item3" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                </ul>
                            </section>

                            {/* Section H√©bergement */}
                            <section>
                                <EditableText tag="h2" contentKey="legalMentions.hostingTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-teal-300 border-b border-gray-700 pb-2" />
                                <ul className="text-lg text-gray-300 list-disc list-inside space-y-2 ml-4">
                                    <li><EditableText tag="span" contentKey="legalMentions.list2Item1" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                    <li><EditableText tag="span" contentKey="legalMentions.list2Item2" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                    <li><EditableText tag="span" contentKey="legalMentions.list2Item3" isAdminAuthenticated={isAdminAuthenticated} className="text-gray-300" /></li>
                                </ul>
                            </section>

                            {/* Conditions G√©n√©rales d'Utilisation */}
                            <section>
                                <EditableText tag="h2" contentKey="legalMentions.cguTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-teal-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="legalMentions.cguText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>

                            {/* Responsabilit√© */}
                            <section>
                                <EditableText tag="h2" contentKey="legalMentions.liabilityTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-teal-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="legalMentions.liabilityText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>
                        </div>
                    </div>
                </div>
            );
        };

        // Composant Page Politique de Confidentialit√©
        const PrivacyPolicyPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="privacyPolicy.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold text-center mb-4 text-purple-400 animate-fade-in-down animate-vibrate" /* Ajust√© pour mobile */ />
                        <EditableText tag="p" contentKey="privacyPolicy.subtitle" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-2xl border border-gray-700 space-y-8 animate-fade-in">
                            {/* Section Donn√©es Collect√©es */}
                            <section>
                                <EditableText tag="h2" contentKey="privacyPolicy.dataTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-purple-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="privacyPolicy.dataText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>

                            {/* Section Utilisation des Donn√©es */}
                            <section>
                                <EditableText tag="h2" contentKey="privacyPolicy.usageTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-purple-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="privacyPolicy.usageText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>

                            {/* Section Partage des Donn√©es */}
                            <section>
                                <EditableText tag="h2" contentKey="privacyPolicy.sharingTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-purple-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="privacyPolicy.sharingText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>

                            {/* Section Vos Droits */}
                            <section>
                                <EditableText tag="h2" contentKey="privacyPolicy.rightsTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-purple-300 border-b border-gray-700 pb-2" />
                                <EditableText tag="p" contentKey="privacyPolicy.rightsText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                                {/* Assurez-vous que ce champ existe et est une cha√Æne de caract√®res dans content.json */}
                                <EditableText tag="p" contentKey="privacyPolicy.disclaimerText" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 leading-relaxed" />
                            </section>
                        </div>
                    </div>
                </div>
            );
        };

        // Composant pour la page Voiture Vitrine
        const ShowcaseCarPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            const images = [
                `Photo1.png`,
                `photo2.png`,
                `photo3.png`,
                `photo4.png`,
                `photo5.png`,
                `photo6.png`,
                `photo7.png`,
                `photo8.png`,
                `photo9.png`,
                `photo10.png`
            ];
            const [currentImageIndex, setCurrentImageIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(true); // Auto-play by default

            // Lightbox state
            const [isLightboxOpen, setIsLightboxOpen] = useState(false);
            const [lightboxImages, setLightboxImages] = useState(images); // Utiliser toutes les images pour la Lightbox
            const [currentLightboxImageIndex, setCurrentLightboxImageIndex] = useState(0);

            // G√®re le diaporama
            useEffect(() => {
                let interval;
                if (isPlaying) {
                    interval = setInterval(() => {
                        setCurrentImageIndex(prevIndex => (prevIndex + 1) % images.length);
                    }, 4000); // Change toutes les 4 secondes
                }
                return () => clearInterval(interval);
            }, [isPlaying, images.length]);

            const goToPreviousImage = () => {
                setCurrentImageIndex(prevIndex => (prevIndex - 1 + images.length) % images.length);
            };

            const goToNextImage = () => {
                setCurrentImageIndex(prevIndex => (prevIndex + 1) % images.length);
            };

            const togglePlayPause = () => {
                setIsPlaying(prev => !prev);
            };

            const openLightbox = (index) => {
                setCurrentLightboxImageIndex(index);
                setIsLightboxOpen(true);
            };

            const closeLightbox = () => {
                setIsLightboxOpen(false);
            };

            const navigateLightbox = (direction) => {
                const total = lightboxImages.length;
                if (total === 0) return;

                setCurrentLightboxImageIndex(prevIndex => {
                    if (direction === 'next') {
                        return (prevIndex + 1) % total;
                    } else if (direction === 'prev') {
                        return (prevIndex - 1 + total) % total;
                    }
                    return prevIndex;
                });
            };

            // Composant pour une ligne de d√©tail de pr√©paration
            const DetailItem = ({ labelKey, valueKey }) => (
                <div className="flex justify-between border-b border-gray-700 py-2">
                    <span className="font-semibold text-gray-300">{content.showcaseCar[labelKey]}:</span>
                    <EditableText tag="span" contentKey={`showcaseCar.${valueKey}`} isAdminAuthenticated={isAdminAuthenticated} className="text-red-400 font-medium" />
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <EditableText tag="h1" contentKey="showcaseCar.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-4xl sm:text-5xl font-extrabold text-center mb-4 text-red-500 animate-fade-in-down animate-vibrate" />
                        <EditableText tag="p" contentKey="showcaseCar.description" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up" />

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-10">
                            {/* Colonne Galerie d'images */}
                            <div className="lg:col-span-2 bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700 animate-fade-in">
                                <h2 className="text-3xl font-bold mb-6 text-red-400 border-b border-gray-700 pb-3">Galerie</h2>
                                <div className="relative rounded-xl overflow-hidden shadow-xl aspect-video mb-4 cursor-pointer" onClick={() => openLightbox(currentImageIndex)}>
                                    <img
                                        src={images[currentImageIndex]}
                                        alt={`Voiture Vitrine ${currentImageIndex + 1}`}
                                        className="w-full h-full object-cover transition-opacity duration-700"
                                        style={{ opacity: 1 }}
                                        onError={(e) => { e.target.onerror = null; e.target.src=`https://placehold.co/800x450/000/FFF?text=Image+${currentImageIndex+1}+non+trouv√©e`; }}
                                    />
                                    {/* Compteur et boutons de navigation/lecture */}
                                    <div className="absolute inset-0 flex items-center justify-between p-4 bg-black bg-opacity-20 transition-opacity opacity-0 hover:opacity-100">
                                        <button onClick={(e) => { e.stopPropagation(); goToPreviousImage(); }} className="bg-red-600 hover:bg-red-700 text-white p-3 rounded-full shadow-lg transition duration-300" aria-label="Image pr√©c√©dente"><ArrowLeftIcon /></button>
                                        <button onClick={(e) => { e.stopPropagation(); goToNextImage(); }} className="bg-red-600 hover:bg-red-700 text-white p-3 rounded-full shadow-lg transition duration-300" aria-label="Image suivante"><ArrowRightIcon /></button>
                                    </div>
                                    <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 text-white text-sm px-4 py-2 rounded-full shadow-lg">
                                        {currentImageIndex + 1} / {images.length}
                                        <button onClick={(e) => { e.stopPropagation(); togglePlayPause(); }} className="ml-4 text-lg hover:text-red-400" aria-label={isPlaying ? "Mettre en pause" : "Jouer"}>
                                            {isPlaying ? <PauseIcon className="w-5 h-5 inline-block align-middle"/> : <PlayIcon className="w-5 h-5 inline-block align-middle"/>}
                                        </button>
                                    </div>
                                    <div className="absolute top-4 right-4 bg-black bg-opacity-70 text-white text-sm px-4 py-2 rounded-full shadow-lg cursor-pointer hover:bg-opacity-90" onClick={(e) => { e.stopPropagation(); openLightbox(currentImageIndex); }}>
                                        <PlusIcon className="w-5 h-5 inline-block align-middle mr-1"/> Zoom
                                    </div>
                                </div>
                                {/* Grille de pr√©visualisation */}
                                <div className="grid grid-cols-5 gap-3">
                                    {images.map((image, index) => (
                                        <img
                                            key={index}
                                            src={image}
                                            alt={`Miniature ${index + 1}`}
                                            className={`w-full h-auto object-cover rounded-lg cursor-pointer transition duration-300 border-2 ${index === currentImageIndex ? 'border-red-500 transform scale-105' : 'border-gray-700 hover:border-red-300'}`}
                                            onClick={() => setCurrentImageIndex(index)}
                                            onError={(e) => { e.target.onerror = null; e.target.src=`https://placehold.co/100x75/000/FFF?text=Img`; }}
                                        />
                                    ))}
                                </div>
                            </div>

                            {/* Colonne D√©tails de la Pr√©paration */}
                            <div className="lg:col-span-1 bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700 animate-fade-in-up">
                                <EditableText tag="h2" contentKey="showcaseCar.preparationTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-3xl font-bold mb-4 text-red-400 border-b border-gray-700 pb-3" />
                                <EditableText tag="p" contentKey="showcaseCar.preparationDescription" isAdminAuthenticated={isAdminAuthenticated} className="text-lg text-gray-300 mb-6" />

                                <div className="space-y-3">
                                    <DetailItem labelKey="pistonLabel" valueKey="piston" />
                                    <DetailItem labelKey="biellesLabel" valueKey="bielles" />
                                    <DetailItem labelKey="soupapesLabel" valueKey="soupapes" />
                                    <DetailItem labelKey="admLabel" valueKey="adm" />
                                    <DetailItem labelKey="ressortLabel" valueKey="ressort" />
                                    <DetailItem labelKey="viserieLabel" valueKey="viserie" />
                                    <DetailItem labelKey="pompeHuileLabel" valueKey="pompeHuile" />
                                    <DetailItem labelKey="turboLabel" valueKey="turbo" />
                                    <DetailItem labelKey="wastegateLabel" valueKey="wastegate" />
                                    <DetailItem labelKey="injecteursLabel" valueKey="injecteurs" />
                                    <DetailItem labelKey="pipAdmissionLabel" valueKey="pipAdmission" />
                                    <DetailItem labelKey="wmiLabel" valueKey="wmi" />
                                    <DetailItem labelKey="embrayageLabel" valueKey="embrayage" />
                                </div>

                                <EditableText tag="p" contentKey="showcaseCar.finalDescription" isAdminAuthenticated={isAdminAuthenticated} className="text-sm italic text-gray-500 mt-6 pt-4 border-t border-gray-700" />
                            </div>
                        </div>
                    </div>
                    {isLightboxOpen && (
                        <Lightbox
                            images={lightboxImages}
                            currentIndex={currentLightboxImageIndex}
                            onClose={closeLightbox}
                            onNavigate={navigateLightbox}
                        />
                    )}
                </div>
            );
        };


        // Composant Page de Connexion Admin
        const AdminLoginPage = ({ setIsAdminAuthenticated, setCurrentPage }) => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState(null);

            const handleLogin = (e) => {
                e.preventDefault();
                setError(null);

                // Validation simple (√Ä remplacer par une logique d'authentification s√©curis√©e c√¥t√© serveur)
                // Dans le cas de GitHub Pages, nous utilisons une validation simple c√¥t√© client
                // Note: La vraie s√©curit√© requiert un backend. Ceci est une mesure d'obscurit√©.
                if (username === 'Remy' && password === 'Remy03200!') {
                    setIsAdminAuthenticated(true);
                    setCurrentPage('admin-panel'); // Rediriger vers le panneau admin
                } else {
                    setError('Nom d\'utilisateur ou mot de passe incorrect.');
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center bg-gray-900 pt-[96px] pb-12 font-inter">
                    <div className="w-full max-w-md bg-gray-800 p-8 rounded-xl shadow-2xl border border-gray-700 animate-fade-in-down">
                        <h1 className="text-4xl font-extrabold text-center mb-6 text-red-500">Connexion Admin</h1>
                        <p className="text-center text-gray-400 mb-8">Veuillez vous connecter pour acc√©der au panneau d'administration.</p>

                        <form onSubmit={handleLogin} className="space-y-6">
                            <InputField
                                label="Nom d'utilisateur"
                                type="text"
                                name="username"
                                placeholder="Nom d'utilisateur"
                                required={true}
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                            />
                            <InputField
                                label="Mot de passe"
                                type="password"
                                name="password"
                                placeholder="Mot de passe"
                                required={true}
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                            />

                            {error && (
                                <p className="text-red-400 text-sm text-center font-semibold">{error}</p>
                            )}

                            <button
                                type="submit"
                                className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 w-full"
                            >
                                Se connecter
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // Composant pour le panneau d'administration
        const AdminPanelPage = ({ handleLogout, isAdminAuthenticated }) => {
            const { content, updateContent, setInitialContent } = useContext(ContentContext);
            const [activeTab, setActiveTab] = useState('home'); // Onglet actif
            const [localContent, setLocalContent] = useState(null); // Contenu √©ditable local
            const [isSaving, setIsSaving] = useState(false);
            const [saveMessage, setSaveMessage] = useState(null);

            // Synchroniser le contenu global vers le contenu local lors du montage et √† chaque changement
            useEffect(() => {
                // Utiliser JSON.parse(JSON.stringify) pour une copie profonde et non li√©e
                if (content) {
                    setLocalContent(JSON.parse(JSON.stringify(content)));
                    setSaveMessage(null); // R√©initialiser le message de sauvegarde
                }
            }, [content]);

            // Fonction pour g√©rer les changements locaux dans le panneau admin
            const handleLocalChange = (pageKey, fieldKey, newValue) => {
                setLocalContent(prevContent => {
                    if (!prevContent) return prevContent;

                    // Cr√©e une copie profonde pour l'immuabilit√©
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    const targetPage = newContent[pageKey];

                    if (!targetPage) {
                        console.error(`handleLocalChange: Page key "${pageKey}" not found in localContent.`);
                        return prevContent;
                    }

                    // Utiliser la fonction utilitaire pour les propri√©t√©s imbriqu√©es
                    setNestedProperty(targetPage, fieldKey, newValue);

                    // console.log(`handleLocalChange: Local change applied. New localContent:`, newContent);
                    return newContent;
                });
            };

            const handleAddBlogPost = () => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    if (!newContent.blog || !Array.isArray(newContent.blog.posts)) {
                        newContent.blog = { ...newContent.blog, posts: [] };
                    }
                    newContent.blog.posts.push({
                        id: Date.now(), // Utiliser un timestamp unique pour l'ID
                        images: ["https://placehold.co/600x400/000/FFF?text=Nouvelle+image"], // Initialise avec une image par d√©faut
                        title: "Nouveau titre d'article",
                        description: "Nouvelle description d'article."
                    });
                    return newContent;
                });
            };

            const handleRemoveBlogPost = (idToRemove) => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    if (newContent.blog && Array.isArray(newContent.blog.posts)) {
                        newContent.blog.posts = newContent.blog.posts.filter(post => post.id !== idToRemove);
                    }
                    return newContent;
                });
            };

            const handleAddImageToPost = (postIndex, imageUrl) => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    const targetPost = newContent.blog.posts[postIndex];
                    if (targetPost) {
                        if (!targetPost.images) {
                            targetPost.images = [];
                        }
                        targetPost.images.push(imageUrl);
                    }
                    return newContent;
                });
            };

            const handleRemoveImageFromPost = (postIndex, imageIndex) => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    const targetPost = newContent.blog.posts[postIndex];
                    if (targetPost && targetPost.images && Array.isArray(targetPost.images)) {
                        targetPost.images.splice(imageIndex, 1);
                    }
                    return newContent;
                });
            };


            // Fonction pour sauvegarder les changements (Simul√©e)
            const handleSaveChanges = async () => {
                setIsSaving(true);
                setSaveMessage('Sauvegarde en cours...');
                console.log("AdminPanelPage: Initiating save. Sending content:", JSON.parse(JSON.stringify(localContent)));

                try {
                    // --- REMPLACER PAR LA LOGIQUE DE SAUVEGARDE R√âELLE VERS VOTRE BACKEND/GITHUB ---
                    // Exemple de simulation pour un environnement sans backend:
                    await new Promise(resolve => setTimeout(resolve, 2000)); // Simuler le temps de sauvegarde

                    // Appliquer les changements au contenu global (ce qui est affich√©)
                    // Utiliser setInitialContent (qui est updateContent dans ce contexte de fichier unique)
                    setInitialContent(localContent); // Met √† jour le contenu dans le App component

                    setSaveMessage('‚úÖ Modifications sauvegard√©es avec succ√®s dans l\'application !');
                    // --- FIN DE LA LOGIQUE DE SAUVEGARDE SIMUL√âE ---

                } catch (error) {
                    console.error('AdminPanelPage: Erreur lors de la sauvegarde:', error);
                    setSaveMessage(`‚ùå Erreur lors de la sauvegarde. Veuillez v√©rifier la console.`);
                } finally {
                    setIsSaving(false);
                }
            };


            // Rendu des champs √©ditables (r√©cursif pour g√©rer les objets)
            const renderEditableFields = (fields, pageKey, path = '') => {
                // Triez les cl√©s pour un affichage plus logique
                const sortedKeys = Object.keys(fields).sort();

                return sortedKeys.map(fieldKey => {
                    const fieldValue = fields[fieldKey];
                    const contentPath = path ? `${path}.${fieldKey}` : fieldKey;

                    // Si la valeur est un objet et n'est pas null, nous rendons r√©cursivement
                    if (fieldValue !== null && typeof fieldValue === 'object' && !Array.isArray(fieldValue)) {
                        return (
                            <div key={contentPath} className="p-4 bg-gray-600 rounded-lg mt-4 border border-gray-500">
                                <h3 className="text-xl font-bold mb-3 text-white capitalize">{fieldKey.replace(/([A-Z])/g, ' $1').trim()}</h3>
                                <div className="space-y-4">
                                    {renderEditableFields(fieldValue, pageKey, contentPath)}
                                </div>
                            </div>
                        );
                    }

                    // Ne pas afficher les IDs dans l'admin, sauf pour les posts
                    if (fieldKey === 'id' && pageKey !== 'blog') {
                        return null;
                    }

                    // Handle specific types like numbers for volume
                    if (fieldKey === 'musicVolume' && typeof fieldValue === 'number') {
                        return (
                            <div key={contentPath} className="pb-4 border-b border-gray-600 last:border-b-0">
                                <label className="block text-gray-300 text-sm font-bold mb-2">
                                    Volume de la musique: ({Math.round(fieldValue * 100)}%)
                                </label>
                                <input
                                    type="range"
                                    min="0"
                                    max="1"
                                    step="0.01"
                                    value={fieldValue}
                                    onChange={(e) => handleLocalChange(pageKey, fieldKey, parseFloat(e.target.value))}
                                    className="w-full h-2 bg-gray-500 rounded-lg appearance-none cursor-pointer range-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                />
                            </div>
                        );
                    }

                    const valueToDisplay = typeof fieldValue === 'string' ? fieldValue : '';
                    const inputType = (fieldKey.includes('Title') || fieldKey.includes('email') || fieldKey.includes('phone') || fieldKey.includes('instagram') || fieldKey.includes('Handle')) ? 'text' : 'textarea';
                    const rows = (inputType === 'textarea' && typeof valueToDisplay === 'string') ? Math.max(3, valueToDisplay.split('\n').length) : undefined;

                    return (
                        <div key={contentPath} className="pb-4 border-b border-gray-600 last:border-b-0">
                            <label className="block text-gray-300 text-sm font-bold mb-2">
                                {fieldKey.replace(/([A-Z])/g, ' $1').replace(/([0-9])/g, ' $1').trim()}:
                            </label>
                            {inputType === 'text' ? (
                                <input
                                    type="text"
                                    value={valueToDisplay}
                                    onChange={(e) => handleLocalChange(pageKey, fieldKey, e.target.value)}
                                    className="w-full p-2 rounded bg-gray-600 text-white border border-gray-500 focus:ring-blue-500 focus:border-blue-500"
                                />
                            ) : (
                                <textarea
                                    value={valueToDisplay}
                                    onChange={(e) => handleLocalChange(pageKey, fieldKey, e.target.value)}
                                    rows={rows}
                                    className="w-full p-2 rounded bg-gray-600 text-white border border-gray-500 focus:ring-blue-500 focus:border-blue-500 resize-y"
                                />
                            )}
                        </div>
                    );
                });
            };

            if (!isAdminAuthenticated || !localContent) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-gray-900 text-white text-2xl pt-[96px]">
                        Acc√®s non autoris√© ou chargement en cours.
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gray-900 text-white pt-[96px] pb-12 font-inter">
                    <div className="container mx-auto px-4 py-12">
                        <h1 className="text-5xl font-extrabold text-center mb-10 text-red-500">Panneau d'Administration</h1>

                        {/* Barre d'onglets pour la navigation des pages */}
                        <div className="flex flex-wrap justify-center space-x-2 md:space-x-4 mb-10 p-3 bg-gray-800 rounded-xl shadow-inner border border-gray-700">
                            {[
                                { key: 'home', label: 'Accueil' },
                                { key: 'blog', label: 'Blog' },
                                { key: 'showcaseCar', label: 'Voiture Vitrine' },
                                { key: 'aboutUs', label: 'Qui Sommes-nous' },
                                { key: 'contact', label: 'Contact' },
                                { key: 'legalMentions', label: 'Mentions L√©gales' },
                                { key: 'privacyPolicy', label: 'Confidentialit√©' },
                                { key: 'siteSettings', label: 'Param√®tres Site' },
                            ].map(tab => (
                                <button
                                    key={tab.key}
                                    onClick={() => setActiveTab(tab.key)}
                                    className={`px-4 py-3 rounded-lg font-semibold transition duration-300 ease-in-out ${activeTab === tab.key ? 'bg-blue-600 text-white shadow-lg transform scale-105' : 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white' }`}
                                >
                                    {tab.label}
                                </button>
                            ))}
                        </div>

                        {/* Contenu des onglets */}
                        {localContent && (
                            <div className="space-y-8">
                                {/* Section Accueil */}
                                {activeTab === 'home' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-blue-400 capitalize border-b-2 border-blue-600 pb-3"> Page Accueil </h2>
                                        {/* Wrap adjacent elements in a fragment */}
                                        <div className="space-y-6">
                                            {renderEditableFields(localContent.home, 'home')}
                                            {localContent.home.offerTitle && (
                                                <div className="mt-8 pt-6 border-t-2 border-red-600">
                                                    <h3 className="text-xl sm:text-2xl font-bold mb-4 text-red-300">Nos Offres</h3> {/* Ajust√© pour mobile */}
                                                    {renderEditableFields({
                                                        offer1Title: localContent.home.offer1Title, offer1Description: localContent.home.offer1Description,
                                                        offer2Title: localContent.home.offer2Title, offer2Description: localContent.home.offer2Description,
                                                        offer3Title: localContent.home.offer3Title, offer3Description: localContent.home.offer3Description,
                                                        offer4Title: localContent.home.offer4Title, offer4Description: localContent.home.offer4Description,
                                                    }, 'home')}
                                                </div>
                                            )}
                                            {localContent.home.trustTitle && (
                                                <div className="mt-8 pt-6 border-t-2 border-blue-600">
                                                    <h3 className="text-xl sm:text-2xl font-bold mb-4 text-blue-300">Pourquoi nous faire confiance</h3> {/* Ajust√© pour mobile */}
                                                    {renderEditableFields({
                                                        trust1Title: localContent.home.trust1Title, trust1Description: localContent.home.trust1Description,
                                                        trust2Title: localContent.home.trust2Title, trust2Description: localContent.home.trust2Description,
                                                        trust3Title: localContent.home.trust3Title, trust3Description: localContent.home.trust3Description,
                                                        trust4Title: localContent.home.trust4Title, trust4Description: localContent.home.trust4Description,
                                                    }, 'home')}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {/* Section Blog */}
                                {activeTab === 'blog' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-green-400 capitalize border-b-2 border-green-600 pb-3"> Page Blog </h2>
                                        {/* Champs g√©n√©raux du blog */}
                                        {renderEditableFields({
                                            mainTitle: localContent.blog.mainTitle,
                                            description: localContent.blog.description,
                                            // Ne pas afficher la liste des posts ici, mais dans la section d√©di√©e
                                        }, 'blog')}

                                        {/* Section Gestion des Articles de Blog */}
                                        <div className="mt-8 pt-6 border-t-2 border-green-600">
                                            <h3 className="text-xl sm:text-2xl font-bold mb-4 text-green-300">Articles de Blog</h3>
                                            <button
                                                onClick={handleAddBlogPost}
                                                className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 mb-4"
                                            >
                                                + Ajouter un Nouvel Article
                                            </button>

                                            <div className="space-y-6">
                                                {localContent.blog.posts && localContent.blog.posts.map((post, postIndex) => (
                                                    <div key={post.id} className="p-4 border border-gray-500 rounded-lg bg-gray-600 shadow-md">
                                                        <div className="flex justify-between items-center mb-3 border-b border-gray-500 pb-2">
                                                            <h4 className="text-lg font-bold text-white">Article ID: {post.id}</h4>
                                                            <button
                                                                onClick={() => handleRemoveBlogPost(post.id)}
                                                                className="bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded-lg text-sm transition duration-300"
                                                            >
                                                                Supprimer
                                                            </button>
                                                        </div>
                                                        {renderEditableFields({
                                                            title: post.title,
                                                            description: post.description,
                                                        }, `blog.posts.${postIndex}`)}

                                                        {/* Gestion des Images de l'Article */}
                                                        <div className="mt-4 pt-4 border-t border-gray-500">
                                                            <h5 className="text-md font-bold mb-2 text-gray-300">Images de l'Article</h5>
                                                            <div className="space-y-2">
                                                                {post.images && post.images.map((image, imageIndex) => (
                                                                    <div key={imageIndex} className="flex items-center space-x-2">
                                                                        <input
                                                                            type="text"
                                                                            value={image}
                                                                            onChange={(e) => handleLocalChange('blog', `posts.${postIndex}.images.${imageIndex}`, e.target.value)}
                                                                            className="w-full p-2 rounded bg-gray-500 text-white border border-gray-400"
                                                                        />
                                                                        <button
                                                                            onClick={() => handleRemoveImageFromPost(postIndex, imageIndex)}
                                                                            className="bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded-lg text-sm transition duration-300"
                                                                        >
                                                                            <XIcon className="w-4 h-4" />
                                                                        </button>
                                                                    </div>
                                                                ))}
                                                                <button
                                                                    onClick={() => handleAddImageToPost(postIndex, "https://placehold.co/600x400/000/FFF?text=Nouvelle+image")}
                                                                    className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded-lg text-sm transition duration-300"
                                                                >
                                                                    + Ajouter Image
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Section Voiture Vitrine */}
                                {activeTab === 'showcaseCar' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-red-400 capitalize border-b-2 border-red-600 pb-3"> Page Voiture Vitrine </h2>
                                        {/* Wrap adjacent elements in a fragment */}
                                        <div className="space-y-6">
                                            {renderEditableFields(localContent.showcaseCar, 'showcaseCar')}
                                        </div>
                                    </div>
                                )}

                                {/* Section Qui Sommes-nous */}
                                {activeTab === 'aboutUs' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-yellow-400 capitalize border-b-2 border-yellow-600 pb-3"> Page Qui Sommes-nous </h2>
                                        <div className="space-y-6">
                                            {renderEditableFields(localContent.aboutUs, 'aboutUs')}
                                            {localContent.aboutUs.value1Title && (
                                                <div className="mt-8 pt-6 border-t-2 border-yellow-600">
                                                    <h3 className="text-xl sm:text-2xl font-bold mb-4 text-yellow-300">Nos Valeurs</h3> {/* Ajust√© pour mobile */}
                                                    {renderEditableFields({
                                                        value1Title: localContent.aboutUs.value1Title, value1Description: localContent.aboutUs.value1Description,
                                                        value2Title: localContent.aboutUs.value2Title, value2Description: localContent.aboutUs.value2Description,
                                                        value3Title: localContent.aboutUs.value3Title, value3Description: localContent.aboutUs.value3Description,
                                                        value4Title: localContent.aboutUs.value4Title, value4Description: localContent.aboutUs.value4Description,
                                                    }, 'aboutUs')}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {/* Section Contact */}
                                {activeTab === 'contact' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-pink-400 capitalize border-b-2 border-pink-600 pb-3"> Page Contact </h2>
                                        {/* Wrap adjacent elements in a fragment */}
                                        <React.Fragment>
                                            {renderEditableFields(localContent.contact, 'contact')}
                                        </React.Fragment>
                                    </div>
                                )}

                                {/* Section Mentions L√©gales */}
                                {activeTab === 'legalMentions' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-teal-400 capitalize border-b-2 border-teal-600 pb-3"> Page Mentions L√©gales </h2>
                                        <div className="space-y-6">
                                            {renderEditableFields(localContent.legalMentions, 'legalMentions')}
                                            {localContent.legalMentions.list1Item1 && (
                                                <div className="mt-8 pt-6 border-t-2 border-teal-600">
                                                    <h3 className="text-xl sm:text-2xl font-bold mb-4 text-teal-300">Liste 1</h3> {/* Ajust√© pour mobile */}
                                                    {renderEditableFields({
                                                        list1Item1: localContent.legalMentions.list1Item1,
                                                        list1Item2: localContent.legalMentions.list1Item2,
                                                        list1Item3: localContent.legalMentions.list1Item3,
                                                    }, 'legalMentions')}
                                                </div>
                                            )}
                                            {localContent.legalMentions.list2Item1 && (
                                                <div className="mt-8 pt-6 border-t-2 border-teal-600">
                                                    <h3 className="text-xl sm:text-2xl font-bold mb-4 text-teal-300">Liste 2</h3> {/* Ajust√© pour mobile */}
                                                    {renderEditableFields({
                                                        list2Item1: localContent.legalMentions.list2Item1,
                                                        list2Item2: localContent.legalMentions.list2Item2,
                                                        list2Item3: localContent.legalMentions.list2Item3,
                                                    }, 'legalMentions')}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {/* Section Politique de Confidentialit√© */}
                                {activeTab === 'privacyPolicy' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-purple-400 capitalize border-b-2 border-purple-600 pb-3"> Page Politique de Confidentialit√© </h2>
                                        <div className="space-y-6">
                                            {renderEditableFields(localContent.privacyPolicy, 'privacyPolicy')}
                                        </div>
                                    </div>
                                )}

                                {/* Section Param√®tres du Site */}
                                {activeTab === 'siteSettings' && (
                                    <div className="p-6 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-cyan-400 capitalize border-b-2 border-cyan-600 pb-3"> Param√®tres du Site </h2>
                                        <div className="space-y-6">
                                            {/* Utilisez renderEditableFields */}
                                            {localContent.siteSettings && renderEditableFields(localContent.siteSettings, 'siteSettings')}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        <div className="flex justify-center space-x-4 mt-8">
                            <button
                                onClick={handleSaveChanges}
                                className="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled={isSaving}
                            >
                                {isSaving ? 'Sauvegarde...' : 'Enregistrer les modifications'}
                            </button>
                            <button
                                onClick={handleLogout}
                                className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                            >
                                D√©connexion
                            </button>
                        </div>

                        {saveMessage && (
                            <p className="text-center text-yellow-400 mt-4 text-md animate-fade-in">
                                {saveMessage}
                            </p>
                        )}
                    </div>
                </div>
            );
        };

        // Nouveau composant pour le contr√¥le de la musique
        const MusicControl = ({ volume }) => { // Accepte `volume` comme prop
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [showAutoplayMessage, setShowAutoplayMessage] = useState(false); // Nouvel √©tat pour le message d'autoplay

            useEffect(() => {
                const audio = document.getElementById('background-music');
                if (audio) {
                    audioRef.current = audio;
                    
                    // Ajuster le volume initial et √† chaque changement de la prop `volume`
                    audio.volume = volume;

                    // Tentative de lecture automatique
                    const playPromise = audio.play();

                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            // Lecture automatique r√©ussie
                            setIsPlaying(true);
                            setShowAutoplayMessage(false);
                        }).catch(error => {
                            // Lecture automatique bloqu√©e
                            setIsPlaying(false);
                            setShowAutoplayMessage(true);
                            console.log("Lecture automatique bloqu√©e. L'utilisateur doit interagir.");
                        });
                    }

                    // Mettre √† jour l'√©tat isPlaying lorsque l'audio se met en pause/lecture
                    const handlePlay = () => setIsPlaying(true);
                    const handlePause = () => setIsPlaying(false);

                    audio.addEventListener('play', handlePlay);
                    audio.addEventListener('pause', handlePause);

                    return () => {
                        audio.removeEventListener('play', handlePlay);
                        audio.removeEventListener('pause', handlePause);
                    };
                }
            }, [volume]); // D√©pend de `volume` pour ajuster le son

            const togglePlayPause = () => {
                if (!audioRef.current) return;

                if (isPlaying) {
                    audioRef.current.pause();
                } else {
                    audioRef.current.play().then(() => {
                        setIsPlaying(true);
                        setShowAutoplayMessage(false); // Masquer le message si l'utilisateur interagit
                    }).catch(error => {
                        console.error("Erreur lors de la tentative de lecture par le bouton:", error);
                        // Optionnel: Afficher un message √† l'utilisateur si la lecture √©choue m√™me avec le clic
                    });
                }
            };

            return (
                <>
                    <button
                        onClick={togglePlayPause}
                        className="fixed bottom-8 right-8 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 active:scale-90 z-50 flex items-center justify-center w-14 h-14"
                        aria-label={isPlaying ? "Mettre la musique en pause" : "Jouer la musique"}
                    >
                        {isPlaying ? <PauseIcon /> : <PlayIcon />}
                    </button>
                    {showAutoplayMessage && (
                        <div className="fixed bottom-24 right-8 bg-yellow-500 text-gray-900 px-4 py-2 rounded-lg shadow-lg text-sm animate-fade-in-down z-50">
                            Cliquez sur le bouton de lecture pour lancer la musique !
                        </div>
                    )}
                </>
            );
        };

        // Composant pour le bouton de retour en haut de page
        const ScrollToTopButton = () => {
            const [isVisible, setIsVisible] = useState(false);

            // G√®re la visibilit√© du bouton en fonction du d√©filement
            const toggleVisibility = () => {
                if (window.pageYOffset > 300) { // Rend le bouton visible apr√®s 300px de d√©filement
                    setIsVisible(true);
                } else {
                    setIsVisible(false);
                }
            };

            // Fonction pour remonter en haut de page avec une animation douce
            const scrollToTop = () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            };

            useEffect(() => {
                window.addEventListener('scroll', toggleVisibility);
                return () => {
                    window.removeEventListener('scroll', toggleVisibility);
                };
            }, []);

            return (
                <button
                    className={`fixed bottom-24 right-8 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 active:scale-90 z-50 ${isVisible ? 'scroll-to-top' : 'scroll-to-top hidden'}`}
                    onClick={scrollToTop}
                    aria-label="Retour en haut de page"
                >
                    <ArrowUpIcon className="w-6 h-6"/>
                </button>
            );
        };


        // Composant principal de l'application
        const App = () => {
            const [currentPage, setCurrentPage] = useState('accueil');
            const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(false);
            const [content, setContent] = useState(null); // √âtat du contenu global
            const [loadingContent, setLoadingContent] = useState(true); // √âtat de chargement du contenu
            const [errorContent, setErrorContent] = useState(null); // √âtat d'erreur de chargement du contenu
            const [isNavbarVisible, setIsNavbarVisible] = useState(true); // √âtat de visibilit√© de la navbar
            const lastScrollY = useRef(0); // Derni√®re position de d√©filement connue
            const appRef = useRef(null); // Ref pour le conteneur principal de l'App

            // Contenu de secours par d√©faut si content.json est introuvable
            const defaultContent = {
                home: {
                    mainTitle: "BRMOTORSPORT",
                    tagline: "Lib√©rez la Puissance. Red√©finissez la Performance!",
                    offerTitle: "Nos Services d'Optimisation",
                    offerSubtitle: "Des pr√©parations moteur sur mesure pour des performances maximales.",
                    offer1Title: "Reprogrammation Moteur",
                    offer1Description: "Optimisation Stage 1 √† 3 pour am√©liorer la puissance et le couple.",
                    offer2Title: "Entretien Sp√©cialis√©",
                    offer2Description: "Maintenance et r√©paration de v√©hicules haute performance.",
                    offer3Title: "Conseil Expert",
                    offer3Description: "Accompagnement personnalis√© pour vos projets automobiles.",
                    offer4Title: "Diagnostic √âlectronique",
                    offer4Description: "Identification pr√©cise des probl√®mes moteur et √©lectronique.",
                    trustTitle: "Pourquoi nous faire confiance ?",
                    trust1Title: "Plus de 10 ans d'exp√©rience terrain.",
                    trust1Description: "Un savoir-faire √©prouv√©, b√¢ti sur des ann√©es de pratique et de passion.",
                    trust2Title: "Une expertise reconnue en performance moteur.",
                    trust2Description: "Le moteur n'a plus de secret pour nous. Ma√Ætrise et innovation au service de votre v√©hicule.",
                    trust3Title: "Un service de proximit√©, fiable et √† l'√©coute.",
                    trust3Description: "Votre partenaire automobile de confiance, toujours disponible pour vos besoins.",
                    trust4Title: "La passion du moteur comme moteur.",
                    trust4Description: "Faites confiance √† une √©quipe de passionn√©s qui ma√Ætrisent leur art. R√©my Bruyant, notre expert automobile d√©di√© √† la performance et √† la qualit√©.",
                    testimonialTitle: "T√©moignages Clients",
                    testimonial1Text: "La reprogrammation Stage 1 a transform√© ma voiture. Une nouvelle vie, un couple impressionnant. Je recommande vivement !",
                    testimonial1Author: "Marc L.",
                    testimonial2Text: "Service impeccable, professionnel et tr√®s √† l'√©coute. Le diagnostic a √©t√© rapide et pr√©cis.",
                    testimonial2Author: "Sophie B.",
                    testimonial3Text: "Vraiment l'adresse incontournable pour les passionn√©s de performance dans la r√©gion.",
                    testimonial3Author: "Julien V."
                },
                blog: {
                    mainTitle: "Notre Blog Performance",
                    description: "Tenez-vous au courant des derni√®res actualit√©s, r√©alisations et conseils techniques de BRMOTORSPORT.",
                    posts: [
                        {
                            id: 1700000000000, // Exemple de timestamp
                            images: ["Photo1.png"],
                            title: "Pr√©paration Scirocco R Stage 3 : 500+ Ch",
                            description: "D√©tails de notre derni√®re pr√©paration extr√™me sur une Volkswagen Scirocco R, atteignant des puissances impressionnantes."
                        },
                        {
                            id: 1600000000000,
                            images: ["photo2.png"],
                            title: "Le Choix de la Reprogrammation : Stage 1 ou Stage 2 ?",
                            description: "Guide pour vous aider √† choisir la bonne √©tape d'optimisation pour votre v√©hicule."
                        },
                    ]
                },
                aboutUs: {
                    mainTitle: "Qui Sommes-nous",
                    subtitle: "Notre engagement : vous offrir une performance et une fiabilit√© sans compromis.",
                    historyTitle: "Notre Histoire",
                    historyParagraph1: "Fond√© par R√©my Bruyant, passionn√© d'automobile et expert en m√©canique moteur depuis plus de dix ans, BRMOTORSPORT est n√© de la volont√© de repousser les limites de la performance automobile. Notre mission est simple : transformer votre v√©hicule en une machine d'exception.",
                    historyParagraph2: "Chaque pr√©paration est r√©alis√©e avec le plus grand soin, en utilisant des outils de diagnostic √† la pointe de la technologie et des pi√®ces de haute qualit√©, pour garantir une fiabilit√© maximale √† des niveaux de puissance extr√™mes.",
                    valuesTitle: "Nos Valeurs",
                    value1Title: "Expertise Technique",
                    value1Description: "Ma√Ætrise compl√®te de la cha√Æne cin√©matique et des syst√®mes √©lectroniques pour des r√©sultats garantis.",
                    value2Title: "Innovation",
                    value2Description: "Recherche constante de nouvelles solutions pour optimiser les performances de mani√®re durable et efficace.",
                    value3Title: "Fiabilit√©",
                    value3Description: "La puissance n'a de sens qu'avec la fiabilit√©. Nous ne transigeons jamais sur la s√©curit√© et la long√©vit√© de votre moteur.",
                    value4Title: "Passion Client",
                    value4Description: "Nous partageons votre passion. Notre service est bas√© sur l'√©coute et l'accompagnement personnalis√© de chaque projet."
                },
                contact: {
                    mainTitle: "Contactez-nous",
                    subtitle: "Pour toute demande de devis ou de renseignement, notre √©quipe est √† votre √©coute.",
                    phoneNumber: "07 81 29 86 64",
                    emailAddress: "brmotorsport@gmail.com",
                    instagramHandle: "brmotorsport03",
                    address: "Rue du Commerce\n03200 Vichy",
                    formTitle: "Envoyez-nous un message"
                },
                legalMentions: {
                    mainTitle: "Mentions L√©gales",
                    subtitle: "Informations l√©gales relatives √† l'utilisation du site brmotorsport.fr.",
                    editorTitle: "√âditeur du Site",
                    list1Item1: "Statut : Micro-entreprise",
                    list1Item2: "Nom du Responsable : R√©my Bruyant",
                    list1Item3: "Adresse : Rue du Commerce, 03200 Vichy",
                    hostingTitle: "H√©bergement",
                    list2Item1: "H√©bergeur : GitHub Pages",
                    list2Item2: "Raison sociale : GitHub, Inc.",
                    list2Item3: "Adresse : 88 Colin P Kelly Jr St, San Francisco, CA 94107, USA",
                    cguTitle: "Conditions G√©n√©rales d'Utilisation",
                    cguText: "L'utilisation du site brmotorsport.fr implique l'acceptation pleine et enti√®re des conditions g√©n√©rales d'utilisation d√©crites ci-apr√®s. Ces conditions d'utilisation sont susceptibles d'√™tre modifi√©es ou compl√©t√©es √† tout moment.",
                    liabilityTitle: "Limitation de Responsabilit√©",
                    liabilityText: "BRMOTORSPORT ne pourra √™tre tenu responsable des dommages directs et indirects caus√©s au mat√©riel de l'utilisateur, lors de l'acc√®s au site, et r√©sultant soit de l'utilisation d'un mat√©riel non conforme aux sp√©cifications, soit de l'apparition d'un bug ou d'une incompatibilit√©."
                },
                privacyPolicy: {
                    mainTitle: "Politique de Confidentialit√©",
                    subtitle: "Engagement de BRMOTORSPORT sur la protection de vos donn√©es personnelles.",
                    dataTitle: "Donn√©es Personnelles Collect√©es",
                    dataText: "Nous collectons uniquement les informations que vous nous fournissez volontairement via le formulaire de contact (nom, e-mail, sujet, message) dans le seul but de r√©pondre √† vos demandes.",
                    usageTitle: "Utilisation de vos Donn√©es",
                    usageText: "Vos donn√©es personnelles sont utilis√©es exclusivement pour le traitement de vos demandes de contact et l'am√©lioration de nos services.",
                    sharingTitle: "Partage des Donn√©es",
                    sharingText: "Vos donn√©es personnelles ne sont ni vendues, ni √©chang√©es, ni transf√©r√©es √† aucune autre soci√©t√©. Seuls les employ√©s qui ont besoin d'effectuer un travail sp√©cifique (par exemple, la facturation ou le service client) ont acc√®s aux informations personnelles identifiables.",
                    rightsTitle: "Vos Droits",
                    rightsText: "Conform√©ment au R√®glement G√©n√©ral sur la Protection des Donn√©es (RGPD), vous disposez d'un droit d'acc√®s, de rectification, de suppression et d'opposition au traitement de vos donn√©es personnelles. Pour exercer ces droits, veuillez nous contacter √† brmotorsport@gmail.com.",
                    disclaimerText: "Cette politique de confidentialit√© peut √™tre mise √† jour occasionnellement. Nous vous invitons √† la consulter r√©guli√®rement."
                },
                showcaseCar: {
                    mainTitle: "Notre Voiture Vitrine",
                    description: "D√©couvrez notre derni√®re pr√©paration exceptionnelle : une Volkswagen Scirocco R avec une optimisation Stage 3 pouss√©e, d√©veloppant plus de 500 chevaux.",
                    preparationTitle: "D√©tails de la Pr√©paration Stage 3",
                    preparationDescription: "Ce v√©hicule a subi une transformation compl√®te pour atteindre des niveaux de performance extr√™mes, tout en conservant une fiabilit√© optimale.",
                    pistonLabel: "Pistons", piston: "Pistons forg√©s",
                    biellesLabel: "Bielles", bielles: "Bielles forg√©es",
                    soupapesLabel: "Soupapes", soupapes: "Soupapes renforc√©es",
                    admLabel: "Admission", adm: "Admission gros volume",
                    ressortLabel: "Ressorts", ressort: "Ressorts de soupapes renforc√©es",
                    viserieLabel: "Visserie", viserie: "Vis de bielles, vilebrequin et culasse renforc√©es",
                    pompeHuileLabel: "Pompe √† huile", pompeHuile: "Pompe √† huile gros d√©bit",
                    turboLabel: "Turbo", turbo: "Turbo hybride sur mesure",
                    wastegateLabel: "Wastegate", wastegate: "Wastegate externe",
                    injecteursLabel: "Injecteurs", injecteurs: "Injecteurs gros d√©bit",
                    pipAdmissionLabel: "Pipe d'Admission", pipAdmission: "Pipe d'admission gros volume",
                    wmiLabel: "Syst√®me WMI", wmi: "Syst√®me WMI (Water-Methanol Injection)",
                    embrayageLabel: "Embrayage", embrayage: "Embrayage renforc√©",
                    finalDescription: "Chaque composant a √©t√© soigneusement s√©lectionn√© et install√© pour garantir une synergie parfaite et une exp√©rience de conduite in√©gal√©e sur route comme sur circuit."
                },
                siteSettings: {
                    // Nouvelle section pour les param√®tres du site
                    musicVolume: 0.05 // Valeur par d√©faut pour le volume de la musique
                }
            };


            // Fonction pour charger le contenu depuis content.json ou utiliser le contenu par d√©faut
            useEffect(() => {
                const fetchContent = async () => {
                    console.log("App: Attempting to fetch content.json...");
                    try {
                        const response = await fetch('content.json'); // Assurez-vous que content.json est √† la racine de votre d√©p√¥t
                        if (!response.ok) {
                            // Si le fichier n'est pas trouv√© (404) ou autre erreur, utiliser le contenu par d√©faut
                            if (response.status === 404) {
                                console.warn("App: content.json not found (404). Using default content.");
                                setContent(defaultContent);
                            } else {
                                throw new Error(`Erreur HTTP: ${response.status}`);
                            }
                        } else {
                            const data = await response.json();
                            setContent(data);
                            console.log("App: content.json loaded successfully:", data);
                        }
                    } catch (error) {
                        console.error("App: Erreur lors du chargement de content.json:", error);
                        // Utiliser le contenu par d√©faut en cas d'erreur de parsing ou autre
                        setErrorContent("Impossible de charger le contenu du site (Erreur r√©seau ou fichier). Le contenu par d√©faut est utilis√©. V√©rifiez la console pour les d√©tails.");
                        setContent(defaultContent);
                    } finally {
                        setLoadingContent(false);
                    }
                };
                fetchContent();
            }, []); // S'ex√©cute une seule fois au montage du composant

            // Fonction pour mettre √† jour le contenu global (utilis√©e par le panneau admin)
            const updateContent = (pageKey, newContentObject) => {
                setContent(prevContent => {
                    // Effectuer une mise √† jour seulement pour les champs concern√©s
                    // newContentObject est le localContent.pageKey (ex: localContent.home)
                    return {
                        ...prevContent,
                        [pageKey]: newContentObject,
                    };
                });
            };

            // Fonction pour mettre √† jour le contenu global (utilis√©e pour remplacer tout le contenu apr√®s une sauvegarde)
            const setInitialContent = (newContent) => {
                setContent(newContent);
            };

            // Fonction de d√©connexion
            const handleLogout = () => {
                setIsAdminAuthenticated(false);
                setCurrentPage('accueil');
            };

            // D√©filement en haut de page √† chaque changement de page
            useEffect(() => {
                window.scrollTo(0, 0); // D√©file √† la position 0, 0 (en haut √† gauche)
            }, [currentPage]); // Se d√©clenche √† chaque fois que `currentPage` change

            // Logique de visibilit√© de la navbar au d√©filement
            useEffect(() => {
                const handleScroll = () => {
                    const currentScrollY = window.scrollY;

                    // Si l'utilisateur est tout en haut de la page, la navbar est toujours visible
                    if (currentScrollY === 0) {
                        setIsNavbarVisible(true);
                    }
                    // Si le d√©filement est vers le haut (currentScrollY < lastScrollY.current), la navbar est visible
                    else if (currentScrollY < lastScrollY.current) {
                        setIsNavbarVisible(true);
                    }
                    // Si le d√©filement est vers le bas (currentScrollY > lastScrollY.current) et qu'on a d√©pass√© un certain seuil (ex: 200px), la navbar est cach√©e
                    else if (currentScrollY > lastScrollY.current && currentScrollY > 200) {
                        setIsNavbarVisible(false);
                    }
                    lastScrollY.current = currentScrollY;
                };

                window.addEventListener('scroll', handleScroll);
                return () => {
                    window.removeEventListener('scroll', handleScroll);
                };
            }, []);


            if (loadingContent || content === null) {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center bg-gray-900 text-white text-3xl">
                        <div className="animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-blue-500 mb-4"></div>
                        <p>Chargement du contenu...</p>
                    </div>
                );
            }

            if (errorContent && !content) { // Afficher l'erreur seulement si le contenu de secours n'a pas pu √™tre charg√©
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center bg-red-900 text-white text-xl p-8 text-center">
                        <p>‚ùå Erreur Critique : {errorContent}</p>
                        <p className="mt-4">Veuillez v√©rifier votre connexion Internet ou la console du navigateur.</p>
                    </div>
                );
            }

            // D√©termine le contenu principal en fonction de la page active
            let mainContent;
            switch (currentPage) {
                case 'accueil':
                    mainContent = <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'blog':
                    mainContent = <BlogPage isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'qui-sommes-nous':
                    mainContent = <AboutUsPage isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'contact':
                    mainContent = <ContactPage />;
                    break;
                case 'voiture-vitrine':
                    mainContent = <ShowcaseCarPage isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'admin-login':
                    mainContent = <AdminLoginPage setIsAdminAuthenticated={setIsAdminAuthenticated} setCurrentPage={setCurrentPage} />;
                    break;
                case 'admin-panel':
                    mainContent = <AdminPanelPage handleLogout={handleLogout} isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'mentions-legales':
                    mainContent = <LegalMentionsPage isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                case 'politique-confidentialite':
                    mainContent = <PrivacyPolicyPage isAdminAuthenticated={isAdminAuthenticated} />;
                    break;
                default:
                    mainContent = <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
            }

            // R√©cup√®re le volume de la musique √† partir du contenu charg√©
            const musicVolume = content.siteSettings?.musicVolume !== undefined ? content.siteSettings.musicVolume : 0.05;

            // D√©termine le padding top du main content en fonction de la visibilit√© de la navbar
            // La banni√®re d√©filante a une hauteur fixe de 40px (py-2 + text-lg).
            // La navbar a un padding de p-4 (16px vertical) et une hauteur de contenu d'environ 40px, soit ~56px.
            // Total visible: 40px (banni√®re) + 56px (navbar) = 96px.
            // pt-[96px] est appliqu√© sur chaque page, ce qui donne la bonne marge.

            return (
                <ContentContext.Provider value={{ content, updateContent, setInitialContent }}>
                    {/* Ajout de overflow-x-hidden sur le div racine de l'application React */}
                    <div ref={appRef} className="min-h-screen bg-black overflow-x-hidden">
                        {/* Banni√®re d√©filante */}
                        <ScrollingBanner />
                        {/* Barre de navigation */}
                        <Navbar
                            setCurrentPage={setCurrentPage}
                            isAdminAuthenticated={isAdminAuthenticated}
                            handleLogout={handleLogout}
                            isVisible={isNavbarVisible}
                        />

                        {/* Contenu Principal */}
                        <main>
                            {mainContent}
                        </main>

                        {/* Composants de contr√¥le (fixes) */}
                        <MusicControl volume={musicVolume} />
                        <ScrollToTopButton />


                        {/* Footer (Pied de page) */}
                        <footer className="bg-gray-950 text-white py-8 border-t-4 border-red-600">
                            <div className="container mx-auto px-4 text-center">
                                <p className="text-xl font-bold mb-4">
                                    <span className="text-red-500">BR</span>
                                    <span className="text-white">MOTOR</span>
                                    <span className="text-blue-500">SPORT</span>
                                </p>
                                <p className="text-sm text-gray-400 mb-4">
                                    {content.home?.trustTitle || "La passion du moteur est notre moteur, assurant des r√©sultats qui d√©passent vos attentes."}
                                </p>
                                <div className="text-sm space-x-4">
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('politique-confidentialite'); }} className="hover:text-red-500 transition duration-300">Confidentialit√©</a>
                                    <span className="text-gray-600">|</span>
                                    <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('mentions-legales'); }} className="hover:text-red-500 transition duration-300">Mentions L√©gales</a>
                                    <span className="text-gray-600">|</span>
                                    {/* Lien Admin/D√©connexion conditionnel dans le footer */}
                                    {isAdminAuthenticated ? (
                                        <a href="#" onClick={(e) => { e.preventDefault(); handleLogout(); }} className="hover:text-red-500 transition duration-300">D√©connexion</a>
                                    ) : (
                                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('admin-login'); }} className="hover:text-red-500 transition duration-300">Admin</a>
                                    )}
                                </div>
                                <p className="text-sm mt-2">R√©alis√© avec passion par Viremot Giovanni</p>
                            </div>
                        </footer>
                    </div>
                </ContentContext.Provider>
            );
        };

        // Rendu de l'application React dans l'√©l√©ment HTML avec l'ID 'root'
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
