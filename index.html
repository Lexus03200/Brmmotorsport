<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRMOTORSPORT - Performance Automobile</title>
    <!-- Intégration de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Intégration de React et ReactDOM CDN depuis cdnjs (plus fiable pour CORS) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Intégration de Babel pour transpiler le JSX directement dans le navigateur -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Empêche le défilement horizontal */
        }
        /* Keyframes pour les animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% { opacity: 0; transform: scale3d(.3, .3, .3); }
            20% { transform: scale3d(1.1, 1.1, 1.1); }
            40% { transform: scale3d(.9, .9, .9); }
            60% { opacity: 1; transform: scale3d(1.03, 1.03, 1.03); }
            80% { transform: scale3d(.97, .97, .97); }
            100% { opacity: 1; transform: scale3d(1, 1, 1); }
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        /* Nouvelle animation pour le défilement de la bannière */
        @keyframes scrollText {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-100%); }
        }
        /* Nouvelle animation pour le titre - Coulissement depuis la gauche */
        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        /* Nouvelle animation pour l'effet de vibration (plus douce) */
        @keyframes vibrate {
            0% { transform: translate(0px, 0px); }
            25% { transform: translate(-0.5px, 0.5px); } /* Mouvement réduit */
            50% { transform: translate(0.5px, -0.5px); }
            75% { transform: translate(-0.5px, -0.5px); }
            100% { transform: translate(0px, 0px); }
        }

        .animate-fade-in-down { animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-bounce-in { animation: bounceIn 1s; }
        .animate-blob { animation: blob 7s infinite; }
        .animate-vibrate { animation: vibrate 0.15s ease-in-out infinite; } /* Vitesse ajustée à 0.15s */
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        /* Style pour l'animation de défilement */
        .scrolling-banner-text {
            display: inline-block;
            white-space: nowrap;
            animation: scrollText 30s linear infinite; /* 30s pour la durée, linear pour un mouvement fluide, infinite pour la répétition */
        }
        /* Pour assurer que le texte déborde et puisse défiler */
        .scrolling-banner-container {
            overflow: hidden;
        }
        /* Application de l'animation de coulissement pour le titre */
        .animate-slide-in-left {
            animation: slideInFromLeft 1s ease-out forwards; /* Durée et type d'animation */
        }

        /* Styles supplémentaires pour des effets visuels */
        h1, h2 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Ombre subtile pour la profondeur */
        }
        /* Utilitaire pour décalage d'animation */
        .delay-animation {
            animation-delay: var(--delay-factor);
        }

        /* Styles spécifiques pour la Lightbox (modale) */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            animation: fadeIn 0.3s ease-out forwards;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 0.75rem;
        }

        .lightbox-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.75rem;
            border-radius: 9999px; /* fully rounded */
            display: flex;
            align-items: center;
            justify: center;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
            position: absolute;
            z-index: 101;
        }

        .lightbox-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .lightbox-close-button {
            top: 1rem;
            right: 1rem;
        }

        .lightbox-prev-button {
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .lightbox-next-button {
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
        }
    </style>
</head>
<body class="min-h-screen bg-black font-inter">
    <!-- Message affiché avant que l'application React ne soit rendue -->
    <div id="initial-loading-message" class="fixed inset-0 flex items-center justify-center bg-black text-white text-3xl z-[9999]">
        Initialisation de l'application React...
    </div>

    <!-- Section Audio de fond -->
    <!-- 'autoplay' tente de lancer la lecture automatique, mais peut être bloqué par les navigateurs mobiles. -->
    <!-- 'loop' assure que la musique se répète. -->
    <!-- 'style="display:none;"' masque les contrôles de lecture par défaut. -->
    <!-- Ajout de l'attribut volume pour réduire le son (valeur de 0.0 à 1.0) -->
    <audio id="background-music" autoplay loop volume="0.01" style="display:none;">
        <!-- L'URL est construite en utilisant votre domaine GitHub Pages et le nom de votre fichier MP3. -->
        <source src="musique.mp3" type="audio/mpeg"> <!-- Chemin mis à jour pour être relatif au dossier racine -->
        Votre navigateur ne supporte pas l'élément audio.
    </audio>

    <div id="root"></div>

    <!-- Le type du script a été changé en "text/babel" pour le transpiler -->
    <script type="text/babel">
        // Récupère les hooks React depuis l'objet global React
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // --- Icônes Lucide React ---
        const CarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-car">
            <path d="M19 17H5c-1.1 0-2 .9-2 2v2h18v-2c0-1.1-.9-2-2-2Z"/><path d="M7 17V5h12v12"/><path d="M18 10h-8"/><path d="M10 10v7"/>
          </svg>
        );

        const HandshakeIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucude-handshake">
            <path d="M12.23 20.73a4.7 4.7 0 0 0 6.64-6.64L12.23 7.07l-2.06 2.06"/><path d="M16 16l-3.23 3.23a4.7 4.7 0 0 1-6.64-6.64L9.07 7.07l2.06 2.06"/><path d="M14 10l-2.06 2.06"/><path d="m10 14 2.06-2.06"/>
          </svg>
        );

        const WrenchIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-wrench">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-3.77 3.77a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1 7.94-7.94l-3.77 3.77a1 1 0 0 0-1.4 0l-1.6-1.6a1 1 0 0 0 0-1.4l3.77-3.77a6 6 0 0 0-7.94-7.94zM5.5 12.5l-3-3L12.5 2.5l3 3z"/>
          </svg>
        );

        const CalendarIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-calendar-days">
            <path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/>
          </svg>
        );

        const UsersIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-users">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87L16 16"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        );

        const RssIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-rss">
            <path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/>
          </svg>
        );

        const PhoneIcon = () => (
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-phone">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2H7c.43 0 .79.27.94.66.14.39.07.82-.2 1.1L5.05 6.05c-.35.35-.5.85-.34 1.34A19.79 19.79 0 0 0 16.92 19c.49.16.99.01 1.34-.34l2.29-2.29c.28-.27.71-.34 1.1-.2.39.14.66.5.66.94Z"/>
          </svg>
        );

        const MailIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-mail">
              <rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
        );

        const InstagramIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-instagram">
              <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.5" y1="6.5" y2="6.5"/>
            </svg>
        );

        // Nouvelle icône Play
        const PlayIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-play">
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        // Nouvelle icône Pause
        const PauseIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-pause">
                <rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/>
            </svg>
        );

        const StarIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-star">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        const ArrowLeftIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-left">
                <path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>
            </svg>
        );

        const ArrowRightIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-arrow-right">
                <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
            </svg>
        );

        const XIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="lucide lucide-x">
                <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
        );

        // --- Context pour la gestion du contenu éditable ---
        const ContentContext = createContext();

        // Fonction utilitaire pour définir une propriété imbriquée par un chemin (similaire à lodash.set)
        const setNestedProperty = (obj, path, value) => {
            const pathParts = path.split('.');
            let current = obj;
            for (let i = 0; i < pathParts.length; i++) {
                const part = pathParts[i];
                const isLastPart = (i === pathParts.length - 1);
                // Vérifie si la partie est un index numérique (pour les tableaux)
                const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;

                if (isLastPart) {
                    // C'est la dernière partie du chemin, définissez la valeur
                    current[isArrayIndex ? parseInt(part) : part] = value;
                    console.log(`setNestedProperty: SETTING final value for path part "${part}" to:`, value);
                } else {
                    // Si ce n'est pas la dernière partie, naviguez plus profondément
                    if (isArrayIndex) {
                        if (!Array.isArray(current)) {
                            console.warn(`setNestedProperty: Attempted to navigate array index ${part} on non-array:`, current);
                            return obj; // Retourne l'objet original pour éviter de le corrompre
                        }
                        if (current[parseInt(part)] === undefined || current[parseInt(part)] === null) {
                            current[parseInt(part)] = {}; // Assurez-vous que l'objet à cet index existe
                            console.log(`setNestedProperty: Created new object at array index ${part}.`);
                        }
                        current = current[parseInt(part)];
                    } else {
                        if (typeof current[part] !== 'object' || current[part] === null) {
                            current[part] = {}; // Initialise comme objet si ce n'est pas déjà le cas
                            console.log(`setNestedProperty: Created new object for path part "${part}".`);
                        }
                        current = current[part];
                    }
                    console.log(`setNestedProperty: Navigated to "${part}". Current nested object:`, current);
                }
            }
            return obj; // Retourne l'objet modifié
        };

        // Composant pour l'édition de texte in-situ (utilisé hors du panneau admin pour l'affichage direct)
        const EditableText = ({ tag: Tag, contentKey, isAdminAuthenticated, className }) => {
            const { content, updateContent } = useContext(ContentContext);
            const path = contentKey.split('.'); // Ex: "home.mainTitle" -> ["home", "mainTitle"]

            // Fonction récursive pour accéder à la valeur imbriquée
            const getValue = (obj, p) => {
                let current = obj;
                for (let i = 0; i < p.length; i++) {
                    const part = p[i];
                    const isArrayIndex = !isNaN(parseInt(part)) && String(parseInt(part)) === part;

                    if (isArrayIndex) {
                        if (Array.isArray(current) && current[parseInt(part)] !== undefined) {
                            current = current[parseInt(part)];
                        } else {
                            return `[Contenu manquant ou invalide: ${contentKey}]`;
                        }
                    } else {
                        if (current && typeof current === 'object' && current.hasOwnProperty(part)) {
                            current = current[part];
                        } else {
                            return `[Contenu manquant: ${contentKey}]`;
                        }
                    }
                }
                return current;
            };

            const textValue = content ? getValue(content, contentKey.split('.')) : `Chargement...`;


            // Gérer le changement du texte (seulement si isAdminAuthenticated)
            const handleChange = (e) => {
                const newValue = e.target.value;
                updateContent(contentKey, newValue); // Appelle la fonction de mise à jour du contexte
            };

            if (isAdminAuthenticated) {
                // Si c'est un h1 ou h2, utiliser un input, sinon un textarea
                if (Tag === 'h1' || Tag === 'h2') {
                    return (
                        <input
                            type="text"
                            value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                            onChange={handleChange}
                            className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full`}
                        />
                    );
                }
                return (
                    <textarea
                        value={typeof textValue === 'string' ? textValue : ''} // Assurer que la valeur est une string
                        onChange={handleChange}
                        className={`${className} bg-gray-700 text-white rounded p-2 focus:ring-2 focus:ring-blue-500 w-full min-h-[50px]`}
                        rows={typeof textValue === 'string' ? Math.max(3, textValue.split('\n').length) : 3} // Ajuste le nombre de lignes
                    />
                );
            }

            // Rendu normal pour les clients
            // Vérifie si textValue est une chaîne avant de le rendre
            return <Tag className={className}>{typeof textValue === 'string' ? textValue : `[Contenu invalide: ${contentKey}]`}</Tag>;
        };

        // Composant de la bannière défilante
        const ScrollingBanner = () => {
            const bannerText = "BRMOTORSPORT • VOTRE SATISFACTION EST NOTRE PRIORITÉ • "; // Texte à répéter
            const repeatedText = Array(10).fill(bannerText).join(''); // Répéter le texte plusieurs fois pour l'effet de défilement continu

            return (
                <div className="w-full bg-red-700 text-white text-lg font-bold py-2 overflow-hidden whitespace-nowrap fixed top-0 left-0 z-50 shadow-md">
                    <div className="scrolling-banner-container">
                        <span className="scrolling-banner-text">
                            {repeatedText}
                        </span>
                        <span className="scrolling-banner-text" aria-hidden="true">
                            {repeatedText} {/* Une copie pour assurer la continuité du défilement */}
                        </span>
                    </div>
                </div>
            );
        };

        // Composant de la barre de navigation
        const Navbar = ({ setCurrentPage, isAdminAuthenticated, handleLogout }) => {
          const [isOpen, setIsOpen] = useState(false); // État pour la visibilité du menu mobile

          const toggleMenu = () => {
            setIsOpen(!isOpen);
          };

          return (
            <nav className="bg-gray-900 bg-opacity-90 backdrop-blur-sm p-4 fixed w-full z-50 shadow-lg rounded-b-lg mt-12"> {/* Ajout de mt-12 pour décaler la navbar sous le bandeau */}
              <div className="container mx-auto flex justify-between items-center px-4">
                {/* Titre BRMOTORSPORT avec un style amélioré et des couleurs et l'animation de coulissement */}
                <div className="text-3xl md:text-4xl font-extrabold tracking-widest drop-shadow-lg opacity-0 animate-slide-in-left">
                  <span className="text-red-500">BR</span>
                  <span className="text-white">MOTOR</span>
                  {/* Titre classique sans icône pour SPORT */}
                  <span className="text-blue-500">SPORT</span>
                </div>

                {/* Icône du menu hamburger pour mobile */}
                <div className="md:hidden">
                  <button onClick={toggleMenu} className="text-gray-300 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-lg p-2">
                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16M4 18h16"}></path>
                    </svg>
                  </button>
                </div>

                {/* Menu de bureau */}
                <div className="hidden md:flex space-x-8">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} /> {/* Ajout du lien "Voiture Vitrine" */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} />
                  {/* Lien Admin/Déconnexion conditionnel */}
                  {isAdminAuthenticated ? (
                      <NavItem text="Déconnexion" page="accueil" setCurrentPage={setCurrentPage} onClick={handleLogout} />
                  ) : (
                      <NavItem text="Admin" page="admin-login" setCurrentPage={setCurrentPage} />
                  )}
                </div>
              </div>

              {/* Menu coulissant mobile */}
              <div className={`md:hidden absolute top-full left-0 w-full bg-gray-900 bg-opacity-95 backdrop-blur-sm shadow-lg
                             transform transition-transform duration-300 ease-in-out ${isOpen ? 'translate-x-0' : '-translate-x-full'} z-40`}>
                <div className="flex flex-col items-center py-4 space-y-4">
                  <NavItem icon={<CarIcon />} text="Accueil" page="accueil" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<StarIcon />} text="Voiture Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} /> {/* Ajout du lien "Voiture Vitrine" pour mobile */}
                  <NavItem icon={<RssIcon />} text="Blog" page="blog" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<UsersIcon />} text="Qui Sommes-nous" page="qui-sommes-nous" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  <NavItem icon={<PhoneIcon />} text="Contact" page="contact" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  {/* Lien Admin/Déconnexion conditionnel pour mobile */}
                  {isAdminAuthenticated ? (
                      <NavItem text="Déconnexion" page="accueil" setCurrentPage={setCurrentPage} onClick={() => { handleLogout(); setIsOpen(false); }} />
                  ) : (
                      <NavItem text="Admin" page="admin-login" setCurrentPage={setCurrentPage} onClick={() => setIsOpen(false)} />
                  )}
                </div>
              </div>
            </nav>
          );
        };

        // Composant d'élément de navigation
        const NavItem = ({ icon, text, page, setCurrentPage, onClick }) => (
          <button
            onClick={() => {
              setCurrentPage(page);
              if (onClick) onClick(); // Appelle onClick pour fermer le menu si fourni
            }}
            className="flex items-center text-gray-300 hover:text-red-500 transition duration-300 ease-in-out transform hover:scale-105
                       px-3 py-2 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50"
          >
            {icon && <span className="mr-2 text-xl">{icon}</span>}
            {text}
          </button>
        );

        // Composant Page d'Accueil
        const HomePage = ({ setCurrentPage, isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                        <div className="absolute w-64 h-64 bg-red-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob top-10 left-1/4"></div>
                        <div className="absolute w-72 h-72 bg-blue-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000 top-1/2 right-1/4"></div>
                        <div className="absolute w-80 h-80 bg-green-600 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000 bottom-10 left-1/2"></div>
                    </div>

                    <div className="container mx-auto px-6 relative z-10">
                        <section className="text-center mb-20">
                            <EditableText
                                tag="h1"
                                contentKey="home.mainTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-6xl md:text-7xl font-extrabold mb-6 leading-tight drop-shadow-lg animate-fade-in-down animate-vibrate"
                            />
                            <EditableText
                                tag="p"
                                contentKey="home.description"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mt-10 animate-fade-in-up"
                            />
                            <div className="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6 mt-8">
                                <button
                                    onClick={() => setCurrentPage('blog')}
                                    className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 animate-bounce-in"
                                >
                                    Découvrez notre blog
                                </button>
                                <button
                                    onClick={() => setCurrentPage('voiture-vitrine')}
                                    className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 animate-bounce-in"
                                >
                                    Découvrez également notre voiture vitrine
                                </button>
                            </div>
                        </section>

                        <section className="text-center bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 mb-20 animate-fade-in-up">
                            <a
                                href="#"
                                onClick={(e) => { e.preventDefault(); setCurrentPage('contact'); }}
                                className="block text-xl text-gray-200 leading-relaxed max-w-3xl mx-auto font-semibold text-red-400 hover:underline cursor-pointer"
                            >
                                <EditableText
                                    tag="span"
                                    contentKey="home.contactMessage"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    className="font-semibold text-red-400"
                                />
                            </a>
                        </section>

                        <section className="mb-20">
                            <EditableText
                                tag="h2"
                                contentKey="home.offerTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-5xl font-bold text-center mb-12 text-red-400 animate-fade-in"
                            />
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                                {[
                                    { icon: <CarIcon />, titleKey: "home.offer1Title", descriptionKey: "home.offer1Description" },
                                    { icon: <span className="text-3xl">🚀</span>, titleKey: "home.offer2Title", descriptionKey: "home.offer2Description" },
                                    { icon: <span className="text-3xl">📈</span>, titleKey: "home.offer3Title", descriptionKey: "home.offer3Description" },
                                    { icon: <span className="text-3xl">💡</span>, titleKey: "home.offer4Title", descriptionKey: "home.offer4Description" }
                                ].map((service, index) => (
                                    <ServiceCard
                                        key={index}
                                        icon={service.icon}
                                        titleKey={service.titleKey}
                                        descriptionKey={service.descriptionKey}
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        style={{ '--delay-factor': `${index * 200}ms` }}
                                    />
                                ))}
                            </div>
                        </section>

                        <section className="mb-20">
                            <EditableText
                                tag="h2"
                                contentKey="home.trustTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-5xl font-bold text-center mb-12 text-blue-400 animate-fade-in"
                            />
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {[
                                    { icon: <span className="text-3xl">⏱️</span>, titleKey: "home.trust1Title", descriptionKey: "home.trust1Description" },
                                    { icon: <HandshakeIcon />, titleKey: "home.trust2Title", descriptionKey: "home.trust2Description" },
                                    { icon: <span className="text-3xl">🏆</span>, titleKey: "home.trust3Title", descriptionKey: "home.trust3Description" },
                                    { icon: <span className="text-3xl">⭐</span>, titleKey: "home.trust4Title", descriptionKey: "home.trust4Description" }
                                ].map((trust, index) => (
                                    <TrustCard
                                        key={index}
                                        icon={trust.icon}
                                        titleKey={trust.titleKey}
                                        descriptionKey={trust.descriptionKey}
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        style={{ '--delay-factor': `${index * 200}ms` }}
                                    />
                                ))}
                            </div>
                        </section>

                        <section className="text-center mb-20 bg-gray-800 p-12 rounded-2xl shadow-xl transform transition duration-500 hover:scale-[1.02] hover:shadow-2xl">
                            <EditableText
                                tag="h2"
                                contentKey="home.teamTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-4xl font-bold mb-6 text-orange-400 animate-fade-in"
                            />
                            <EditableText
                                tag="p"
                                contentKey="home.teamDescription"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-xl text-gray-200 leading-relaxed max-w-4xl mx-auto"
                            />
                            <div className="mt-8">
                                <ImageOfRemyBruyant // Remplacement de l'image par le composant ImageOfRemyBruyant
                                    className="mx-auto rounded-full border-4 border-red-500 shadow-lg w-32 h-32 object-cover"
                                />
                            </div>
                        </section>
                    </div>
                </div>
            );
        };

        // Nouveau composant pour l'image de Rémy Bruyant
        const ImageOfRemyBruyant = ({ className }) => {
            const imageUrl = "https://placehold.co/150x150/000/FFF?text=Remy"; // Ou votre URL d'image réelle
            return (
                <img
                    src={imageUrl}
                    alt="Portrait de Rémy Bruyant"
                    className={className}
                    onError={(e) => { e.target.onerror = null; e.target.src="https://placehold.co/150x150/000/FFF?text=Rémy+Bruyant"; }}
                />
            );
        };

        // Composant Carte de Service
        const ServiceCard = ({ icon, titleKey, descriptionKey, style, isAdminAuthenticated }) => (
          <div className="group bg-gray-800 p-8 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-red-500 animate-fade-in-up delay-animation" style={style}>
            <div className="text-red-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-red-400">{icon}</div>
            <EditableText
                tag="h3"
                contentKey={titleKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-red-200"
            />
            <EditableText
                tag="p"
                contentKey={descriptionKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-gray-300"
            />
          </div>
        );

        // Composant Carte de Confiance
        const TrustCard = ({ icon, titleKey, descriptionKey, style, isAdminAuthenticated }) => (
          <div className="group bg-gray-800 p-8 rounded-xl shadow-lg flex flex-col items-center text-center transition duration-300 ease-in-out transform hover:scale-105 hover:bg-gray-700 border border-gray-700 hover:border-blue-500 animate-fade-in-up delay-animation" style={style}>
            <div className="text-blue-500 mb-4 text-5xl transition-colors duration-300 group-hover:text-blue-400">{icon}</div>
            <EditableText
                tag="h3"
                contentKey={titleKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-2xl font-semibold mb-3 text-white transition-colors duration-300 group-hover:text-blue-200"
            />
            <EditableText
                tag="p"
                contentKey={descriptionKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-gray-300"
            />
          </div>
        );

        // Composant Carte de Blog
        const BlogPostCard = ({ post, style }) => (
          <div className="bg-gray-800 rounded-xl shadow-lg overflow-hidden transform transition duration-300 ease-in-out hover:scale-105 hover:shadow-2xl hover:shadow-green-500/50 border border-gray-700 hover:border-green-400 animate-fade-in-up delay-animation" style={style}>
            <img
              src={post.image}
              alt={post.title}
              className="w-full h-64 object-cover object-center transform transition duration-500 hover:scale-110"
              onError={(e) => { e.target.onerror = null; console.error(`ERREUR DE CHARGEMENT D'IMAGE pour l'article "${post.title}": Vérifiez le nom du fichier (${post.image}) et son emplacement.`); e.target.src=`https://placehold.co/600x400/000/FFF?text=Image+non+trouvée`; }} // Fallback image with more specific error message
            />
            <div className="p-6">
              <h3 className="text-2xl font-bold mb-3 text-white leading-tight">{post.title}</h3>
              <p className="text-gray-300 mb-4">{post.description}</p>
              <button className="bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold py-2 px-6 rounded-full hover:from-green-600 hover:to-teal-600 transition duration-300 ease-in-out shadow-md">
                Lire la suite
              </button>
            </div>
          </div>
        );

        // Composant Page Blog
        const BlogPage = ({ isAdminAuthenticated }) => {
          const { content } = useContext(ContentContext);
          // Utilise content.blog.posts qui est chargé depuis content.json
          const blogPosts = content?.blog?.posts || [];

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
              <div className="container mx-auto px-6">
                <EditableText
                    tag="h1"
                    contentKey="blog.mainTitle"
                    isAdminAuthenticated={isAdminAuthenticated}
                    className="text-5xl font-extrabold text-center mb-12 text-green-400 animate-fade-in-down animate-vibrate"
                />
                <EditableText
                    tag="p"
                    contentKey="blog.description"
                    isAdminAuthenticated={isAdminAuthenticated}
                    className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up"
                />

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                  {blogPosts.length > 0 ? ( // Condition ajoutée pour afficher les articles s'il y en a
                    blogPosts.map((post, index) => (
                      <BlogPostCard
                        key={post.id || `blog-post-${index}`} // Utilise l'ID ou un index de secours
                        post={post}
                        style={{ '--delay-factor': `${index * 150}ms` }}
                      />
                    ))
                  ) : ( // Message affiché si aucun article n'est trouvé
                    <p className="col-span-full text-center text-gray-400 text-2xl mt-10">
                      Aucun article de blog à afficher pour le moment.
                    </p>
                  )}
                </div>
              </div>
            </div>
          );
        };


        // Composant Input Field (réutilisable)
        const InputField = ({ label, type, placeholder, required = false, value, onChange, name }) => (
          <div>
            <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
              {label} {required && <span className="text-red-500">*</span>}
            </label>
            <input
              id={name || label} // Utilise name comme id si fourni
              type={type}
              name={name} // Ajout de l'attribut name
              placeholder={placeholder}
              required={required}
              value={value}
              onChange={onChange}
              className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
            />
          </div>
        );

        // Composant TextArea Field (réutilisable)
        const TextAreaField = ({ label, placeholder, required = false, value, onChange, name }) => (
          <div>
            <label htmlFor={name || label} className="block text-gray-300 text-sm font-bold mb-2"> {/* Utilise name comme id si fourni */}
              {label} {required && <span className="text-red-500">*</span>}
            </label>
            <textarea
              id={name || label} // Utilise name comme id si fourni
              name={name} // Ajout de l'attribut name
              placeholder={placeholder}
              required={required}
              rows="5"
              value={value}
              onChange={onChange}
              className="shadow appearance-none border border-gray-700 rounded-lg w-full py-3 px-4 bg-gray-700 text-white leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200 resize-y"
            ></textarea>
          </div>
        );


        // Composant Page Qui Sommes-nous
        const AboutUsPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-4xl">
                        <EditableText
                            tag="h1"
                            contentKey="aboutUs.mainTitle"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-5xl font-extrabold text-center mb-12 text-yellow-400 animate-fade-in-down animate-vibrate"
                        />
                        <EditableText
                            tag="p"
                            contentKey="aboutUs.description"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up"
                        />

                        <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 mb-12 animate-fade-in-up">
                            <EditableText
                                tag="h2"
                                contentKey="aboutUs.historyTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-4xl font-bold mb-6 text-yellow-300 text-center"
                            />
                            <EditableText
                                tag="p"
                                contentKey="aboutUs.historyParagraph1"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed mb-6"
                            />
                            <EditableText
                                tag="p"
                                contentKey="aboutUs.historyParagraph2"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                        </section>

                        <section className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up">
                            <EditableText
                                tag="h2"
                                contentKey="aboutUs.valuesTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-4xl font-bold mb-6 text-yellow-300 text-center"
                            />
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <ValueCard
                                    titleKey="aboutUs.value1Title"
                                    descriptionKey="aboutUs.value1Description"
                                    icon={<WrenchIcon />}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value2Title"
                                    descriptionKey="aboutUs.value2Description"
                                    icon={<span className="text-3xl">✨</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value3Title"
                                    descriptionKey="aboutUs.value3Description"
                                    icon={<span className="text-3xl">✅</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                                <ValueCard
                                    titleKey="aboutUs.value4Title"
                                    descriptionKey="aboutUs.value4Description"
                                    icon={<span className="text-3xl">❤️</span>}
                                    isAdminAuthenticated={isAdminAuthenticated}
                                />
                            </div>
                        </section>
                    </div>
                </div>
            );
        };

        // Composant Carte de Valeur
        const ValueCard = ({ icon, titleKey, descriptionKey, isAdminAuthenticated }) => (
          <div className="group bg-gray-700 p-6 rounded-lg shadow-md flex items-start space-x-4 transition duration-300 ease-in-out transform hover:scale-105 border border-gray-600 hover:border-yellow-400">
            <div className="text-yellow-400 mb-4 text-4xl transition-colors duration-300 group-hover:text-yellow-300">{icon}</div>
            <div>
              <EditableText
                tag="h3"
                contentKey={titleKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-2xl font-semibold mb-2 text-white transition-colors duration-300 group-hover:text-yellow-100"
              />
              <EditableText
                tag="p"
                contentKey={descriptionKey}
                isAdminAuthenticated={isAdminAuthenticated}
                className="text-gray-300"
              />
            </div>
          </div>
        );

        // Composant Page Contact
        const ContactPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-2xl">
                        <EditableText
                            tag="h1"
                            contentKey="contact.mainTitle"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-5xl font-extrabold text-center mb-12 text-pink-400 animate-fade-in-down animate-vibrate"
                        />
                        <EditableText
                            tag="p"
                            contentKey="contact.description"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-xl text-center text-gray-300 max-w-xl mx-auto mb-10 animate-fade-in-up"
                        />

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-8">
                            <div className="flex flex-col items-center text-center">
                                <MailIcon className="text-pink-500 w-12 h-12 mb-4" />
                                <EditableText
                                    tag="h3"
                                    contentKey="contact.emailTitle"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    className="text-2xl font-semibold mb-2 text-white"
                                />
                                <a href={`mailto:${content.contact.email}`} className="text-blue-400 hover:underline text-lg transition duration-300">
                                    <EditableText
                                        tag="span"
                                        contentKey="contact.email"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-blue-400 hover:underline text-lg"
                                    />
                                </a>
                            </div>

                            <div className="flex flex-col items-center text-center">
                                <PhoneIcon className="text-pink-500 w-12 h-12 mb-4" />
                                <EditableText
                                    tag="h3"
                                    contentKey="contact.phoneTitle"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    className="text-2xl font-semibold mb-2 text-white"
                                />
                                <a href={`tel:${content.contact.phoneNumber.replace(/\./g, '')}`} className="text-blue-400 hover:underline text-lg transition duration-300">
                                    <EditableText
                                        tag="span"
                                        contentKey="contact.phoneNumber"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-blue-400 hover:underline text-lg"
                                    />
                                </a>
                            </div>

                            <div className="flex flex-col items-center text-center">
                                <InstagramIcon className="text-pink-500 w-12 h-12 mb-4" />
                                <EditableText
                                    tag="h3"
                                    contentKey="contact.instagramTitle"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                    className="text-2xl font-semibold mb-2 text-white"
                                />
                                <a href={`https://www.instagram.com/${content.contact.instagramHandle.replace('@', '')}`} target="_blank" rel="noopener noreferrer" className="text-blue-400 hover:underline text-lg transition duration-300">
                                    <EditableText
                                        tag="span"
                                        contentKey="contact.instagramHandle"
                                    isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-blue-400 hover:underline text-lg"
                                    />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Composant pour la page des mentions légales
        const LegalMentionsPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-4xl">
                        <EditableText
                            tag="h1"
                            contentKey="legalMentions.mainTitle"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-5xl font-extrabold text-center mb-12 text-teal-400 animate-fade-in-down animate-vibrate"
                        />
                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-6">
                            <EditableText
                                tag="h2"
                                contentKey="legalMentions.sectionTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="legalMentions.paragraph1"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                            <EditableText
                                tag="p"
                                contentKey="legalMentions.paragraph2"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                            <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list1Item1"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list1Item2"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list1Item3"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                            </ul>
                            <EditableText
                                tag="p"
                                contentKey="legalMentions.paragraph3"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                            <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list2Item1"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list2Item2"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="legalMentions.list2Item3"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                            </ul>
                            <EditableText
                                tag="p"
                                contentKey="legalMentions.paragraph4"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                        </div>
                    </div>
                </div>
            );
        };

        // Composant pour la page de politique de confidentialité
        const PrivacyPolicyPage = ({ isAdminAuthenticated }) => {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-4xl">
                        <EditableText
                            tag="h1"
                            contentKey="privacyPolicy.mainTitle"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-5xl font-extrabold text-center mb-12 text-purple-400 animate-fade-in-down animate-vibrate"
                        />
                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-6">
                            <EditableText
                                tag="h2"
                                contentKey="privacyPolicy.introTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="privacyPolicy.introText"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />

                            <EditableText
                                tag="h2"
                                contentKey="privacyPolicy.collectionTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="privacyPolicy.collectionText"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />

                            <EditableText
                                tag="h2"
                                contentKey="privacyPolicy.usageTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <ul className="list-disc list-inside text-lg text-gray-300 pl-4 space-y-2">
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="privacyPolicy.usageListItem1"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="privacyPolicy.usageListItem2"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="privacyPolicy.usageListItem3"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                            </ul>

                            <EditableText
                                tag="h2"
                                contentKey="privacyPolicy.protectionTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="privacyPolicy.protectionText"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />

                            <EditableText
                                tag="h2"
                                contentKey="privacyPolicy.rightsTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="privacyPolicy.rightsText"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                            {/* Assurez-vous que ce champ existe et est une chaîne de caractères dans content.json */}
                            <EditableText
                                tag="p"
                                contentKey="privacyPolicy.disclaimerText"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                        </div>
                    </div>
                </div>
            );
        };

        // Composant pour la page Voiture Vitrine
        const ShowcaseCarPage = ({ isAdminAuthenticated }) => {
            const { content } = useContext(ContentContext);
            const images = [
                `Photo1.png`,
                `photo2.png`,
                `photo3.png`,
                `photo4.png`,
                `photo5.png`,
                `photo6.png`,
                `photo7.png`,
                `photo8.png`,
                `photo9.png`,
                `photo10.png`
            ];

            const [currentImageIndex, setCurrentImageIndex] = useState(0);
            const [isPlaying, setIsPlaying] = useState(true); // Auto-play by default

            // Gère la lecture automatique du diaporama
            useEffect(() => {
                let interval;
                if (isPlaying) {
                    interval = setInterval(() => {
                        setCurrentImageIndex((prevIndex) =>
                            (prevIndex + 1) % images.length
                        );
                    }, 3000); // Change l'image toutes les 3 secondes
                }
                return () => clearInterval(interval); // Nettoyage de l'intervalle
            }, [isPlaying, images.length]); // Dépendances: isPlaying et la longueur du tableau d'images

            // Fonction pour passer à l'image précédente
            const goToPrevious = () => {
                setCurrentImageIndex((prevIndex) =>
                    prevIndex === 0 ? images.length - 1 : prevIndex - 1
                );
                setIsPlaying(false); // Met en pause la lecture automatique lors de l'interaction manuelle
            };

            // Fonction pour passer à l'image suivante
            const goToNext = () => {
                setCurrentImageIndex((prevIndex) =>
                    (prevIndex + 1) % images.length
                );
                setIsPlaying(false); // Met en pause la lecture automatique lors de l'interaction manuelle
            };

            // Fonction pour basculer entre lecture et pause de l'autoplay
            const togglePlayPause = () => {
                setIsPlaying(!isPlaying);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-950 to-emerald-950 text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-5xl">
                        <EditableText
                            tag="h1"
                            contentKey="showcaseCar.mainTitle"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-5xl font-extrabold text-center mb-12 text-yellow-400 animate-fade-in-down animate-vibrate"
                        />
                        <EditableText
                            tag="p"
                            contentKey="showcaseCar.description"
                            isAdminAuthenticated={isAdminAuthenticated}
                            className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up"
                        />

                        <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-8">
                            {/* Conteneur du carrousel avec centrage flexbox */}
                            <div className="relative w-full h-96 md:h-[500px] overflow-hidden rounded-lg shadow-2xl border-4 border-red-700 group flex items-center justify-center">
                                {/* Image actuelle du diaporama - Utilise object-contain pour afficher l'image entière */}
                                <img
                                    src={images[currentImageIndex]}
                                    alt={`Volkswagen Scirocco R - Image ${currentImageIndex + 1}`}
                                    className="w-full h-full object-contain object-center animate-fade-in transition-opacity duration-700"
                                    onError={(e) => {
                                        console.error(
                                            `ERREUR DE CHARGEMENT D'IMAGE dans le diaporama:
                                            Vérifiez l'URL exacte affichée ci-dessous dans votre navigateur.
                                            Vérifiez la CASSE (majuscules/minuscules) et l'EXTENSION du nom de fichier sur votre dépôt GitHub.
                                            URL échouée: ${e.target.src}`,
                                            e
                                        );
                                        e.target.onerror = null;
                                        e.target.src="https://placehold.co/800x500/FF0000/FFFFFF?text=Erreur+chargement+image";
                                    }}
                                />

                                {/* Boutons de navigation (précédent/suivant) */}
                                <button
                                    onClick={goToPrevious}
                                    className="absolute left-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-80 transition duration-300 opacity-0 group-hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white"
                                    aria-label="Image précédente"
                                >
                                    <ArrowLeftIcon />
                                </button>
                                <button
                                    onClick={goToNext}
                                    className="absolute right-4 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-80 transition duration-300 opacity-0 group-hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white"
                                    aria-label="Image suivante"
                                >
                                    <ArrowRightIcon />
                                </button>

                                {/* Bouton Play/Pause pour le diaporama automatique */}
                                <button
                                    onClick={togglePlayPause}
                                    className="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black bg-opacity50 text-white p-3 rounded-full hover:bg-opacity-80 transition duration-300 focus:outline-none focus:ring-2 focus:ring-white"
                                    aria-label={isPlaying ? "Mettre en pause le diaporama" : "Lancer le diaporama"}
                                >
                                    {isPlaying ? <PauseIcon /> : <PlayIcon />}
                                </button>

                                {/* Indicateurs de pagination (points) */}
                                <div className="absolute bottom-4 flex justify-center w-full space-x-2">
                                    {images.map((_, index) => (
                                        <button
                                            key={index}
                                            onClick={() => { setCurrentImageIndex(index); setIsPlaying(false); }}
                                            className={`w-3 h-3 rounded-full transition-colors duration-300 ${
                                                index === currentImageIndex ? 'bg-red-500' : 'bg-gray-400 hover:bg-gray-300'
                                            }`}
                                            aria-label={`Voir l'image ${index + 1}`}
                                        />
                                    ))}
                                </div>
                            </div>

                            <EditableText
                                tag="h2"
                                contentKey="showcaseCar.preparationTitle"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-3xl font-bold mb-4 text-white"
                            />
                            <EditableText
                                tag="p"
                                contentKey="showcaseCar.preparationDescription"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />

                            <ul className="list-disc list-inside text-lg text-gray-300 pl-6 space-y-2">
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.piston"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.bielles"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.soupapes"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.adm"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.ressort"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.viserie"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.pompeHuile"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.turbo"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.wastegate"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.injecteurs"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.pipAdmission"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.wmi"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                                <li>
                                    <EditableText
                                        tag="span"
                                        contentKey="showcaseCar.embrayage"
                                        isAdminAuthenticated={isAdminAuthenticated}
                                        className="text-lg text-gray-300"
                                    />
                                </li>
                            </ul>

                            <EditableText
                                tag="p"
                                contentKey="showcaseCar.finalDescription"
                                isAdminAuthenticated={isAdminAuthenticated}
                                className="text-lg text-gray-300 leading-relaxed"
                            />
                        </div>
                    </div>
                </div>
            );
        };

        // Composant de la page de connexion administrateur
        const AdminLoginPage = ({ setIsAdminAuthenticated, setCurrentPage }) => {
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            // Mot de passe pour l'administrateur. ATTENTION: Ce n'est PAS sécurisé pour une production !
            // Pour une production, ce mot de passe ne devrait pas être dans le code client.
            // Il serait envoyé à un backend pour vérification.
            const ADMIN_PASSWORD_FRONTEND = 'Remy03200!';

            const handleSubmit = (e) => {
                e.preventDefault();
                if (password === ADMIN_PASSWORD_FRONTEND) {
                    setIsAdminAuthenticated(true);
                    localStorage.setItem('isAdminAuthenticated', 'true'); // Stocke l'état d'authentification
                    setCurrentPage('admin-panel'); // Redirige vers le panneau admin
                } else {
                    setError('Mot de passe incorrect.');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black text-white pt-40 pb-12 font-inter flex items-center justify-center">
                    <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 w-full max-w-md animate-fade-in-up">
                        <h1 className="text-4xl font-extrabold text-center mb-4 text-orange-400">Accès Administrateur</h1>
                        {/* Nouvelle phrase ajoutée ici */}
                        <p className="text-center text-sm text-gray-400 mb-6 italic">Giovanni te souhaite la bienvenue et un bon courage !</p>
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <InputField
                                label="Mot de passe"
                                type="password"
                                placeholder="Entrez votre mot de passe"
                                required={true}
                                value={password}
                                onChange={(e) => { setPassword(e.target.value); setError(''); }}
                                name="adminPassword"
                            />
                            {error && <p className="text-red-500 text-sm text-center">{error}</p>}
                            <button
                                type="submit"
                                className="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                            >
                                Se connecter
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // Composant du panneau administrateur (contenu protégé)
        const AdminPanelPage = ({ setIsAdminAuthenticated, setCurrentPage }) => {
            const { content, updateContent } = useContext(ContentContext);
            // Initialiser localContent avec une copie profonde pour éviter les références directes
            // et s'assurer que même si content est null au début, localContent est un objet vide
            const [localContent, setLocalContent] = useState(() => JSON.parse(JSON.stringify(content || {})));
            const [saveMessage, setSaveMessage] = useState(''); // Message pour la sauvegarde
            const [isSaving, setIsSaving] = useState(false); // État pour le chargement de la sauvegarde

            // Gérer la catégorie actuellement sélectionnée pour l'édition
            const [selectedCategory, setSelectedCategory] = useState('home'); // Par défaut, 'home'

            // Met à jour l'état local quand le contenu global change (par exemple, après un rafraîchissement)
            useEffect(() => {
                setLocalContent(JSON.parse(JSON.stringify(content || {})));
                console.log("AdminPanelPage: Content state updated. localContent initialized:", JSON.parse(JSON.stringify(content || {})));
            }, [content]);

            // Fonction pour gérer les changements dans les champs de texte
            // Prend en charge les chemins imbriqués (ex: 'home.mainTitle' ou 'blog.posts.0.title')
            const handleLocalChange = (pageKey, fieldKey, newValue) => {
                console.log(`handleLocalChange: Attempting to update pageKey: "${pageKey}", fieldKey: "${fieldKey}", with newValue: "${newValue}"`);
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent)); // Deep copy
                    const targetPage = newContent[pageKey]; // Obtient l'objet de la page spécifique

                    if (!targetPage) {
                        console.error(`handleLocalChange: Page key "${pageKey}" not found in localContent.`);
                        return prevContent;
                    }

                    // Utilise la fonction utilitaire setNestedProperty pour définir la valeur
                    setNestedProperty(targetPage, fieldKey, newValue);

                    console.log(`handleLocalChange: Local change applied. New localContent:`, newContent);
                    return newContent;
                });
            };

            // Fonction pour ajouter un nouvel article de blog
            const handleAddBlogPost = () => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    if (!newContent.blog || !Array.isArray(newContent.blog.posts)) {
                        newContent.blog = { ...newContent.blog, posts: [] };
                    }
                    newContent.blog.posts.push({
                        id: Date.now(), // Utilise un timestamp comme ID unique
                        image: "https://placehold.co/600x400/000/FFF?text=Nouvelle+image",
                        title: "Nouveau titre d'article",
                        description: "Nouvelle description d'article."
                    });
                    return newContent;
                });
            };

            // Fonction pour supprimer un article de blog
            const handleRemoveBlogPost = (idToRemove) => {
                setLocalContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent));
                    if (newContent.blog && Array.isArray(newContent.blog.posts)) {
                        newContent.blog.posts = newContent.blog.posts.filter(post => post.id !== idToRemove);
                    }
                    return newContent;
                });
            };

            const handleSaveChanges = async () => {
                setIsSaving(true);
                setSaveMessage('Sauvegarde en cours...');
                console.log("AdminPanelPage: Initiating save. Sending content:", JSON.parse(JSON.stringify(localContent)));

                try {
                    // C'est ici que le frontend envoie les données au backend.
                    // Remplacez 'http://localhost:3001/api/save-content' par l'URL réelle de votre backend déployé.
                    const response = await fetch('http://localhost:3001/api/save-content', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            // IMPORTANT: Pour la démonstration, nous passons le mot de passe admin ici.
                            // En production, vous utiliseriez un système d'authentification basé sur des sessions ou des JWT
                            // après un processus de connexion sécurisé pour obtenir un token.
                            'Authorization': `Bearer Remy03200!` // Doit correspondre à ADMIN_PASSWORD_BACKEND dans le .env du backend
                        },
                        body: JSON.stringify(localContent) // Envoyer le contenu modifié
                    });

                    const data = await response.json();
                    if (response.ok) {
                        setSaveMessage(`Modifications sauvegardées avec succès sur GitHub ! ${data.commitUrl ? `Voir le commit: ${data.commitUrl}` : ''}`);
                        console.log("AdminPanelPage: Save successful. Response from backend:", data);
                        // Mettre à jour le contenu global avec le contenu local sauvegardé
                        // Cela est essentiel pour que l'application React reflète les changements après une sauvegarde réelle
                        // Utilise setNestedProperty pour propager les changements à l'état global
                        Object.keys(localContent).forEach(pageKey => {
                             const pageData = localContent[pageKey];
                             if (pageData) { // S'assurer que la page existe
                                 Object.keys(pageData).forEach(fieldKey => {
                                     // Pour les champs simples, on met à jour directement
                                     // Pour les tableaux comme 'posts', on met à jour l'objet complet
                                     const value = pageData[fieldKey];
                                     if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                                         // C'est un objet imbriqué (pas un tableau)
                                         Object.keys(value).forEach(nestedFieldKey => {
                                             updateContent(`${pageKey}.${fieldKey}.${nestedFieldKey}`, value[nestedFieldKey]);
                                         });
                                     } else if (Array.isArray(value)) {
                                         // Si c'est un tableau (comme 'posts'), on met à jour l'ensemble du tableau
                                         // Cela implique que les modifications des éléments du tableau sont déjà dans 'localContent'
                                         updateContent(`${pageKey}.${fieldKey}`, value);
                                     } else {
                                         updateContent(`${pageKey}.${fieldKey}`, value);
                                     }
                                 });
                             }
                        });
                        console.log("AdminPanelPage: Global content update triggered.");
                    } else {
                        setSaveMessage(`Erreur de sauvegarde : ${data.message || 'Problème serveur'}`);
                        console.error('AdminPanelPage: Erreur backend:', data);
                    }
                } catch (error) {
                    console.error('AdminPanelPage: Erreur réseau lors de la sauvegarde:', error);
                    setSaveMessage(`Erreur réseau. Impossible de contacter le serveur backend. Assurez-vous qu'il est en ligne et accessible (${error.message}).`);
                } finally {
                    setIsSaving(false);
                    setTimeout(() => setSaveMessage(''), 10000); // Masquer le message après 10 secondes
                }
            };

            const handleLogout = () => {
                setIsAdminAuthenticated(false);
                localStorage.removeItem('isAdminAuthenticated'); // Supprime l'état d'authentification
                setCurrentPage('accueil'); // Redirige vers l'accueil après déconnexion
            };

            // Définir les catégories et leur affichage (titre convivial)
            const categories = {
                home: "Accueil",
                blog: "Blog",
                quiSommesNous: "Qui Sommes-nous",
                contact: "Contact",
                legalMentions: "Mentions Légales",
                privacyPolicy: "Politique de Confidentialité",
                showcaseCar: "Voiture Vitrine"
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black text-white pt-40 pb-12 font-inter">
                    <div className="container mx-auto px-6 max-w-6xl">
                        <h1 className="text-5xl font-extrabold text-center mb-12 text-orange-400 animate-fade-in-down animate-vibrate">
                            Panneau d'Administration
                        </h1>
                        <p className="text-xl text-center text-gray-300 max-w-3xl mx-auto mb-10 animate-fade-in-up">
                            Bienvenue, administrateur. Ici, vous pouvez gérer le contenu du site.
                        </p>

                        {/* Navigation des catégories */}
                        <div className="flex flex-wrap justify-center gap-4 mb-8 p-4 bg-gray-800 rounded-xl shadow-lg border border-gray-700">
                            {Object.keys(categories).map(categoryKey => (
                                <button
                                    key={categoryKey}
                                    onClick={() => setSelectedCategory(categoryKey)}
                                    className={`py-2 px-5 rounded-full font-semibold transition-all duration-300 ease-in-out
                                                ${selectedCategory === categoryKey
                                                    ? 'bg-blue-600 text-white shadow-md transform scale-105'
                                                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white'
                                                }`}
                                >
                                    {categories[categoryKey]}
                                </button>
                            ))}
                        </div>
                        {/* Fragment React pour envelopper les éléments adjacents */}
                        <>
                            <div className="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 animate-fade-in-up space-y-8">
                                {/* Affichage du contenu de la catégorie sélectionnée */}
                                {localContent[selectedCategory] && (
                                    <div className="mb-8 p-6 bg-gray-700 rounded-lg shadow-inner border border-gray-600">
                                        <h2 className="text-3xl font-bold mb-6 text-blue-400 capitalize border-b-2 border-blue-600 pb-3">
                                            {categories[selectedCategory]} (Modification)
                                        </h2>
                                        <div className="space-y-6">
                                            {Object.keys(localContent[selectedCategory]).map(fieldKey => {
                                                const fieldValue = localContent[selectedCategory][fieldKey];
                                                const contentPath = `${selectedCategory}.${fieldKey}`;

                                                // Gérer la section des posts du blog séparément
                                                if (selectedCategory === 'blog' && fieldKey === 'posts' && Array.isArray(fieldValue)) {
                                                    return (
                                                        <div key={contentPath} className="mt-8 pt-6 border-t-2 border-green-600">
                                                            <h3 className="text-2xl font-bold mb-4 text-green-300">Articles de Blog</h3>
                                                            <button
                                                                onClick={handleAddBlogPost}
                                                                className="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 mb-6"
                                                            >
                                                                Ajouter un nouvel article
                                                            </button>
                                                            <div className="space-y-8 mt-4">
                                                                {localContent.blog.posts.map((post, index) => (
                                                                    <div key={post.id || `blog-edit-${index}`} className="p-5 bg-gray-600 rounded-lg shadow-md border border-gray-500 relative">
                                                                        <h4 className="text-xl font-semibold mb-3 text-white">Article #{index + 1}</h4>
                                                                        <button
                                                                            onClick={() => handleRemoveBlogPost(post.id)}
                                                                            className="absolute top-3 right-3 bg-red-500 hover:bg-red-600 text-white p-2 rounded-full text-sm"
                                                                            aria-label="Supprimer l'article"
                                                                        >
                                                                            <XIcon className="w-4 h-4"/>
                                                                        </button>
                                                                        <div className="space-y-4">
                                                                            <div>
                                                                                <label className="block text-gray-300 text-sm font-bold mb-2">Titre de l'article:</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={post.title || ''}
                                                                                    onChange={(e) => handleLocalChange('blog', `posts.${index}.title`, e.target.value)}
                                                                                    className="w-full p-2 rounded bg-gray-500 text-white border border-gray-400 focus:ring-green-500 focus:border-green-500"
                                                                                />
                                                                            </div>
                                                                            <div>
                                                                                <label className="block text-gray-300 text-sm font-bold mb-2">Description de l'article:</label>
                                                                                <textarea
                                                                                    value={post.description || ''}
                                                                                    onChange={(e) => {
                                                                                        const newValue = e.target.value;
                                                                                        console.log(`Blog Description Change: Index: ${index}, New Value: "${newValue}"`);
                                                                                        handleLocalChange('blog', `posts.${index}.description`, newValue);
                                                                                    }}
                                                                                    rows={Math.max(3, (post.description || '').split('\n').length)}
                                                                                    className="w-full p-2 rounded bg-gray-500 text-white border border-gray-400 focus:ring-green-500 focus:border-green-500 resize-y"
                                                                                />
                                                                            </div>
                                                                            <div>
                                                                                <label className="block text-gray-300 text-sm font-bold mb-2">Nom de fichier image (ex: IMG_9611.png):</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={post.image || ''}
                                                                                    onChange={(e) => handleLocalChange('blog', `posts.${index}.image`, e.target.value)}
                                                                                    className="w-full p-2 rounded bg-gray-500 text-white border border-gray-400 focus:ring-green-500 focus:border-green-500"
                                                                                />
                                                                                <p className="text-gray-400 text-xs mt-1">
                                                                                    Assurez-vous que l'image est téléversée dans votre dépôt GitHub à la racine. Seul le nom du fichier est requis ici.
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                ))}
                                                            </div>
                                                        </div>
                                                    );
                                                }

                                                // Rendu des autres champs
                                                const valueToDisplay = typeof fieldValue === 'string' ? fieldValue : '';
                                                const inputType = (fieldKey.includes('Title') || fieldKey.includes('email') || fieldKey.includes('phone') || fieldKey.includes('instagram') || fieldKey.includes('Handle')) ? 'text' : 'textarea';
                                                const rows = (inputType === 'textarea' && typeof valueToDisplay === 'string') ? Math.max(3, valueToDisplay.split('\n').length) : undefined;

                                                return (
                                                    <div key={contentPath} className="pb-4 border-b border-gray-600 last:border-b-0">
                                                        <label className="block text-gray-300 text-sm font-bold mb-2">
                                                            {fieldKey.replace(/([A-Z])/g, ' $1').replace(/([0-9])/g, ' $1').trim()}:
                                                        </label>
                                                        {inputType === 'text' ? (
                                                            <input
                                                                type="text"
                                                                value={valueToDisplay}
                                                                onChange={(e) => handleLocalChange(selectedCategory, fieldKey, e.target.value)}
                                                                className="w-full p-2 rounded bg-gray-600 text-white border border-gray-500 focus:ring-blue-500 focus:border-blue-500"
                                                            />
                                                        ) : (
                                                            <textarea
                                                                value={valueToDisplay}
                                                                onChange={(e) => handleLocalChange(selectedCategory, fieldKey, e.target.value)}
                                                                rows={rows}
                                                                className="w-full p-2 rounded bg-gray-600 text-white border border-gray-500 focus:ring-blue-500 focus:border-blue-500 resize-y"
                                                            />
                                                        )}
                                                        {typeof fieldValue !== 'string' && (
                                                            <p className="text-red-400 text-sm mt-1">
                                                                Ce champ ({contentPath}) n'est pas une chaîne de caractères ou est manquant dans content.json. Il sera enregistré comme une chaîne vide si vous le modifiez.
                                                            </p>
                                                        )}
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}

                                {/* Message si aucune catégorie n'est sélectionnée ou si le contenu est vide */}
                                {!selectedCategory || !localContent[selectedCategory] && (
                                    <p className="text-center text-gray-400 text-xl mt-10">
                                        Veuillez sélectionner une catégorie à modifier ci-dessus.
                                    </p>
                                )}
                            </div>

                            <div className="flex justify-center space-x-4 mt-8">
                                    <button
                                        onClick={handleSaveChanges}
                                        className="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
                                        disabled={isSaving} // Désactiver le bouton pendant la sauvegarde
                                    >
                                        {isSaving ? 'Sauvegarde...' : 'Enregistrer les modifications'}
                                    </button>
                                    <button
                                        onClick={handleLogout}
                                        className="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                                    >
                                        Déconnexion
                                    </button>
                                </div>
                                {saveMessage && (
                                    <p className="text-center text-yellow-400 mt-4 text-md animate-fade-in">
                                        {saveMessage}
                                    </p>
                                )}
                        </>
                    </div>
                </div>
            );
        };


        // Nouveau composant pour le contrôle de la musique
        const MusicControl = () => {
            const audioRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [showAutoplayMessage, setShowAutoplayMessage] = useState(false); // Nouvel état pour le message d'autoplay

            useEffect(() => {
                const audio = document.getElementById('background-music');
                if (audio) {
                    audioRef.current = audio;

                    // Tentative de lecture automatique
                    const playPromise = audio.play();
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            // Lecture automatique réussie
                            setIsPlaying(true);
                        }).catch(error => {
                            // Lecture automatique bloquée
                            console.log("La lecture automatique de la musique a été bloquée. L'utilisateur peut la démarrer manuellement.", error);
                            setIsPlaying(false); // S'assurer que l'état reflète que la musique ne joue pas
                            setShowAutoplayMessage(true); // Afficher le message
                            // Masquer le message après 5 secondes si l'utilisateur n'interagit pas
                            setTimeout(() => {
                                setShowAutoplayMessage(false);
                            }, 5000);
                        });
                    }

                    // Mettre à jour l'état isPlaying si la lecture est interrompue par l'utilisateur ou le système
                    const handleAudioPause = () => setIsPlaying(false);
                    const handleAudioPlay = () => setIsPlaying(true);

                    audio.addEventListener('pause', handleAudioPause);
                    audio.addEventListener('play', handleAudioPlay);

                    // Nettoyage de l'effet
                    return () => {
                        audio.removeEventListener('pause', handleAudioPause);
                        audio.removeEventListener('play', handleAudioPlay);
                    };
                }
            }, []); // S'exécute une seule fois au montage du composant

            const togglePlayPause = () => {
                const audio = audioRef.current;
                if (audio) {
                    if (isPlaying) {
                        audio.pause();
                    } else {
                        // Tenter de jouer la musique. C'est ici que le navigateur pourrait encore bloquer si ce n'est pas initié par un geste utilisateur fort.
                        audio.play().then(() => {
                            setIsPlaying(true);
                            setShowAutoplayMessage(false); // Masquer le message si l'utilisateur interagit
                        }).catch(error => {
                            console.error("Erreur lors de la tentative de lecture par le bouton:", error);
                            // Optionnel: Afficher un message à l'utilisateur si la lecture échoue même avec le clic
                            // Utilisez une modal personnalisée si vous voulez une meilleure UX que alert()
                             // alert("Impossible de lire la musique. Votre navigateur pourrait bloquer la lecture automatique.");
                        });
                    }
                    // La mise à jour de l'état isPlaying se fait maintenant dans les handlers 'play' et 'pause' ou dans le .then()
                }
            };

            return (
                <>
                    <button
                        onClick={togglePlayPause}
                        className="fixed bottom-8 right-8 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-110 active:scale-90 z-50 flex items-center justify-center w-14 h-14"
                        aria-label={isPlaying ? "Mettre la musique en pause" : "Jouer la musique"}
                    >
                        {isPlaying ? <PauseIcon /> : <PlayIcon />}
                    </button>
                    {showAutoplayMessage && (
                        <div className="fixed bottom-24 right-8 bg-yellow-500 text-gray-900 px-4 py-2 rounded-lg shadow-lg text-sm animate-fade-in z-50">
                            Cliquez sur le bouton de lecture pour lancer la musique !
                        </div>
                    )}
                </>
            );
        };


        // Composant principal de l'application
        const App = () => {
            // Initialise isAdminAuthenticated en lisant depuis localStorage
            const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(
                localStorage.getItem('isAdminAuthenticated') === 'true'
            );
            const [currentPage, setCurrentPage] = useState('accueil');
            const [content, setContent] = useState(null); // Initialiser à null, sera chargé depuis le JSON
            const [loadingContent, setLoadingContent] = useState(true); // État de chargement du contenu
            const [errorContent, setErrorContent] = useState(null); // État d'erreur de chargement du contenu
            const [renderError, setRenderError] = useState(null); // Nouvel état pour les erreurs de rendu

            // Fonction pour charger le contenu depuis content.json
            useEffect(() => {
                const fetchContent = async () => {
                    console.log("App: Attempting to fetch content.json...");
                    try {
                        const response = await fetch('content.json'); // Assurez-vous que content.json est à la racine de votre dépôt
                        if (!response.ok) {
                            const errorText = await response.text(); // Try to get more details from the response
                            throw new Error(`Erreur HTTP: ${response.status}. Réponse: ${errorText.substring(0, 200)}...`);
                        }
                        const data = await response.json();
                        setContent(data);
                        console.log("App: content.json loaded successfully:", data);
                    } catch (error) {
                        console.error("App: Erreur lors du chargement de content.json:", error);
                        setErrorContent(`Impossible de charger le contenu du site. Détails: ${error.message}`);
                        // Fallback vers un contenu par défaut si le chargement échoue
                        setContent({
                            home: {
                                mainTitle: "BRMOTORSPORT",
                                description: "Spécialiste de la reprogrammation moteur et de l'optimisation de véhicules. Performance, fiabilité et satisfaction client sont nos maîtres mots.",
                                contactMessage: "Contactez-nous dès aujourd'hui pour transformer votre véhicule !"
                            },
                            blog: {
                                mainTitle: "Notre Blog BRMOTORSPORT",
                                description: "Découvrez nos dernières actualités, projets et optimisations automobiles.",
                                posts: [
                                    { id: 1, image: "IMG_9611.png", title: "Porsche Cayenne V8 Bi-Turbo : Optimisation Moteur", description: "Découvrez notre travail sur cette bête de course, avec des améliorations de performances significatives pour une expérience de conduite ultime." },
                                    { id: 2, image: "IMG_9609.png", title: "BMW Série 2 : Reprogrammation et FAP OFF", description: "Optimisation de la BMW Série 2 avec suppression du FAP et reprogrammation moteur pour une performance accrue et une meilleure réactivité." },
                                    { id: 3, image: "IMG_9607.png", title: "VW Golf GTI : Boost de Performance Ultime", description: "La Golf GTI a retrouvé sa jeunesse avec une augmentation de puissance notable. Un véritable plaisir de conduite redécouvert !" },
                                    { id: 4, image: "IMG_9608.png", title: "Seat Ibiza : Amélioration de la Réactivité Moteur", description: "Transformation de cette Seat Ibiza pour une meilleure réponse à l'accélération et à une conduite plus dynamique. Un plaisir garantini." },
                                    { id: 5, image: "IMG_9610.png", title: "VW Golf 5 GTI : Mise à Jour Cartographie", description: "Une mise à Jour complète de la cartographie pour cette Golf 5 GTI, optimisant la puissance et la consommation. Plus performante que jamais !" },
                                    { id: 6, image: "Photopeugeot.png", title: "Peugeot 206 1.4 HDi : Préparation Complète et Optimisation", description: "Rien n'a été laissé au hasard sur cette magnifique 206 1.4 hdi : mécanique (embrayage renforcé, turbo 1.6hdi v2, graissage renforcé, EGR off, filtre à carburant modifié, collecteur d'échappement modifié, reprogrammation sur mesure, admission sur mesure, dégazage haut moteur réaspiré, ligne tube 51mm, boost contrôleur avec réglage optimum), châssis (décrantage train arrière, combinés KW, jantes alu 16, réflexion train roulant à neuf), esthétique (passage de coque en blanc, peinture banquette couleur carrosserie, béquet 206 Rc, peinture blanche jantes, intérieur complet 206 Rc, clignotant latéral led)." },
                                    { id: 7, image: "Seat1.png", title: "Seat Leon : Optimisation Moteur Stage 2 (2.0 TDI 170 @230)", description: "Découvrez l'optimisation de cette Seat Leon : FAP off, EGR off, et Reprogrammation Stage 2 pour des performances accrues, passant de 170 à 230 chevaux et un couple de 370 à 450 Nm." },
                                    { id: 8, image: "anciennevoiture.png", title: "Ancienne Voiture : Dépannage Express et Remplacement Bobine", description: "Tombée en panne un dimanche, nous avons diagnostiqué et résolu le problème en 1h. Notre client a pu repartir avec sa voiture, grâce à une recherche de panne efficace et le remplacement de la bobine. Votre tranquillité, notre priorité." },
                                    { id: 9, image: "audi1.png", title: "Audi 1.5 TFSI 150 : Optimisation Stage 1 et TCU", description: "Optimisation de cette Audi 1.5 TFSI, avec un passage de 150 à 180 chevaux (Stage 1) et une modification de l'unité de contrôle de la transmission (TCU mod 1) pour une meilleure réactivité." },
                                    { id: 10, image: "gx.png", title: "Triumph TR3 : Check-up Complet et Optimisation", description: "Réalisation d'un check-up complet sur cette Triumph TR3, assurant son bon fonctionnement et sa fiabilité. Votre sécurité et performance sont notre priorité." },
                                    { id: 11, image: "mercedes2021.png", title: "Mercedes (2021) : Solution ADBLUE", description: "Mise en place d'une solution AdBlue pour ce modèle Mercedes 2021, garantissant la conformité environnementale et le bon fonctionnement du système." }
                                ]
                            },
                            aboutUs: {
                                mainTitle: "Qui sommes-nous ?",
                                description: "BRMOTORSPORT est votre partenaire de confiance pour l'optimisation automobile. Fondée sur la passion de la performance et de la mécanique, notre entreprise s'engage à offrir des services de reprogrammation moteur, de préparation de véhicules et de diagnostics électroniques de pointe.",
                                historyTitle: "Notre Histoire",
                                historyParagraph1: "Notre aventure a débuté il y a plusieurs années, animée par une vision : celle de repousser les limites de la performance automobile tout en garantissant une fiabilité et une sécurité optimales. Forts d'une expertise technique approfondie et d'une passion inébranlable pour les voitures, nous avons bâti BRMOTORSPORT sur des valeurs de précision, d'innovation et de dévouement. Chaque véhicule qui passe entre nos mains est traité avec le plus grand soin, comme si c'était le nôtre.",
                                historyParagraph2: "Au fil des ans, nous avons développé des compétences uniques en reprogrammation sur mesure, en travaillant avec les technologies les plus avancées pour extraire le potentiel caché de chaque moteur. Notre histoire est marquée par des milliers de clients satisfaits, des voitures transformées et une réputation bâtie sur l'excellence. Nous sommes fiers de notre parcours et de l'impact que nous avons sur la performance et le plaisir de conduite de nos clients.",
                                valuesTitle: "Nos Valeurs",
                                value1Title: "Expertise Technique",
                                value1Description: "Une connaissance approfondie des systèmes moteurs et des technologies d'optimisation."
                            },
                            contact: {
                                mainTitle: "Contactez-nous",
                                description: "Nous sommes là pour répondre à toutes vos questions et vous accompagner dans vos projets d'optimisation automobile.",
                                emailTitle: "Email",
                                email: "contact@brmotorsport.com",
                                phoneTitle: "Téléphone",
                                phoneNumber: "06.12.34.56.78",
                                instagramTitle: "Instagram",
                                instagramHandle: "@brmotorsport_official"
                            },
                            legalMentions: {
                                mainTitle: "Mentions Légales",
                                sectionTitle: "Informations Générales",
                                paragraph1: "Ce site web est édité par BRMOTORSPORT.",
                                paragraph2: "Adresse : [Votre Adresse Complète]",
                                list1Item1: "Numéro de téléphone : [Votre Numéro de Téléphone]",
                                list1Item2: "Adresse e-mail : [Votre E-mail]",
                                list1Item3: "Numéro d'immatriculation : [Votre Numéro SIRET/RCS]",
                                paragraph3: "Directeur de la publication : Monsieur [Votre Nom]",
                                list2Item1: "Hébergeur : GitHub Pages",
                                list2Item2: "Adresse : [Adresse de GitHub]",
                                list2Item3: "Site web : https://github.com",
                                paragraph4: "Propriété intellectuelle : L'ensemble des éléments de ce site (textes, images, graphismes, logos, icônes, etc.) est la propriété exclusive de BRMOTORSPORT, sauf mention contraire. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments du site, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable de BRMOTORSPORT."
                            },
                            privacyPolicy: {
                                mainTitle: "Politique de Confidentialité",
                                introTitle: "Introduction",
                                introText: "La présente politique de confidentialité décrit comment BRMOTORSPORT collecte, utilise et protège vos informations personnelles lorsque vous utilisez notre site web.",
                                collectionTitle: "Collecte des Informations Personnelles",
                                collectionText: "Nous collectons des informations lorsque vous nous contactez via le formulaire de contact, lorsque vous naviguez sur notre site, ou lorsque vous interagissez avec nos services. Les informations collectées peuvent inclure votre nom, adresse e-mail, numéro de téléphone, et toute autre information que vous choisissez de nous fournir.",
                                usageTitle: "Utilisation des Informations",
                                usageListItem1: "Pour répondre à vos demandes et vous fournir les services que you avez sollicités.",
                                usageListItem2: "Pour améliorer notre site web et nos offres de services.",
                                usageListItem3: "Pour vous envoyer des communications marketing (avec votre consentement).",
                                protectionTitle: "Protection des Informations",
                                protectionText: "Nous mettons en œuvre diverses mesures de sécurité pour maintenir la sûreté de vos informations personnelles. Seuls les employés qui ont besoin d'effectuer un travail spécifique (par exemple, la facturation ou le service client) ont accès aux informations personnelles identifiables.",
                                rightsTitle: "Vos Droits",
                                rightsText: "Conformément au Règlement Général sur la Protection des Données (RGPD), vous disposez d'un droit d'accès, de rectification, de suppression et d'opposition au traitement de vos données personnelles. Pour exercer ces droits, veuillez nous contacter à [Votre Adresse E-mail].",
                                disclaimerText: "Cette politique de confidentialité peut être mise à jour occasionnellement. Nous vous invitons à la consulter régulièrement."
                            },
                            showcaseCar: {
                                mainTitle: "Notre Voiture Vitrine",
                                description: "Découvrez notre dernière préparation exceptionnelle : une Volkswagen Scirocco R avec une optimisation Stage 3 poussée, développant plus de 500 chevaux.",
                                preparationTitle: "Détails de la Préparation Stage 3",
                                preparationDescription: "Ce véhicule a subi une transformation complète pour atteindre des niveaux de performance extrêmes, tout en conservant une fiabilité optimale.",
                                piston: "Pistons forgés",
                                bielles: "Bielles forgées",
                                soupapes: "Soupapes renforcées",
                                adm: "Admission gros volume",
                                ressort: "Ressorts de soupapes renforcés",
                                viserie: "Vis de bielles, vilebrequin et culasse renforcées",
                                pompeHuile: "Pompe à huile gros débit",
                                turbo: "Turbo hybride sur mesure",
                                wastegate: "Wastegate externe",
                                injecteurs: "Injecteurs gros débit",
                                pipAdmission: "Pipe d'admission gros volume",
                                wmi: "Système WMI (Water-Methanol Injection)",
                                embrayage: "Embrayage renforcé",
                                finalDescription: "Chaque composant a été soigneusement sélectionné et installé pour garantir une synergie parfaite et une expérience de conduite inégalée sur route comme sur circuit."
                            }
                        });
                    } finally {
                        setLoadingContent(false);
                    }
                };

                fetchContent();
            }, []); // S'exécute une seule fois au montage du composant

            // Fonction pour mettre à jour une partie spécifique du contenu
            const updateContent = (keyPath, newValue) => {
                setContent(prevContent => {
                    const newContent = JSON.parse(JSON.stringify(prevContent)); // Deep copy
                    setNestedProperty(newContent, keyPath, newValue);
                    console.log(`App: Global content updated via updateContent for ${keyPath}. New content state:`, newContent);
                    return newContent;
                });
            };

            // Fonction de déconnexion de l'administrateur
            const handleLogout = () => {
                setIsAdminAuthenticated(false);
                localStorage.removeItem('isAdminAuthenticated'); // Supprime l'état d'authentification de localStorage
                setCurrentPage('accueil'); // Redirige vers l'accueil après déconnexion
            };

            // Ajout d'un effet pour faire défiler la page vers le haut à chaque changement de page
            useEffect(() => {
                window.scrollTo(0, 0); // Fait défiler la fenêtre à la position 0, 0 (en haut à gauche)
            }, [currentPage]); // Se déclenche à chaque fois que `currentPage` change

            if (loadingContent) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-black text-white text-3xl">
                        Chargement du contenu...
                    </div>
                );
            }

            // Affiche l'erreur de chargement de contenu (par exemple, si content.json n'existe pas)
            if (errorContent) {
                return (
                    <div className="min-h-screen flex items-center justify-center bg-red-900 text-white text-xl p-4 text-center">
                        Erreur de chargement du site : {errorContent}
                        <br/><br/>
                        Vérifiez la console du navigateur (F12) pour plus de détails.
                    </div>
                );
            }

            // Fonction de rendu du contenu de la page en fonction de l'état
            const renderPageContent = () => {
              switch (currentPage) {
                case 'accueil':
                  return <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
                case 'blog':
                  return <BlogPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'qui-sommes-nous':
                  return <AboutUsPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'contact':
                  return <ContactPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'mentions-legales':
                  return <LegalMentionsPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'confidentialite':
                  return <PrivacyPolicyPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'voiture-vitrine':
                  return <ShowcaseCarPage isAdminAuthenticated={isAdminAuthenticated} />;
                case 'admin-login':
                  return <AdminLoginPage setIsAdminAuthenticated={setIsAdminAuthenticated} setCurrentPage={setCurrentPage} />;
                case 'admin-panel':
                  // Si l'utilisateur n'est pas authentifié, le rediriger vers la page de connexion admin
                  if (!isAdminAuthenticated) {
                    setCurrentPage('admin-login');
                    return null; // ou un composant de chargement/redirection
                  }
                  return <AdminPanelPage setIsAdminAuthenticated={setIsAdminAuthenticated} setCurrentPage={setCurrentPage} />;
                default:
                  return <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />;
              }
            };

            // Capture les erreurs de rendu React
            try {
                // Effet pour masquer le message d'initialisation initial après le premier rendu de App
                useEffect(() => {
                    const initialLoadingMessage = document.getElementById('initial-loading-message');
                    if (initialLoadingMessage) {
                        initialLoadingMessage.style.display = 'none';
                        console.log("Message d'initialisation masqué par React App.");
                    }
                }, []); // S'exécute une seule fois après le premier rendu de App

                return (
                    <ContentContext.Provider value={{ content, updateContent }}>
                        <div className="min-h-screen bg-black font-inter">
                            <ScrollingBanner /> {/* Nouvelle bannière défilante */}
                            {/* Passe isAdminAuthenticated et handleLogout à Navbar */}
                            <Navbar setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} handleLogout={handleLogout} />
                            <main className="flex-grow">
                                {renderPageContent()} {/* Appelle la fonction de rendu de page */}
                            </main>
                            <MusicControl /> {/* Ajout du contrôle de musique */}
                            <footer className="bg-gray-900 bg-opacity-90 backdrop-blur-sm text-gray-400 py-6 text-center shadow-inner rounded-t-lg">
                                <div className="container mx-auto px-4">
                                    <p>&copy; {new Date().getFullYear()} BRMOTORSPORT. Tous droits réservés.</p>
                                    <div className="flex justify-center space-x-4 mt-3">
                                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('confidentialite'); }} className="hover:text-red-500 transition duration-300">Confidentialité</a>
                                        <span className="text-gray-600">|</span>
                                        <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('mentions-legales'); }} className="hover:text-red-500 transition duration-300">Mentions Légales</a>
                                        <span className="text-gray-600">|</span>
                                        {/* Lien Admin/Déconnexion conditionnel dans le footer */}
                                        {isAdminAuthenticated ? (
                                            <a href="#" onClick={(e) => { e.preventDefault(); handleLogout(); }} className="hover:text-red-500 transition duration-300">Déconnexion</a>
                                        ) : (
                                            <a href="#" onClick={(e) => { e.preventDefault(); setCurrentPage('admin-login'); }} className="hover:text-red-500 transition duration-300">Admin</a>
                                        )}
                                    </div>
                                    <p className="text-sm mt-2">Réalisé avec passion par Viremot Giovanni</p>
                                </div>
                            </footer>
                        </div>
                    </ContentContext.Provider>
                );
            } catch (e) {
                // Si une erreur se produit pendant le rendu de l'interface utilisateur, affichez-la
                console.error("Erreur de rendu de l'application:", e);
                return (
                    <div className="min-h-screen flex items-center justify-center bg-red-900 text-white text-xl p-4 text-center">
                        Une erreur inattendue s'est produite lors de l'affichage du site.
                        <br/><br/>
                        Détails : ${e.message}
                        <br/><br/>
                        Vérifiez la console du navigateur (F12) pour plus d'informations.
                    </div>
                );
            }
        };

        // Rendu de l'application React dans l'élément HTML avec l'ID 'root'
        // ENVELOPPEZ L'APP DANS DOMContentLoaded POUR ASSURER QUE LE DOM EST PRÊT
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('root');
            if (container) {
                console.log("DOMContentLoaded: Tentative de rendu de l'application React...");
                try {
                    const root = ReactDOM.createRoot(container);
                    root.render(<App />);
                    console.log("ReactDOM.render(<App />) appelé avec succès.");
                } catch (renderErr) {
                    console.error("Erreur lors du rendu de l'application React (catch bloc):", renderErr);
                    const errorDiv = document.createElement('div');
                    errorDiv.className = "min-h-screen flex items-center justify-center bg-red-900 text-white text-xl p-4 text-center";
                    errorDiv.innerHTML = `
                        Une erreur inattendue s'est produite lors du rendu de l'application.
                        <br/><br/>
                        Détails : ${renderErr.message}
                        <br/><br/>
                        Vérifiez la console du navigateur (F12) pour plus d'informations.
                    `;
                    document.body.innerHTML = ''; // Efface le contenu existant
                    document.body.appendChild(errorDiv); // Ajoute le message d'erreur
                }
            } else {
                console.error("L'élément avec l'ID 'root' n'a pas été trouvé dans le DOM. L'application React ne peut pas être montée.");
            }
        });
    </script>
</body>
</html>
