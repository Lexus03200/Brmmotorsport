<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRMOTORSPORT - Performance Automobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Montserrat:wght@700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-y: scroll;
            background-color: black; /* Fond Noir Pur */
        }
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes scrollText {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-100%); }
        }
        @keyframes slideInFromLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes vibrate {
            0% { transform: translate(0px, 0px); }
            25% { transform: translate(-0.5px, 0.5px); }
            50% { transform: translate(0.5px, -0.5px); }
            75% { transform: translate(-0.5px, -0.5px); }
            100% { transform: translate(0px, 0px); }
        }

        .animate-fade-in-down { animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        .animate-vibrate { animation: vibrate 0.15s ease-in-out infinite; }
        .scrolling-banner-text { display: inline-block; white-space: nowrap; animation: scrollText 30s linear infinite; }
        .scrolling-banner-container { overflow: hidden; }
        .animate-slide-in-left { animation: slideInFromLeft 1s ease-out forwards; }

        .lightbox-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.9); display: flex; justify-content: center; align-items: center; z-index: 100; }
        .lightbox-content { position: relative; max-width: 90%; max-height: 90%; }
        .lightbox-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 0.75rem; }
        .navbar-transition { transition: transform 0.3s ease-in-out; }
        .navbar-hidden { transform: translateY(-100%); }
        .navbar-visible { transform: translateY(0); }
    </style>
</head>
<body class="min-h-screen bg-black font-inter">
    <audio id="background-music" autoplay loop volume="0.01" style="display:none;">
        <source src="musique.mp3" type="audio/mpeg">
    </audio>

    <div id="root" class="overflow-x-hidden"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, createContext, useContext } = React;

        // --- ICONS ---
        const CarIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 17H5c-1.1 0-2 .9-2 2v2h18v-2c0-1.1-.9-2-2-2Z"/><path d="M7 17V5h12v12"/><path d="M18 10h-8"/><path d="M10 10v7"/></svg>);
        const StarIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>);
        const RssIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>);
        const UsersIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87L16 16"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>);
        const PhoneIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2H7c.43 0 .79.27.94.66.14.39.07.82-.2 1.1L5.05 6.05c-.35.35-.5.85-.34 1.34A19.79 19.79 0 0 0 16.92 19c.49.16.99.01 1.34-.34l2.29-2.29c.28-.27.71-.34 1.1-.2.39.14.66.5.66.94Z"/></svg>);
        const PauseIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="6" y="4" width="4" height="16" rx="1"/><rect x="14" y="4" width="4" height="16" rx="1"/></svg>);
        const PlayIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>);
        const ArrowUpIcon = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 19V5"/><path d="m5 12 7-7 7 7"/></svg>);

        const ContentContext = createContext();

        const EditableText = ({ tag: Tag, contentKey, isAdminAuthenticated, className }) => {
            const { content, updateContent } = useContext(ContentContext);
            const getValue = (obj, path) => {
                let current = obj;
                for (let part of path.split('.')) {
                    if (current && current[part] !== undefined) current = current[part];
                    else return "";
                }
                return current;
            };
            const textValue = content ? getValue(content, contentKey) : "...";
            if (isAdminAuthenticated) {
                return <textarea value={textValue} onChange={(e) => updateContent(contentKey, e.target.value)} className={`${className} bg-gray-800 text-white rounded p-2 w-full`} />;
            }
            return <Tag className={className} dangerouslySetInnerHTML={{ __html: textValue }} />;
        };

        const ScrollingBanner = () => (
            <div className="w-full bg-red-700 text-white text-lg font-bold py-2 overflow-hidden whitespace-nowrap fixed top-0 left-0 z-[60]">
                <div className="scrolling-banner-container">
                    <span className="scrolling-banner-text">{Array(10).fill("BRMOTORSPORT • VOTRE SATISFACTION EST NOTRE PRIORITÉ • ").join('')}</span>
                </div>
            </div>
        );

        const Navbar = ({ setCurrentPage, isAdminAuthenticated, handleLogout, isVisible }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <nav className={`bg-black bg-opacity-95 p-4 fixed w-full z-50 shadow-lg top-[40px] navbar-transition ${isVisible ? 'navbar-visible' : 'navbar-hidden'}`}>
                    <div className="container mx-auto flex justify-between items-center px-4">
                        <div className="flex items-center space-x-3 cursor-pointer opacity-0 animate-slide-in-left" onClick={() => setCurrentPage('accueil')}>
                            <img src="logo.png" alt="Logo" className="w-10 h-10 object-contain" />
                            <div className="text-2xl md:text-3xl font-extrabold tracking-widest uppercase">
                                <span className="text-blue-500">BR</span>
                                <span className="text-white">MOTOR</span>
                                <span className="text-red-600">SPORT</span>
                            </div>
                        </div>
                        <div className="hidden md:flex space-x-8">
                            <NavItem text="Accueil" page="accueil" setCurrentPage={setCurrentPage} icon={<CarIcon />} />
                            <NavItem text="Vitrine" page="voiture-vitrine" setCurrentPage={setCurrentPage} icon={<StarIcon />} />
                            <NavItem text="Blog" page="blog" setCurrentPage={setCurrentPage} icon={<RssIcon />} />
                            <NavItem text="Contact" page="contact" setCurrentPage={setCurrentPage} icon={<PhoneIcon />} />
                            {isAdminAuthenticated ? <button onClick={handleLogout} className="text-red-500 font-bold ml-4">Déconnexion</button> : <button onClick={() => setCurrentPage('admin-login')} className="text-gray-500 ml-4 text-xs">Admin</button>}
                        </div>
                    </div>
                </nav>
            );
        };

        const NavItem = ({ text, page, setCurrentPage, icon }) => (
            <button onClick={() => setCurrentPage(page)} className="text-gray-300 hover:text-red-500 flex items-center space-x-2 transition font-semibold">
                {icon && <span>{icon}</span>}
                <span>{text}</span>
            </button>
        );

        const HomePage = ({ setCurrentPage, isAdminAuthenticated }) => (
            <div className="min-h-screen bg-black text-white pt-48 pb-12 relative">
                <div className="container mx-auto px-6 text-center relative z-10">
                    <EditableText tag="h1" contentKey="home.mainTitle" isAdminAuthenticated={isAdminAuthenticated} className="text-5xl md:text-8xl font-black mb-8 animate-vibrate" />
                    <EditableText tag="p" contentKey="home.description" isAdminAuthenticated={isAdminAuthenticated} className="text-xl text-gray-400 max-w-3xl mx-auto mb-12 animate-fade-in-up" />
                    <div className="flex flex-wrap justify-center gap-6">
                        <button onClick={() => setCurrentPage('blog')} className="bg-red-600 hover:bg-red-700 px-10 py-4 rounded-full font-bold shadow-xl transition transform hover:scale-105">Découvrir le Blog</button>
                        <button onClick={() => setCurrentPage('voiture-vitrine')} className="bg-blue-600 hover:bg-blue-700 px-10 py-4 rounded-full font-bold shadow-xl transition transform hover:scale-105">Voiture Vitrine</button>
                    </div>
                </div>
            </div>
        );

        // --- GESTION ADMINISTRATIVE ET BLOG ---
        const AdminPanelPage = ({ setIsAdminAuthenticated, setCurrentPage }) => {
            const { content, updateContent } = useContext(ContentContext);
            return (
                <div className="min-h-screen bg-black text-white pt-48 pb-12 flex flex-col items-center">
                    <h1 className="text-4xl font-bold mb-10 text-orange-500">Panneau d'administration</h1>
                    <div className="bg-gray-900 p-8 rounded-xl border border-gray-800 w-full max-w-4xl">
                        <p className="mb-6">Modifiez vos textes directement sur les pages ou gérez vos articles de blog ici.</p>
                        <button onClick={() => setIsAdminAuthenticated(false)} className="bg-red-600 px-6 py-2 rounded">Se déconnecter</button>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(localStorage.getItem('isAdminAuthenticated') === 'true');
            const [currentPage, setCurrentPage] = useState('accueil');
            const [content, setContent] = useState(null);
            const [isNavbarVisible, setIsNavbarVisible] = useState(true);
            const lastScrollY = useRef(0);

            useEffect(() => {
                fetch('content.json').then(res => res.json()).then(data => setContent(data)).catch(() => setContent({
                    home: { mainTitle: "Libérez la <span class='text-blue-500'>Puissance</span>.", description: "Spécialiste de la reprogrammation moteur." },
                    contact: { mainTitle: "Contact" }
                }));
            }, []);

            useEffect(() => {
                const handleScroll = () => {
                    const current = window.scrollY;
                    if (current > lastScrollY.current && current > 100) setIsNavbarVisible(false);
                    else setIsNavbarVisible(true);
                    lastScrollY.current = current;
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const updateContent = (path, val) => {
                const newC = {...content};
                let curr = newC;
                const parts = path.split('.');
                for(let i=0; i<parts.length-1; i++) curr = curr[parts[i]];
                curr[parts[parts.length-1]] = val;
                setContent(newC);
            };

            if(!content) return <div className="bg-black h-screen flex items-center justify-center text-white">Chargement...</div>;

            return (
                <ContentContext.Provider value={{ content, updateContent }}>
                    <div className="bg-black min-h-screen">
                        <ScrollingBanner />
                        <Navbar setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} handleLogout={() => setIsAdminAuthenticated(false)} isVisible={isNavbarVisible} />
                        <main>
                            {currentPage === 'accueil' && <HomePage setCurrentPage={setCurrentPage} isAdminAuthenticated={isAdminAuthenticated} />}
                            {currentPage === 'admin-panel' && <AdminPanelPage setIsAdminAuthenticated={setIsAdminAuthenticated} setCurrentPage={setCurrentPage} />}
                        </main>
                        <footer className="bg-gray-900 py-12 text-center text-gray-500">
                            <p>© 2025 BRMOTORSPORT. Réalisé par Viremot Giovanni</p>
                        </footer>
                    </div>
                </ContentContext.Provider>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
